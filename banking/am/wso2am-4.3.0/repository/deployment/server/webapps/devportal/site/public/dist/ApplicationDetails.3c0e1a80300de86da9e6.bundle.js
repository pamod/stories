"use strict";(this.webpackChunk_wso2apim_devportal=this.webpackChunk_wso2apim_devportal||[]).push([[9532],{119148:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Wt});var i=a(811504),n=a(991568),s=a(906940),r=a(203268),l=a.n(r),o=a(570440),c=a(655592),p=a(144464),d=a(414764),u=a(162248),m=a(404292),g=a(153032),h=a(273384),b=a(219811),f=a(773256),E=a(927732),y=(a(602640),a(913140)),v=a(973720),S=a(902706),x=a(758872),k=a(153328),T=a(212576),A=a(40928),M=a(217729),w=a(128536),D=a(715656),I=a(314320),C=a(622037),P=a(377384),R=a(957852),$=a(738320),L=a(715008);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}const O={FormControl:"ApiKey-FormControl"},B=(0,s.cp)("div")((e=>{let{theme:t}=e;return{[`& .${O.FormControl}`]:{"margin-bottom":"8px",width:"100%",padding:"0px 10px"}}})),q=e=>{const[t,a]=(0,i.useState)(!0),[n,s]=(0,i.useState)(!1),r=(t,i)=>{const{accessTokenRequest:n,updateAccessTokenRequest:r}=e,l=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){var i,n,s,r;i=e,n=t,s=a[t],(n="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n))?r:String(r))in i?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n),{target:o}=i;switch(t){case"infiniteValidity":a(o.checked),o.checked?l.timeout=-1:l.timeout=null;break;case"timeout":void 0===L.c.number.validate(o.value).error?(l.timeout=o.value,s(!1)):(l.timeout=null,s(!0))}r(l)},{intl:l,accessTokenRequest:o}=e;return i.createElement(B,null,i.createElement(P.c,{variant:"standard",margin:"normal",className:O.FormControl},i.createElement(R.c,{control:i.createElement($.c,{checked:t,onChange:e=>r("infiniteValidity",e),value:o.timeout,color:"grey"}),label:l.formatMessage({defaultMessage:"API Key with infinite validity period",id:"Shared.AppsAndKeys.Tokens.apikey.validity.period.label"})}),!t&&i.createElement(C.c,{variant:"standard",required:!0,label:l.formatMessage({defaultMessage:"API Key validity period",id:"Shared.AppsAndKeys.Tokens.apikey"}),InputLabelProps:{shrink:!0},helperText:n?l.formatMessage({defaultMessage:"Please use a valid number for API Key expiry time",id:"Shared.AppsAndKeys.Tokens.apikey.set.validity.error"}):l.formatMessage({defaultMessage:"You can set an expiration period to determine the validity period of the token after generation. Set this as -1 to ensure that the apikey never expires.",id:"Shared.AppsAndKeys.Tokens.apikey.set.validity.help"}),fullWidth:!0,name:"timeout",onChange:e=>r("timeout",e),placeholder:l.formatMessage({defaultMessage:"Enter time in seconds",id:"Shared.AppsAndKeys.Tokens.apikey.enter.time"}),value:o.timeout,autoFocus:!0,className:O.inputText,error:n})))};q.contextTypes={intl:l().shape({}).isRequired};const K=(0,g.cp)(q);var W=a(96144),j=a(729700),U=a(969072),z=a(947992),V=a(603704),_=a(135800),F=a(672),H=a(744776),G=a(139760),X=a(463548),Y=a(669848);const J="ApiKeyRestriction",Q={FormControl:`${J}-FormControl`,outterBox:`${J}-outterBox`,Fab:`${J}-Fab`},Z=(0,s.cp)("div")((e=>{let{theme:t}=e;return{[`& .${Q.FormControl}`]:{"margin-bottom":t.spacing(1),width:"100%",padding:t.spacing(0,1)},[`& .${Q.outterBox}`]:{margin:t.spacing(1),padding:t.spacing(1),marginLeft:20,borderColor:"#cccccc"},[`& .${Q.Fab}`]:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}}})),ee=e=>{const[t,a]=(0,i.useState)(!1),[s,r]=(0,i.useState)(!1),{intl:l,newIP:o,updateNewIp:c,ipList:p,updateIpList:d,restrictSchema:g,updateRestrictSchema:h,newReferer:b,updateNewReferer:f,refererList:E,updateRefererList:y}=e;return i.createElement(Z,null,i.createElement(n.c,{border:1,borderRadius:"5px",className:Q.outterBox},i.createElement(u.c,{variant:"body1"},i.createElement(m.c,{defaultMessage:"Key Restrictions",id:"Shared.ApiKeyRestriction.key.restrictions"})),i.createElement(P.c,{variant:"standard",component:"fieldset"},i.createElement(Y.c,{"aria-label":"API Key Restrictions",value:g,row:!0,onChange:e=>{h(e.target.value),d([]),y([]),c(""),f(""),a(!1),r(!1)}},i.createElement(R.c,{value:"none",control:i.createElement(X.c,{color:"primary",id:"api-key-restriction-none"}),label:l.formatMessage({defaultMessage:"None",id:"Shared.ApiKeyRestriction.key.restrictions.none"}),labelPlacement:"end"}),i.createElement(R.c,{value:"ip",control:i.createElement(X.c,{color:"primary",id:"api-key-restriction-ip"}),label:l.formatMessage({defaultMessage:"IP Addresses",id:"Shared.ApiKeyRestriction.key.restrictions.ip.addresses"}),labelPlacement:"end"}),i.createElement(R.c,{value:"referer",control:i.createElement(X.c,{color:"primary",id:"api-key-restriction-referer"}),label:l.formatMessage({defaultMessage:"HTTP Referrers (Web Sites)",id:"Shared.ApiKeyRestriction.key.restrictions.http.referrers"}),labelPlacement:"end"}))),"ip"===g&&i.createElement(n.c,{component:"div",id:"ipPanel"},i.createElement(D.cp,{container:!0,direction:"row",spacing:0,justifyContent:"left",alignItems:"left"},i.createElement(D.cp,{item:!0,md:10,xs:10},i.createElement(C.c,{label:l.formatMessage({defaultMessage:"IP Address",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.ip.address.label"}),value:o,onChange:e=>{c(e.target.value.trim()),""===e.target.value.trim()&&a(!1)},className:Q.inputText,helperText:t?l.formatMessage({defaultMessage:"Invalid IP Address",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.ip.validity.error"}):"",error:t,size:"small",margin:"dense",variant:"outlined",placeholder:l.formatMessage({defaultMessage:"Enter IP Address",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.enter.ip"}),fullWidth:!0,id:"ip-address-txt"})),i.createElement(D.cp,{item:!0,md:2,xs:2},i.createElement("span",null,i.createElement(z.c,{className:Q.Fab,size:"small",color:"primary","aria-label":"add",onClick:()=>{null!==o&&""!==o&&(L.c.ipAddress.validate(o).error?a(!0):(a(!1),p.push(o),d(p),c("")))},id:"ip-address-add-btn"},i.createElement(V.c,null))))),i.createElement(D.cp,{container:!0,direction:"row",spacing:0,justifyContent:"left",alignItems:"left",md:10,xs:10},p.length>0&&i.createElement(_.c,null,p.map(((e,t)=>i.createElement(F.cp,null,i.createElement(G.c,{primary:e}),i.createElement(H.c,null,i.createElement(U.c,{title:l.formatMessage({defaultMessage:"Delete task",id:"Shared.ApiKeyRestriction.key.restrictions.delete.task.tooltip"}),placement:"top"},i.createElement(W.c,{edge:"end","aria-label":"delete",onClick:()=>{return t=e,p.splice(p.indexOf(t),1),void d(p);var t},size:"large"},i.createElement(j.default,null)))))))))),"referer"===g&&i.createElement(n.c,{component:"div",id:"refererPanel"},i.createElement(D.cp,{container:!0,direction:"row",spacing:0,justifyContent:"left",alignItems:"left"},i.createElement(D.cp,{item:!0,md:10,xs:10},i.createElement(C.c,{label:l.formatMessage({defaultMessage:"Referer",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.referer.label"}),value:b,onChange:e=>{f(e.target.value.trim()),""===e.target.value.trim()&&r(!1)},className:Q.inputText,helperText:s?l.formatMessage({defaultMessage:"Invalid Http Referer",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.referer.validity.error"}):"",error:s,size:"small",margin:"dense",variant:"outlined",placeholder:l.formatMessage({defaultMessage:"Enter Http Referer",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.enter.referer"}),fullWidth:!0,id:"referer-txt"})),i.createElement(D.cp,{item:!0,md:2,xs:2},i.createElement("span",null,i.createElement(z.c,{size:"small",className:Q.Fab,color:"primary","aria-label":"add",onClick:()=>{null!==b&&""!==b?(r(!1),E.push(b.trim()),y(E),f("")):r(!0)},id:"referer-add-btn"},i.createElement(V.c,null))))),i.createElement(D.cp,{container:!0,direction:"row",spacing:0,justifyContent:"left",alignItems:"left",md:10,xs:10},E.length>0&&i.createElement(_.c,null,E.map(((e,t)=>i.createElement(F.cp,null,i.createElement(G.c,{primary:e}),i.createElement(H.c,null,i.createElement(U.c,{title:l.formatMessage({defaultMessage:"Delete task",id:"Shared.ApiKeyRestriction.key.restrictions.delete.task.tooltip"}),placement:"top"},i.createElement(W.c,{edge:"end","aria-label":"delete",onClick:()=>{return t=e,E.splice(E.indexOf(t),1),void y(E);var t},size:"large"},i.createElement(j.default,null))))))))))))};ee.contextTypes={intl:l().shape({}).isRequired};const te=(0,g.cp)(ee);var ae=a(677516),ie=a(614477),ne=a(458130);function se(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const re="ApiKeyManager",le={root:`${re}-root`,dialog:`${re}-dialog`,button:`${re}-button`,tokenSection:`${re}-tokenSection`,margin:`${re}-margin`,keyConfigWrapper:`${re}-keyConfigWrapper`,generateWrapper:`${re}-generateWrapper`,paper:`${re}-paper`,dialogTitle:`${re}-dialogTitle`,dialogContent:`${re}-dialogContent`,formGroup:`${re}-formGroup`,gridWrapper:`${re}-gridWrapper`,keyTitle:`${re}-keyTitle`,cardBody:`${re}-cardBody`,generateKey:`${re}-generateKey`},oe=(0,s.cp)(D.cp)((e=>{let{theme:t}=e;return{[`& .${le.root}`]:{padding:t.spacing(3),"& span, & h5, & label, & input":{color:t.palette.getContrastText(t.palette.background.paper)}},[`& .${le.dialog}`]:{"& span, & h2, & label":{color:t.palette.getContrastText(t.palette.background.paper)}},[`& .${le.button}`]:{"& span":{color:t.palette.getContrastText(t.palette.primary.main)}},[`& .${le.tokenSection}`]:{marginTop:t.spacing(2),marginBottom:t.spacing(2)},[`& .${le.margin}`]:{marginRight:t.spacing(2)},[`& .${le.keyConfigWrapper}`]:{flexDirection:"column",marginBottom:0},[`& .${le.generateWrapper}`]:{padding:"10px","margin-inline-end":"auto"},[`& .${le.paper}`]:{display:"flex",marginTop:t.spacing(2),marginBottom:t.spacing(2),marginLeft:t.spacing(10)},[`& .${le.dialogTitle}`]:{padding:"24px 24px 0px"},[`& .${le.dialogContent}`]:{padding:"0 24px 0px"},[`& .${le.formGroup}`]:{padding:"20px"},[`& .${le.gridWrapper}`]:{"align-self":"center"},[`& .${le.keyTitle}`]:{textTransform:"capitalize"},[`& .${le.cardBody}`]:{padding:t.spacing(1),lineHeight:2},[`& .${le.generateKey}`]:{"& span":{color:t.palette.getContrastText(t.palette.primary.main)}}}}));class ce extends i.Component{constructor(e){super(e),se(this,"updateIpList",(e=>{this.setState((()=>({ipList:e})))})),se(this,"updateNewIp",(e=>{this.setState((()=>({newIP:e})))})),se(this,"updateRefererList",(e=>{this.setState((()=>({refererList:e})))})),se(this,"updateNewReferer",(e=>{this.setState((()=>({newReferer:e})))})),se(this,"updateRestrictSchema",(e=>{this.setState((()=>({restrictSchema:e})))})),se(this,"handleClose",(()=>{this.setState((()=>({open:!1,accessTokenRequest:{timeout:-1}})))})),se(this,"handleClickOpen",(()=>{this.setState((()=>({open:!0,showToken:!1})))})),se(this,"updateAccessTokenRequest",(e=>{this.setState((()=>({accessTokenRequest:e})))})),se(this,"generateKeys",(()=>{const{selectedApp:e,keyType:t}=this.props;this.setState({isGenerating:!0});const a=new h.c,i={permittedIP:this.state.ipList.join(","),permittedReferer:this.state.refererList.join(",")};a.generateApiKey(e.appId,t,this.state.accessTokenRequest.timeout,i).then((e=>{console.log("Non empty response received");const t={accessToken:e.body.apikey,validityTime:e.body.validityTime,isOauth:!1};this.setState((()=>({apikey:t,open:!0,showToken:!0,ipList:[],refererList:[]}))),this.setState({isGenerating:!1})})).catch((e=>{const{status:t}=e;404===t&&this.setState({notFound:!0,ipList:[],refererList:[]}),this.setState({isGenerating:!1})}))})),this.state={apikey:null,open:!1,showToken:!1,accessTokenRequest:{timeout:-1},ipList:[],newIP:null,restrictSchema:"none",refererList:[],newReferer:null,isGenerating:!1}}render(){const{showToken:e,accessTokenRequest:t,open:a,apikey:n,newIP:s,ipList:r,newReferer:l,refererList:o,restrictSchema:c,isGenerating:p}=this.state;return i.createElement(oe,{container:!0,direction:"row",spacing:0,justifyContent:"left",alignItems:"left"},i.createElement(D.cp,{item:!0,md:5,xs:12},i.createElement(te,{updateNewIp:this.updateNewIp,newIP:s,updateIpList:this.updateIpList,ipList:r,restrictSchema:c,updateRestrictSchema:this.updateRestrictSchema,refererList:o,newReferer:l,updateNewReferer:this.updateNewReferer,updateRefererList:this.updateRefererList}),i.createElement(w.c,{row:!0,className:le.formGroup},i.createElement(S.c,{variant:"contained",color:"primary",onClick:this.handleClickOpen,className:le.generateKey,id:"generate-key-btn"},this.props.intl.formatMessage({id:"Shared.AppsAndKeys.ApiKeyManager.generate.key.btn",defaultMessage:"Generate Key"})),i.createElement(u.c,{component:"div",variant:"body2",className:le.formLabel},i.createElement(m.c,{id:"Shared.AppsAndKeys.ApiKeyManager.generate.key.help",defaultMessage:"Use the Generate Key button to generate a self-contained JWT token."}))),i.createElement(x.c,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",className:le.dialog},i.createElement(M.c,{id:"responsive-dialog-title",className:le.dialogTitle},this.props.intl.formatMessage({id:"Shared.AppsAndKeys.ApiKeyManager.generate.api.key.btn",defaultMessage:"Generate API Key"})),i.createElement(T.c,{className:le.dialogContent},i.createElement(A.c,null,!e&&i.createElement(K,{updateAccessTokenRequest:this.updateAccessTokenRequest,accessTokenRequest:t}),e&&i.createElement(I.c,{token:n}))),i.createElement(k.c,null,!e&&i.createElement(S.c,{onClick:this.generateKeys,disabled:!t.timeout||p,color:"primary",variant:"contained",className:le.button,id:"generate-api-keys-btn"},i.createElement(m.c,{id:"Shared.AppsAndKeys.ViewKeys.consumer.generate.btn",defaultMessage:"Generate"}),p&&i.createElement(ne.c,{size:24})),i.createElement(S.c,{onClick:this.handleClose,color:"grey",autoFocus:!0,id:"generate-api-keys-close-btn"},i.createElement(m.c,{id:"Shared.AppsAndKeys.ViewKeys.consumer.close.btn",defaultMessage:"Close"}))))),"ip"===c&&i.createElement(D.cp,{item:!0,md:5,xs:12},i.createElement(ae.c,null,i.createElement(ie.c,null,i.createElement(u.c,{variant:"h5",component:"h2"},i.createElement(m.c,{id:"Shared.AppsAndKeys.ViewKeys.apiKeyRestriction.ip.example.heading",defaultMessage:"Examples of IP Addresses allowed"})),i.createElement(u.c,{variant:"body1",component:"p",className:le.cardBody},i.createElement(m.c,{id:"Shared.AppsAndKeys.ViewKeys.apiKeyRestriction.ip.example.content",defaultMessage:"Specify one IPv4 or IPv6 or a subnet using CIDR notation{linebreak}Examples: {ip1}, {ip2}, {ip3} or {ip4}",values:{linebreak:i.createElement("br",null),ip1:i.createElement("b",null,"192.168.1.2"),ip2:i.createElement("b",null,"152.12.0.0/13"),ip3:i.createElement("b",null,"2002:eb8::2"),ip4:i.createElement("b",null,"1001:ab8::/44")}}))))),"referer"===c&&i.createElement(D.cp,{item:!0,md:5,xs:12},i.createElement(ae.c,null,i.createElement(ie.c,null,i.createElement(u.c,{variant:"h5",component:"h2"},i.createElement(m.c,{id:"Shared.AppsAndKeys.ViewKeys.apiKeyRestriction.referer.example.heading",defaultMessage:"Examples of URLs allowed to restrict websites"})),i.createElement(u.c,{variant:"body1",component:"p",className:le.cardBody},i.createElement(m.c,{id:"Shared.AppsAndKeys.ViewKeys.apiKeyRestriction.ip.example.content.message",defaultMessage:"A specific URL with an exact path: {url1}{linebreak}Any URL in a single subdomain, using a wildcard asterisk (*): {url2}{linebreak}Any subdomain or path URLs in a single domain, using wildcard asterisks (*): {url3}",values:{linebreak:i.createElement("br",null),url1:i.createElement("b",null,"www.example.com/path"),url2:i.createElement("b",null,"sub.example.com/*"),url3:i.createElement("b",null,"*.example.com/*")}}))))))}}ce.propTypes={classes:l().shape({}).isRequired,selectedApp:l().shape({tokenType:l().string.isRequired}).isRequired,keyType:l().string.isRequired,intl:l().shape({formatMessage:l().func}).isRequired};const pe=(0,g.cp)(ce);var de=a(482084),ue=a.n(de),me=a(924004),ge=a(232152),he=a(157344),be=a(585824),fe=a(457416),Ee=a(739376),ye=a(226120),ve=a(206976),Se=a(479040),xe=a(349196),ke=a(403972),Te=a(141776),Ae=a(676668),Me=a(427460),we=a(340056),De=a(631408),Ie=a(542592),Ce=a(101640);function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Pe.apply(this,arguments)}const Re="SubscriptionPolicySelectLegacy",$e={root:`${Re}-root`,buttonGap:`${Re}-buttonGap`,select:`${Re}-select`},Le=(0,s.cp)("div")((e=>{let{theme:t}=e;return{[`&.${$e.root}`]:{display:"flex"},[`& .${$e.buttonGap}`]:{background:t.palette.grey[300],marginLeft:20,"& span span":{color:t.palette.getContrastText(t.palette.primary.main)}},[`& .${$e.select}`]:{width:100}}}));class Ne extends i.Component{constructor(e){super(e),this.state={selectedPolicy:null}}componentDidMount(){const{policies:e}=this.props;this.setState({selectedPolicy:e[0]})}render(){const{policies:e,apiId:t,handleSubscribe:a,applicationId:n}=this.props,{selectedPolicy:s}=this.state;return e&&i.createElement(Le,{className:$e.root},i.createElement(De.c,{id:"policy-select",disableClearable:!0,options:e,value:s,onChange:(e,t)=>{this.setState({selectedPolicy:t})},style:{width:200},renderInput:e=>i.createElement(C.c,Pe({size:"small",variant:"standard"},e)),renderOption:(e,t)=>i.createElement(we.c,Pe({},e,{value:t,key:t,id:"policy-select-"+t}),t)}),i.createElement(Ce.qG,{resourcePath:Ce.Ce.SUBSCRIPTIONS,resourceMethod:Ce.Ep.POST},i.createElement(S.c,{variant:"contained",size:"small",color:"grey",className:$e.buttonGap,onClick:()=>{a(n,t,s)},id:"policy-subscribe-btn-"+t},i.createElement(m.c,{defaultMessage:"Subscribe",id:"Apis.Listing.SubscriptionPolicySelect.subscribe"}))))}}Ne.propTypes={classes:l().shape({}).isRequired,policies:l().shape({}).isRequired,apiId:l().string.isRequired,handleSubscribe:l().func.isRequired,applicationId:l().string.isRequired};const Oe=function(e){const{key:t,policies:a,apiId:n,handleSubscribe:s,applicationId:r}=e,l=(0,Ie.c)();return i.createElement(Ne,{key:t,policies:a,apiId:n,handleSubscribe:s,applicationId:r,theme:l})};function Be(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const qe="APICardView",Ke=`${qe}-root`,We=`${qe}-buttonGap`,je=(0,s.cp)("div")((()=>({[`& .${Ke}`]:{display:"flex"},[`& .${We}`]:{marginRight:10}})));class Ue extends i.Component{constructor(e){super(e),Be(this,"getData",(()=>{const{intl:e}=this.props;this.xhrRequest().then((e=>{const{body:t}=e,{list:a,pagination:i}=t,{total:n}=i;this.count=n,this.setState({data:this.updateUnsubscribedAPIsList(a)})})).catch((t=>{const{response:a}=t,{setTenantDomain:i}=this.props;a&&901300===a.body.code?(i("INVALID"),Te.c.error(e.formatMessage({defaultMessage:"Invalid tenant domain",id:"Apis.Listing.ApiTableView.invalid.tenant.domain"}))):Te.c.error(e.formatMessage({defaultMessage:"Error While Loading APIs",id:"Apis.Listing.ApiTableView.error.loading"}))})).finally((()=>{this.setState({loading:!1})}))})),Be(this,"changePage",(e=>{const{intl:t}=this.props;this.page=e,this.setState({loading:!0}),this.xhrRequest().then((e=>{const{body:t}=e,{list:a}=t;this.setState({data:this.updateUnsubscribedAPIsList(a)})})).catch((()=>{Te.c.error(t.formatMessage({defaultMessage:"Error While Loading APIs",id:"Apis.Listing.ApiTableView.error.loading"}))})).finally((()=>{this.setState({loading:!1})}))})),Be(this,"xhrRequest",(()=>{const{searchText:e}=this.props,{page:t,rowsPerPage:a}=this,i=new h.c;return e&&""!==e?i.getAllAPIs({query:`${e} status:published`,limit:this.rowsPerPage,offset:t*a}):i.getAllAPIs({query:"status:published",limit:this.rowsPerPage,offset:t*a})})),this.state={data:null,loading:!0},this.page=0,this.count=100,this.rowsPerPage=10,this.pageType=null}componentDidMount(){this.getData()}componentDidUpdate(e){const{subscriptions:t,searchText:a}=this.props;t.length!==e.subscriptions.length?this.getData():a!==e.searchText&&(this.page=0,this.getData())}getIdsOfSubscribedEntities(){const{subscriptions:e}=this.props;return e.map((e=>e.apiId)).filter(Boolean)}updateUnsubscribedAPIsList(e){const t=e,a=this.getIdsOfSubscribedEntities();for(let e=0;e<t.length;e++)(a.includes(t[e].id)||t[e].advertiseInfo.advertised||!t[e].isSubscriptionAvailable)&&(t[e].throttlingPolicies=null);return t}render(){const{apisNotFound:e}=this.props,{loading:t,data:a}=this.state,{page:n,count:s,rowsPerPage:r}=this;if(e)return i.createElement(E.c,null);const{handleSubscribe:l,applicationId:o,intl:c}=this.props,p=[{name:"id",label:c.formatMessage({id:"Apis.Listing.APIList.id",defaultMessage:"Id"}),options:{display:"excluded"}},{name:"isSubscriptionAvailable",label:c.formatMessage({id:"Apis.Listing.APIList.isSubscriptionAvailable",defaultMessage:"Is Subscription Available"}),options:{display:"excluded"}},{name:"name",label:c.formatMessage({id:"Apis.Listing.APIList.name",defaultMessage:"Name"})},{name:"version",label:c.formatMessage({id:"Apis.Listing.APIList.version",defaultMessage:"Version"})},{name:"throttlingPolicies",label:c.formatMessage({id:"Apis.Listing.APIList.subscription.status",defaultMessage:"Subscription Status"}),options:{customBodyRender:(e,t)=>{if(t.rowData){const a=t.rowData[0],n=e;return t.rowData[1]?n?i.createElement(Oe,{key:a,policies:n,apiId:a,handleSubscribe:(e,t,a)=>l(e,t,a),applicationId:o}):c.formatMessage({id:"Apis.Listing.APICardView.already.subscribed",defaultMessage:"Subscribed"}):c.formatMessage({id:"Apis.Listing.APICardView.not.allowed",defaultMessage:"Not Allowed"})}return i.createElement("span",null)}}}],d={search:!1,title:!1,filter:!1,print:!1,download:!1,viewColumns:!1,customToolbar:!1,responsive:"stacked",serverSide:!0,count:s,page:n,onTableChange:(e,t)=>{"changePage"===e&&this.changePage(t.page)},selectableRows:"none",rowsPerPage:r,onChangeRowsPerPage:e=>{const{page:t,count:a}=this;t*e>a&&(this.page=0),this.rowsPerPage=e,this.getData()},textLabels:{pagination:{rowsPerPage:c.formatMessage({id:"Apis.Listing.APICardView.rows.per.page",defaultMessage:"Rows per page"})}}};return t?i.createElement(f.c,null):a&&0===a.length||!a?i.createElement(Me.c,null):i.createElement(je,{id:"subscribe-to-api-table"},i.createElement(Ae.cp,{title:"",data:a,columns:p,options:d}))}}Ue.propTypes={intl:l().shape({formatMessage:l().func}).isRequired};const ze=(0,g.cp)(Ue);var Ve=a(895896),_e=a(971192),Fe=a(329821),He=a(428652),Ge=a(455344);const Xe="Invoice-dialogWrapper",Ye=(0,s.cp)("div")((e=>{let{theme:t}=e;return{[`& .${Xe}`]:{"& span,& p , & h5, & label, & td, & li":{color:t.palette.getContrastText(t.palette.background.paper)},"& div, & input, & p.MuiFormHelperText-root":{color:t.palette.getContrastText(t.palette.background.paper)}}}})),Je=["Name","Value"],Qe={filterType:"checkbox",sort:!1,search:!1,viewColumns:!1,filter:!1,selectableRowsHeader:!1,selectableRows:"none",pagination:!1,download:!1};function Ze(e){const{subscriptionId:t,tiers:a}=e,[n,s]=(0,i.useState)(!1),[r,l]=(0,i.useState)(!1),[o,c]=(0,i.useState)(null),p=()=>{l(!1)};return i.createElement(Ye,null,i.createElement(S.c,{color:"grey",onClick:()=>{s(!0),c(null),(new Ve.c).getMonetizationInvoice(t).then((e=>{if(e&&e.obj){const t=[],{obj:{properties:a}}=e;Object.keys(a).forEach((e=>{const i=[];i.push(e),i.push(a[e]),t.push(i)})),c(t)}})).catch((e=>{console.error(e),l(!0)}))},startIcon:i.createElement(ye.c,null,"receipt"),disabled:0===a.length},i.createElement(m.c,{id:"Applications.Details.Invoice.view.btn",defaultMessage:"View Invoice"})),o?i.createElement(x.c,{open:n,onClose:()=>{s(!1)},fullWidth:"true",className:Xe},o&&i.createElement(Ae.cp,{title:"Upcoming Invoice",data:o,columns:Je,options:Qe})):i.createElement(x.c,{open:r,onClose:p,fullWidth:"true",className:Xe},i.createElement(M.c,null,i.createElement(m.c,{id:"Applications.Details.Invoice.no.data.available",defaultMessage:"No Data Available"})),i.createElement(T.c,null,i.createElement(A.c,{id:"invoice-dialog-description"},i.createElement(m.c,{id:"Applications.Details.Invoice.pending.invoice.data",defaultMessage:"Pending invoice data not found for this subscription."}))),i.createElement(k.c,null,i.createElement(S.c,{onClick:p,color:"primary"},i.createElement(m.c,{id:"Applications.Details.Invoice.close",defaultMessage:"Close"})))))}Ze.defaultProps={tiers:[]},Ze.propTypes={subscriptionId:l().string.isRequired,tiers:l().arrayOf(l().string)};const et=Ze;function tt(){return tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},tt.apply(this,arguments)}class at extends i.Component{constructor(e){super(e),this.state={openMenu:!1,openMenuEdit:!1,isMonetizedAPI:!1,isDynamicUsagePolicy:!1,tiers:[],selectedTier:""},this.handleRequestClose=this.handleRequestClose.bind(this),this.handleRequestOpen=this.handleRequestOpen.bind(this),this.handleRequestDelete=this.handleRequestDelete.bind(this),this.checkIfDynamicUsagePolicy=this.checkIfDynamicUsagePolicy.bind(this),this.checkIfMonetizedAPI=this.checkIfMonetizedAPI.bind(this),this.populateSubscriptionTiers=this.populateSubscriptionTiers.bind(this),this.handleSubscriptionTierUpdate=this.handleSubscriptionTierUpdate.bind(this),this.handleRequestCloseEditMenu=this.handleRequestCloseEditMenu.bind(this),this.handleRequestOpenEditMenu=this.handleRequestOpenEditMenu.bind(this),this.setSelectedTier=this.setSelectedTier.bind(this)}componentDidMount(){this.checkIfMonetizedAPI(this.props.subscription.apiId),this.checkIfDynamicUsagePolicy(this.props.subscription.subscriptionId),this.populateSubscriptionTiers(this.props.subscription.apiId)}setSelectedTier(e){this.setState({selectedTier:e})}handleRequestDelete(e){const{handleSubscriptionDelete:t}=this.props;this.setState({openMenu:!1}),t&&t(e)}handleRequestCloseEditMenu(){this.setState({openMenuEdit:!1})}handleRequestOpenEditMenu(){this.setState({openMenuEdit:!0})}handleRequestOpen(){this.setState({openMenu:!0})}handleRequestClose(){this.setState({openMenu:!1})}handleSubscriptionTierUpdate(e,t,a,i,n){const{handleSubscriptionUpdate:s}=this.props;this.setState({openMenuEdit:!1}),s&&s(e,t,n,i,a)}populateSubscriptionTiers(e){(new h.c).getAPIById(e).then((e=>{if(e&&e.data){const t=JSON.parse(e.data).tiers,a=[];for(let e=0;e<t.length;e++){const{tierName:i}=t[e];a.push({value:i,label:i})}this.setState({tiers:a})}}))}checkIfMonetizedAPI(e){(new h.c).getAPIById(e).then((e=>{if(e&&e.data){const t=JSON.parse(e.data);this.setState({isMonetizedAPI:t.monetization.enabled})}}))}checkIfDynamicUsagePolicy(e){(new Ve.c).getSubscription(e).then((e=>{if(e&&e.body){const t=JSON.parse(e.data);t.throttlingPolicy&&(new h.c).getTierByName(t.throttlingPolicy,"subscription").then((e=>{const t=JSON.parse(e.data);t.monetizationAttributes.billingType&&"DYNAMICRATE"===t.monetizationAttributes.billingType&&this.setState({isDynamicUsagePolicy:!0})}))}}))}render(){const{subscription:{apiInfo:e,status:t,throttlingPolicy:a,subscriptionId:n,apiId:s,requestedThrottlingPolicy:r,applicationId:l}}=this.props,{openMenu:c,isMonetizedAPI:p,isDynamicUsagePolicy:d,openMenuEdit:u,selectedTier:g,tiers:h}=this.state;let b=i.createElement(o.cH,{to:0===h.length?"":"/apis/"+s,style:{cursor:0===h.length?"default":""},external:!0},e.name+" - "+e.version+" ",i.createElement(Ge.Icon,{path:He._2Q,size:"12px"}));return"WEBSUB"===e.type&&(b=i.createElement(o.cH,{to:0===h.length?"":"/applications/"+l+"/webhooks/"+s,style:{cursor:0===h.length?"default":""}},e.name+" - "+e.version)),i.createElement(Ee.c,{hover:!0},i.createElement(be.c,null,b),i.createElement(be.c,null,e.lifeCycleStatus),i.createElement(be.c,null,a),i.createElement(be.c,null,t),i.createElement(be.c,null,i.createElement(S.c,{id:"edit-api-subscription-"+s,color:"grey",onClick:this.handleRequestOpenEditMenu,startIcon:i.createElement(ye.c,null,"edit"),disabled:0===h.length},i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.edit.text",defaultMessage:"Edit"})),i.createElement(x.c,{open:u,transition:Fe.c},i.createElement(M.c,null,i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.update.subscription",defaultMessage:"Update Subscription"})),i.createElement(T.c,null,i.createElement(A.c,null,i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.update.business.plan",defaultMessage:"Current Business Plan : "}),a,i.createElement("div",null,"BLOCKED"===t?i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.update.throttling.policy.blocked",defaultMessage:"Subscription is in BLOCKED state. You need to unblock the subscription in order to edit the tier"}):"ON_HOLD"===t?i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.update.throttling.policy.onHold",defaultMessage:"Subscription is currently ON_HOLD state. You need to get approval to the subscription before editing the tier"}):"REJECTED"===t?i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.update.throttling.policy.rejected",defaultMessage:"Subscription is currently REJECTED state. You need to get approval to the subscription before editing the tier"}):"TIER_UPDATE_PENDING"===t?i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.update.throttling.policy.tierUpdatePending",defaultMessage:"Subscription is currently TIER_UPDATE_PENDING state. You need to get approval to the existing subscription edit request before editing the tier"}):i.createElement("div",null,i.createElement(De.c,{id:"application-policy",disableClearable:!0,options:h,getOptionLabel:e=>{var t;return null!==(t=e.label)&&void 0!==t?t:e},getOptionSelected:(e,t)=>e.value===t,value:g,onChange:(e,t)=>this.setSelectedTier(t.value),renderInput:e=>i.createElement(C.c,tt({id:"outlined-select-currency",name:"throttlingPolicy",required:!0},e,{label:i.createElement(m.c,{defaultMessage:"Business Plan",id:"Applications.Details.SubscriptionTableData.update.business.plan.name"}),helperText:i.createElement(m.c,{defaultMessage:"Assign a new Business plan to the existing subscription",id:"Applications.Details.SubscriptionTableData.update.throttling.policy.helper"}),margin:"normal",variant:"outlined"}))}),"TIER_UPDATE_PENDING"===t&&i.createElement("div",null,i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.update.throttling.policy.tier.update",defaultMessage:"Pending Tier Update : "}),r))))),i.createElement(k.c,null,i.createElement(S.c,{dense:!0,color:"grey",onClick:this.handleRequestCloseEditMenu},i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.cancel",defaultMessage:"Cancel"})),i.createElement(S.c,{variant:"contained",disabled:"BLOCKED"===t||"ON_HOLD"===t||"REJECTED"===t||"TIER_UPDATE_PENDING"===t,dense:!0,color:"primary",onClick:()=>this.handleSubscriptionTierUpdate(s,n,g,t,a)},i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.update",defaultMessage:"Update"})))),i.createElement(Ce.qG,{resourcePath:Ce.Ce.SINGLE_SUBSCRIPTION,resourceMethod:Ce.Ep.DELETE},i.createElement(S.c,{id:"delete-api-subscription-"+s,color:"grey",onClick:this.handleRequestOpen,startIcon:i.createElement(ye.c,null,"delete"),disabled:0===h.length||"DELETE_PENDING"===t},i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.delete.text",defaultMessage:"Delete"}))),i.createElement(x.c,{open:c,transition:Fe.c},i.createElement(M.c,null,i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.delete.subscription.confirmation.dialog.title",defaultMessage:"Confirm"})),i.createElement(T.c,null,i.createElement(A.c,null,i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.delete.subscription.confirmation",defaultMessage:"Are you sure you want to delete the Subscription?"}))),i.createElement(k.c,null,i.createElement(S.c,{dense:!0,color:"grey",onClick:this.handleRequestClose},i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.cancel",defaultMessage:"Cancel"})),i.createElement(S.c,{id:"delete-api-subscription-confirm-btn",dense:!0,variant:"contained",color:"primary",onClick:()=>this.handleRequestDelete(n)},i.createElement(m.c,{id:"Applications.Details.SubscriptionTableData.delete",defaultMessage:"Delete"})))),p&&i.createElement(et,{tiers:h,subscriptionId:n,isDynamicUsagePolicy:d})))}}at.propTypes={subscription:l().shape({apiInfo:l().shape({name:l().string.isRequired,version:l().string.isRequired,lifeCycleStatus:l().string.isRequired}).isRequired,throttlingPolicy:l().string.isRequired,subscriptionId:l().string.isRequired,apiId:l().string.isRequired,status:l().string.isRequired,requestedThrottlingPolicy:l().string.isRequired}).isRequired,handleSubscriptionDelete:l().func.isRequired,handleSubscriptionUpdate:l().func.isRequired};const it=at,nt="Subscriptions",st={searchRoot:`${nt}-searchRoot`,input:`${nt}-input`,iconButton:`${nt}-iconButton`,divider:`${nt}-divider`,root:`${nt}-root`,subscribePop:`${nt}-subscribePop`,firstCell:`${nt}-firstCell`,cardTitle:`${nt}-cardTitle`,cardContent:`${nt}-cardContent`,titleWrapper:`${nt}-titleWrapper`,dialogTitle:`${nt}-dialogTitle`,genericMessageWrapper:`${nt}-genericMessageWrapper`,searchWrapper:`${nt}-searchWrapper`,searchResults:`${nt}-searchResults`,clearSearchIcon:`${nt}-clearSearchIcon`,subsTable:`${nt}-subsTable`},rt=(0,s.cp)(ke.c)((e=>{let{theme:t}=e;return{[`& .${st.searchRoot}`]:{padding:"2px 4px",display:"flex",alignItems:"center",width:400,flex:1,marginLeft:t.spacing(2),marginRight:t.spacing(2)},[`& .${st.input}`]:{marginLeft:t.spacing(1),flex:1},[`& .${st.iconButton}`]:{padding:10},[`& .${st.divider}`]:{height:28,margin:4},[`& .${st.root}`]:{padding:t.spacing(3),"& h5":{color:t.palette.getContrastText(t.palette.background.default)}},[`& .${st.subscribePop}`]:{"& span, & h5, & label, & input, & td, & li":{color:t.palette.getContrastText(t.palette.background.paper)}},[`& .${st.firstCell}`]:{paddingLeft:0},[`& .${st.cardTitle}`]:{paddingLeft:t.spacing(2)},[`& .${st.cardContent}`]:{"& table tr td":{paddingLeft:t.spacing(1)},"& table tr:nth-child(even)":{backgroundColor:t.custom.listView.tableBodyEvenBackgrund,"& td, & a":{color:t.palette.getContrastText(t.custom.listView.tableBodyEvenBackgrund)}},"& table tr:nth-child(odd)":{backgroundColor:t.custom.listView.tableBodyOddBackgrund,"& td, & a":{color:t.palette.getContrastText(t.custom.listView.tableBodyOddBackgrund)}},"& table th":{backgroundColor:t.custom.listView.tableHeadBackground,color:t.palette.getContrastText(t.custom.listView.tableHeadBackground),paddingLeft:t.spacing(1)}},[`& .${st.titleWrapper}`]:{display:"flex",alignItems:"center",paddingBottom:t.spacing(2),"& h5":{marginRight:t.spacing(1)}},[`& .${st.dialogTitle}`]:{display:"flex",alignItems:"flex-start",padding:t.spacing(1)},[`& .${st.genericMessageWrapper}`]:{margin:t.spacing(2)},[`& .${st.searchWrapper}`]:{flex:1},[`& .${st.searchResults}`]:{height:30,display:"flex",paddingTop:t.spacing(1),paddingRight:0,paddingBottom:0,paddingLeft:t.spacing(2)},[`& .${st.clearSearchIcon}`]:{cursor:"pointer"},[`& .${st.subsTable}`]:{"& td":{padding:"4px 8px"}}}}));class lt extends i.Component{constructor(e){super(e),this.state={subscriptions:null,apisNotFound:!1,subscriptionsNotFound:!1,isAuthorize:!0,openDialog:!1,searchText:""},this.handleSubscriptionDelete=this.handleSubscriptionDelete.bind(this),this.handleSubscriptionUpdate=this.handleSubscriptionUpdate.bind(this),this.updateSubscriptions=this.updateSubscriptions.bind(this),this.handleSubscribe=this.handleSubscribe.bind(this),this.handleOpenDialog=this.handleOpenDialog.bind(this),this.handleSearchTextChange=this.handleSearchTextChange.bind(this),this.handleSearchTextTmpChange=this.handleSearchTextTmpChange.bind(this),this.handleClearSearch=this.handleClearSearch.bind(this),this.handleEnterPress=this.handleEnterPress.bind(this),this.searchTextTmp=""}componentDidMount(){const{applicationId:e}=this.props.application;this.updateSubscriptions(e)}handleOpenDialog(){this.setState((e=>({openDialog:!e.openDialog,searchText:""})))}updateSubscriptions(e){const t=new Ve.c,a=b.app.subscriptionLimit||1e3;t.getSubscriptions(null,e,a).then((e=>{this.setState({subscriptions:e.body.list})})).catch((e=>{const{status:t}=e;404===t?this.setState({subscriptionsNotFound:!0}):401===t&&this.setState({isAuthorize:!1})}))}handleSubscriptionDelete(e){const{intl:t}=this.props;(new Ve.c).deleteSubscription(e).then((a=>{if(201===a.status){console.log(a),Te.c.info(t.formatMessage({defaultMessage:"Subscription Deletion Request Created!",id:"Applications.Details.Subscriptions.request.created"}));const{applicationId:e}=this.props.application;return void this.updateSubscriptions(e)}if(200!==a.status)return console.log(a),void Te.c.info(t.formatMessage({defaultMessage:"Something went wrong while deleting the Subscription!",id:"Applications.Details.Subscriptions.something.went.wrong"}));Te.c.info(t.formatMessage({defaultMessage:"Subscription deleted successfully!",id:"Applications.Details.Subscriptions.delete.success"}));const{subscriptions:i}=this.state;for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&i[t].subscriptionId===e){i.splice(t,1);break}this.setState({subscriptions:i}),this.props.getApplication()})).catch((e=>{const{status:a}=e;401===a&&this.setState({isAuthorize:!1}),Te.c.error(t.formatMessage({defaultMessage:"Error occurred when deleting subscription",id:"Applications.Details.Subscriptions.error.while.deleting"}))}))}handleSubscriptionUpdate(e,t,a,i,n){const{intl:s}=this.props,{applicationId:r}=this.props.application;(new Ve.c).updateSubscription(r,e,t,a,i,n).then((e=>{if(200!==e.status&&201!==e.status)return console.log(e),void Te.c.info(s.formatMessage({defaultMessage:"Something went wrong while updating the Subscription!",id:"Applications.Details.Subscriptions.wrong.with.subscription"}));"TIER_UPDATE_PENDING"===e.body.status?Te.c.info("Your subscription update request has been submitted and is now awaiting approval."):Te.c.info(s.formatMessage({defaultMessage:"Business Plan updated successfully!",id:"Applications.Details.Subscriptions.business.plan.updated"})),this.updateSubscriptions(r),this.props.getApplication()})).catch((e=>{const{status:t}=e;401===t&&this.setState({isAuthorize:!1}),Te.c.error(s.formatMessage({defaultMessage:"Error occurred when updating subscription",id:"Applications.Details.Subscriptions.error.when.updating"}))}))}handleSubscribe(e,t,a){const i=new h.c,{intl:n}=this.props;a?i.subscribe(t,e,a).then((t=>{201!==t.status?Te.c.error(n.formatMessage({id:"Applications.Details.Subscriptions.error.occurred.during.subscription.not.201",defaultMessage:"Error occurred during subscription"})):("ON_HOLD"===t.body.status?Te.c.info(n.formatMessage({defaultMessage:"Your subscription request has been submitted and is now awaiting approval.",id:"subscription.pending"})):"TIER_UPDATE_PENDING"===t.body.status?Te.c.info(n.formatMessage({defaultMessage:"Your subscription update request has been submitted and is now awaiting approval.",id:"subscription.tierPending"})):Te.c.info(n.formatMessage({id:"Applications.Details.Subscriptions.subscription.successful",defaultMessage:"Subscription successful"})),this.updateSubscriptions(e),this.props.getApplication())})).catch((e=>{const{status:t}=e;401===t&&this.setState({isAuthorize:!1}),403===t&&e.response.body?Te.c.error(e.response.body.description):Te.c.error(n.formatMessage({id:"Applications.Details.Subscriptions.error.occurred.during.subscription",defaultMessage:"Error occurred during subscription"}))})):Te.c.error(n.formatMessage({id:"Applications.Details.Subscriptions.select.a.subscription.policy",defaultMessage:"Select a subscription policy"}))}handleSearchTextChange(){this.setState({searchText:this.searchTextTmp})}handleSearchTextTmpChange(e){this.searchTextTmp=e.target.value}handleClearSearch(){this.setState({searchText:""}),this.searchInputElem.value=""}handleEnterPress(e){13===e.keyCode&&(e.preventDefault(),this.handleSearchTextChange())}render(){const{isAuthorize:e,openDialog:t,searchText:a}=this.state;e||(window.location=b.app.context+"/services/configs");const{subscriptions:s,apisNotFound:r,subscriptionsNotFound:l}=this.state,{applicationId:o}=this.props.application,{intl:c}=this.props;return s?i.createElement(n.c,{sx:e=>({padding:e.spacing(3),"& h5":{color:e.palette.getContrastText(e.palette.background.default)}})},i.createElement(n.c,{sx:e=>({display:"flex",alignItems:"center",paddingBottom:e.spacing(2),"& h5":{marginRight:e.spacing(1)}})},i.createElement(u.c,{variant:"h5",sx:{textTransform:"capitalize"}},i.createElement(m.c,{id:"Applications.Details.Subscriptions.subscription.management",defaultMessage:"Subscription Management"})),i.createElement(S.c,{color:"secondary",className:st.buttonElm,size:"small",onClick:this.handleOpenDialog},i.createElement(ye.c,null,"add_circle_outline"),i.createElement(m.c,{id:"Applications.Details.Subscriptions.subscription.management.add",defaultMessage:"Subscribe APIs"}))),i.createElement(D.cp,{container:!0,sx:"tab-grid",spacing:2},i.createElement(D.cp,{item:!0,xs:12,xl:11},s&&0===s.length?i.createElement(n.c,{sx:e=>({margin:e.spacing(2)})},i.createElement(_e.c,{type:"info",sx:e=>({width:1e3,padding:e.spacing(2)})},i.createElement(u.c,{variant:"h5",component:"h3"},i.createElement(m.c,{id:"Applications.Details.Subscriptions.no.subscriptions",defaultMessage:"No Subscriptions Available"})),i.createElement(u.c,{component:"p"},i.createElement(m.c,{id:"Applications.Details.Subscriptions.no.subscriptions.content",defaultMessage:"No subscriptions are available for this Application"})))):i.createElement(n.c,{sx:e=>({"& table tr td":{paddingLeft:e.spacing(1)},"& table tr:nth-child(even)":{backgroundColor:e.custom.listView.tableBodyEvenBackgrund,"& td, & a":{color:e.palette.getContrastText(e.custom.listView.tableBodyEvenBackgrund)}},"& table tr:nth-child(odd)":{backgroundColor:e.custom.listView.tableBodyOddBackgrund,"& td, & a":{color:e.palette.getContrastText(e.custom.listView.tableBodyOddBackgrund)}},"& table th":{backgroundColor:e.custom.listView.tableHeadBackground,color:e.palette.getContrastText(e.custom.listView.tableHeadBackground),paddingLeft:e.spacing(1)}})},l?i.createElement(E.c,null):i.createElement(ge.c,{sx:{"& td":{padding:"4px 8px"}}},i.createElement(fe.c,null,i.createElement(Ee.c,null,i.createElement(be.c,{sx:{paddingLeft:0}},i.createElement(m.c,{id:"Applications.Details.Subscriptions.api.name",defaultMessage:"API"})),i.createElement(be.c,null,i.createElement(m.c,{id:"Applications.Details.Subscriptions\n                                                                        .subscription.state",defaultMessage:"Lifecycle State"})),i.createElement(be.c,null,i.createElement(m.c,{id:"Applications.Details.Subscriptions\n                                                                        .business.plan",defaultMessage:"Business Plan"})),i.createElement(be.c,null,i.createElement(m.c,{id:"Applications.Details.Subscriptions.Status",defaultMessage:"Subscription Status"})),i.createElement(be.c,null,i.createElement(m.c,{id:"Applications.Details.Subscriptions.action",defaultMessage:"Action"})))),i.createElement(he.c,null,s&&s.map((e=>i.createElement(it,{key:e.subscriptionId,subscription:e,handleSubscriptionDelete:this.handleSubscriptionDelete,handleSubscriptionUpdate:this.handleSubscriptionUpdate})))))))),i.createElement(x.c,{onClose:this.handleOpenDialog,"aria-labelledby":"simple-dialog-title",open:t,maxWidth:"lg",sx:e=>({"& span, & h5, & label, & input, & td, & li":{color:e.palette.getContrastText(e.palette.background.paper)}})},i.createElement(M.c,{disableTypography:!0,sx:e=>({display:"flex",alignItems:"flex-start",padding:e.spacing(1)})},i.createElement(u.c,{variant:"h6"},i.createElement(m.c,{id:"Applications.Details.Subscriptions.subscription.management.add",defaultMessage:"Subscribe APIs"})),i.createElement(n.c,{sx:{flex:1}},i.createElement(me.c,{component:"form",sx:e=>({padding:"2px 4px",display:"flex",alignItems:"center",width:400,height:50,flex:1,marginLeft:e.spacing(2),marginRight:e.spacing(2)})},a&&i.createElement(Se.c,{sx:{cursor:"pointer"},onClick:this.handleClearSearch}),i.createElement(ve.cp,{sx:e=>({marginLeft:e.spacing(1),flex:1}),placeholder:c.formatMessage({defaultMessage:"Search APIs",id:"Applications.Details.Subscriptions.search"}),inputProps:{"aria-label":c.formatMessage({defaultMessage:"Search APIs",id:"Applications.Details.Subscriptions.search"})},inputRef:e=>{this.searchInputElem=e},onChange:this.handleSearchTextTmpChange,onKeyDown:this.handleEnterPress}),i.createElement(W.c,{sx:{padding:10},"aria-label":"search",onClick:this.handleSearchTextChange,size:"large"},i.createElement(xe.default,null))),i.createElement(n.c,{sx:e=>({height:30,display:"flex",paddingTop:e.spacing(1),paddingRight:0,paddingBottom:0,paddingLeft:e.spacing(2)})},a&&""!==a?i.createElement(i.Fragment,null,i.createElement(u.c,{variant:"caption"},i.createElement(m.c,{id:"Applications.Details.Subscriptions.filter.msg",defaultMessage:"Filtered APIs for "}),a)):i.createElement(u.c,{variant:"caption"},i.createElement(m.c,{id:"Applications.Details.Subscriptions.filter.msg.all.apis",defaultMessage:"Displaying all APIs"})))),i.createElement(W.c,{"aria-label":"close",className:st.closeButton,onClick:this.handleOpenDialog,size:"large"},i.createElement(ye.c,null,"cancel"))),i.createElement(n.c,{padding:2},i.createElement(ze,{apisNotFound:r,subscriptions:s,applicationId:o,handleSubscribe:(e,t,a)=>this.handleSubscribe(e,t,a),searchText:a})))):i.createElement(rt,null)}}lt.propTypes={classes:l().shape({}).isRequired,intl:l().shape({}).isRequired};const ot=(0,g.cp)(lt);var ct=a(246160),pt=a(695312),dt=a(669872),ut=a(947560);class mt extends i.Component{constructor(e){var t,a,i,n;super(e),t=this,i=()=>{this.setState((e=>{let{isDeleteOpen:t}=e;return{isDeleteOpen:!t}}))},(a="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a="toggleDeleteConfirmation"))?n:String(n))in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i,this.state={notFound:!1,showOverview:!0,isDeleteOpen:!1},this.toggleOverview=this.toggleOverview.bind(this),this.handleAppDelete=this.handleAppDelete.bind(this),this.handleDeleteConfimation=this.handleDeleteConfimation.bind(this),this.toggleDeleteConfirmation=this.toggleDeleteConfirmation.bind(this)}handleAppDelete(){const{applicationId:e,intl:t,application:a}=this.props,i=pt.c.deleteApp(e);let n=t.formatMessage({defaultMessage:"In Application {name} deleted successfully!",id:"Applications.Details.InfoBar.application.deleted.successfully"},{name:a.name});i.then((e=>{200===e?(Te.c.info(n),this.toggleDeleteConfirmation()):201===e&&(Te.c.info(t.formatMessage({defaultMessage:"Delete request created for application {name}",id:"Applications.Listing.Listing.application.deleting.requested"},{name:a.name})),this.toggleDeleteConfirmation()),this.props.history.push("/applications")})).catch((e=>{console.log(e),n=t.formatMessage({defaultMessage:"Error while deleting application {name}",id:"Applications.Details.InfoBar.application.deleting.error"},{name:a.name}),Te.c.error(n)}))}handleDeleteConfimation(){const{isDeleteOpen:e}=this.state;this.setState({isDeleteOpen:!e})}toggleOverview(e){"boolean"==typeof e?this.setState({showOverview:e}):this.setState((e=>({showOverview:!e.showOverview})))}render(){const{applicationId:e,application:t}=this.props,a=this.props.application.owner,{notFound:s,isDeleteOpen:r}=this.state;if(s)return i.createElement(E.c,{message:i.createElement(m.c,{id:"Applications.Details.InfoBar.listing.resource.not.found",defaultMessage:"Resource Not Fount"})});if(!t)return i.createElement(f.c,null);const l=dt.c.getUser().name===a;return i.createElement(n.c,{sx:{width:"100%"}},i.createElement(n.c,{sx:e=>({height:e.custom.infoBar.height||70,background:e.custom.infoBar.background||"#ffffff",color:e.palette.getContrastText(e.custom.infoBar.background||"#ffffff"),borderBottom:"solid 1px "+e.palette.grey.A200,display:"flex",alignItems:"center",paddingLeft:e.spacing(2)})},i.createElement(D.cp,{item:!0,xs:10},i.createElement(n.c,{sx:e=>({marginLeft:e.spacing(1)})},i.createElement(o.cH,{to:"/applications/"+e+"/overview",className:e=>({color:e.palette.getContrastText(e.custom.infoBar.background)})},i.createElement(u.c,{id:"itest-info-bar-application-name",variant:"h4"},t.name))),i.createElement(n.c,{sx:e=>({marginLeft:e.spacing(1)})},i.createElement(u.c,{variant:"caption",gutterBottom:!0,align:"left",noWrap:!0},t.subscriptionCount," ",i.createElement(m.c,{id:"Applications.Details.InfoBar.subscriptions",defaultMessage:"Subscriptions"})))),l&&i.createElement(D.cp,{container:!0,justifyContent:"flex-end"},i.createElement(ct.c,{height:70}),i.createElement(D.cp,{item:!0,xs:1,m:3,sx:e=>({display:"inline-grid",cursor:"pointer",justifyContent:"center","& .material-icons, & span":{color:e.palette.getContrastText(e.custom.infoBar.background)}})},i.createElement(o.cH,{to:`/applications/${e}/edit/fromView`,sx:e=>({display:"inline-grid",cursor:"pointer","& .material-icons, & span":{color:e.palette.getContrastText(e.custom.infoBar.background)}})},i.createElement(S.c,{id:"edit-application",style:{padding:"4px",display:"flex",flexDirection:"column"},color:"grey",classes:{label:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},"aria-label":i.createElement(m.c,{id:"Applications.Details.InfoBar.edit",defaultMessage:"Edit"})},i.createElement(ye.c,null,"edit"),i.createElement(u.c,{variant:"caption",style:{marginTop:"2px"}},i.createElement(m.c,{id:"Applications.Details.InfoBar.edit.text",defaultMessage:"Edit"}))))),i.createElement(ct.c,{height:70}),i.createElement(D.cp,{item:!0,xs:1,m:1,sx:e=>({display:"inline-grid",cursor:"pointer","& .material-icons, & span":{color:e.palette.getContrastText(e.custom.infoBar.background)}})},i.createElement(S.c,{id:"delete-application",onClick:this.handleDeleteConfimation,style:{padding:"4px",display:"flex",flexDirection:"column"},disabled:dt.c.getUser().name!==a||"DELETE_PENDING"===this.props.application.status,color:"grey",classes:{label:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},"aria-label":i.createElement(m.c,{id:"Applications.Details.InfoBar.delete",defaultMessage:"Delete"})},i.createElement(ye.c,null,"delete"),i.createElement(u.c,{variant:"caption",style:{marginTop:"2px"}},i.createElement(m.c,{id:"Applications.Details.InfoBar.text",defaultMessage:"Delete"}))),i.createElement(ut.c,{handleAppDelete:this.handleAppDelete,isDeleteOpen:r,toggleDeleteConfirmation:this.toggleDeleteConfirmation})))))}}mt.propTypes={classes:l().shape({}).isRequired,theme:l().shape({}).isRequired,applicationId:l().string.isRequired};const gt=(0,g.cp)((0,c.Ak)(mt));var ht=a(366048);const bt="Overview",ft={root:`${bt}-root`,table:`${bt}-table`,leftCol:`${bt}-leftCol`,iconAligner:`${bt}-iconAligner`,iconTextWrapper:`${bt}-iconTextWrapper`,iconEven:`${bt}-iconEven`,iconOdd:`${bt}-iconOdd`,heading:`${bt}-heading`,emptyBox:`${bt}-emptyBox`,summaryRoot:`${bt}-summaryRoot`,actionPanel:`${bt}-actionPanel`,disabledTier:`${bt}-disabledTier`,Paper:`${bt}-Paper`,Paper2:`${bt}-Paper2`,list:`${bt}-list`,urlPaper:`${bt}-urlPaper`,input:`${bt}-input`,avatar:`${bt}-avatar`,iconStyle:`${bt}-iconStyle`},Et=(0,s.cp)("div")((e=>{let{theme:t}=e;return{[`& .${ft.root}`]:{padding:t.spacing(3,2),"& td, & th":{color:t.palette.getContrastText(t.custom.infoBar.background)},background:t.custom.infoBar.background},[`& .${ft.table}`]:{minWidth:"100%"},[`& .${ft.leftCol}`]:{width:200},[`& .${ft.iconAligner}`]:{display:"flex",justifyContent:"flex-start",alignItems:"center"},[`& .${ft.iconTextWrapper}`]:{display:"inline-block",paddingLeft:20},[`& .${ft.iconEven}`]:{color:t.custom.infoBar.iconOddColor,width:t.spacing(3)},[`& .${ft.iconOdd}`]:{color:t.custom.infoBar.iconOddColor,width:t.spacing(3)},[`& .${ft.heading}`]:{color:t.palette.getContrastText(t.palette.background.paper),paddingLeft:t.spacing(1)},[`& .${ft.emptyBox}`]:{background:"#ffffff55",color:t.palette.getContrastText(t.palette.background.paper),border:"solid 1px #fff",padding:t.spacing(2),width:"100%"},[`& .${ft.summaryRoot}`]:{display:"flex",alignItems:"center"},[`& .${ft.actionPanel}`]:{justifyContent:"flex-start"},[`& .${ft.disabledTier}`]:{color:"#999999",fontWeight:"400"},[`& .${ft.Paper}`]:{marginTop:t.spacing(2),padding:t.spacing(2)},[`& .${ft.Paper2}`]:{marginTop:t.spacing(2),padding:t.spacing(2),height:"80%"},[`& .${ft.list}`]:{width:"100%",maxWidth:800,backgroundColor:t.palette.background.paper,position:"relative",overflow:"auto",maxHeight:175},[`& .${ft.urlPaper}`]:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%",border:`solid 1px ${t.palette.grey[300]}`,"& .MuiInputBase-root:before,  .MuiInputBase-root:hover":{borderBottom:"none !important",color:t.palette.primary.main},"& .MuiSelect-select":{color:t.palette.primary.main,paddingLeft:t.spacing()},"& .MuiInputBase-input":{color:t.palette.primary.main},"& .material-icons":{fontSize:16,color:`${t.palette.grey[700]} !important`},borderRadius:10,marginRight:t.spacing()},[`& .${ft.input}`]:{marginLeft:t.spacing(1),flex:1},[`& .${ft.avatar}`]:{width:30,height:30,background:"transparent",border:`solid 1px ${t.palette.grey[300]}`},[`& .${ft.iconStyle}`]:{cursor:"pointer",margin:"-10px 0",padding:"0 0 0 5px","& .material-icons":{fontSize:18,color:"#9c9c9c"}}}})),yt=(0,g.cp)((function(e){const[t,a]=(0,i.useState)(null),[n,s]=(0,i.useState)(null),[r,l]=(0,i.useState)(!1),{match:{params:{applicationId:o}}}=e,[c,p]=(0,i.useState)(null),[d,g]=(0,i.useState)(!1),[b,y]=(0,i.useState)(null),[v,S]=(0,i.useState)(null),[x,k]=(0,i.useState)(null);return(0,i.useEffect)((()=>{const e=new h.c;e.getApplication(o).then((t=>{const i=t.obj;a(i),e.getTierByName(t.obj.throttlingPolicy,"application").then((e=>{s(e.obj.description),i.solaceDeployedEnvironments&&(p(i.solaceDeployedEnvironments[0]),y(i.solaceDeployedEnvironments[0].solaceURLs[0].protocol),S(i.solaceDeployedEnvironments[0].solaceURLs[0].endpointURL),"mqtt"===i.solaceDeployedEnvironments[0].solaceURLs[0].protocol?k(i.solaceDeployedEnvironments[0].SolaceTopicsObject.mqttSyntax):k(i.solaceDeployedEnvironments[0].SolaceTopicsObject.defaultSyntax))})).catch((e=>{g(!0),s("Tier is disabled."),console.log(e)}))})).catch((e=>{const{status:t}=e;l(404===t)}))}),[]),r?i.createElement(E.c,null):t?(c&&(console.log(c),console.log(x)),i.createElement(Et,null,i.createElement("div",{className:ft.root},i.createElement(ge.c,{className:ft.table},i.createElement(he.c,null,i.createElement(Ee.c,null,i.createElement(be.c,{component:"th",scope:"row",className:ft.leftCol},i.createElement("div",{className:ft.iconAligner},i.createElement(ye.c,{className:ft.iconEven},"description"),i.createElement("span",{className:ft.iconTextWrapper},i.createElement(u.c,{variant:"caption",gutterBottom:!0,align:"left"},i.createElement(m.c,{id:"Applications.Details.Overview.description",defaultMessage:"Description"}))))),i.createElement(be.c,null,t.description)),n&&i.createElement(Ee.c,null,i.createElement(be.c,{component:"th",scope:"row",className:ft.leftCol},i.createElement("div",{className:ft.iconAligner},i.createElement(ye.c,{className:ft.iconOdd},"settings_input_component"),i.createElement("span",{className:ft.iconTextWrapper},i.createElement(u.c,{variant:"caption",gutterBottom:!0,align:"left"},i.createElement(m.c,{id:"Applications.Details.InfoBar.business.plan",defaultMessage:"Business Plan"}))))),t&&i.createElement(be.c,null,t.throttlingPolicy," ",i.createElement("span",{className:d?ft.disabledTier:""},`(${n})`))),i.createElement(Ee.c,null,i.createElement(be.c,{component:"th",scope:"row",className:ft.leftCol},i.createElement("div",{className:ft.iconAligner},i.createElement(ye.c,{className:ft.iconOdd},"assignment_turned_in"),i.createElement("span",{className:ft.iconTextWrapper},i.createElement(u.c,{variant:"caption",gutterBottom:!0,align:"left"},i.createElement(m.c,{id:"Applications.Details.Overview.workflow.status",defaultMessage:"Workflow Status"}))))),i.createElement(be.c,null,t.status)),i.createElement(Ee.c,null,i.createElement(be.c,{component:"th",scope:"row",className:ft.leftCol},i.createElement("div",{className:ft.iconAligner},i.createElement(ye.c,{className:ft.iconEven},"account_box"),i.createElement("span",{className:ft.iconTextWrapper},i.createElement(u.c,{variant:"caption",gutterBottom:!0,align:"left"},i.createElement(m.c,{id:"Applications.Details.Overview.application.owner",defaultMessage:"Application Owner"}))))),i.createElement(be.c,null,t.owner)),t.attributes&&Object.keys(t.attributes).map(((e,a)=>{const n=t.attributes[e];return i.createElement(Ee.c,{key:e},i.createElement(be.c,{component:"th",scope:"row",className:ft.leftCol},i.createElement("div",{className:ft.iconAligner},i.createElement(ye.c,{className:ue()({[ft.iconEven]:a%2!=0},{[ft.iconOdd]:a%2==0})},"web_asset"),i.createElement("span",{className:ft.iconTextWrapper},i.createElement(u.c,{variant:"caption",gutterBottom:!0,align:"left"},e)))),i.createElement(be.c,null,n))})))),!0===t.containsSolaceApis&&c&&x&&i.createElement("div",{className:ft.root},i.createElement(u.c,{id:"itest-api-details-bushiness-plans-head",variant:"h5"},i.createElement(m.c,{id:"solace.application.available.topics.heading",defaultMessage:"Available Topics"})),i.createElement(u.c,{variant:"caption",gutterBottom:!0},i.createElement(m.c,{id:"solace.application.available.topics.subheading",defaultMessage:"Topics permitted to access from solace applications"})),i.createElement(me.c,{className:ft.Paper},i.createElement(D.cp,{container:!0,spacing:2},i.createElement(D.cp,{item:!0,xs:12},i.createElement(D.cp,{container:!0,spacing:2},i.createElement(D.cp,{item:!0},i.createElement(C.c,{select:!0,onChange:e=>{p(e.target.value),console.log(e.target.value)},value:c.environmentDisplayName,style:{maxWidth:"100%"},variant:"outlined",label:"Environment Name"},t.solaceDeployedEnvironments.map((e=>i.createElement(we.c,{key:e,value:e.environmentDisplayName},e.environmentDisplayName))))),i.createElement(D.cp,{item:!0},i.createElement(C.c,{select:!0,onChange:e=>{let t;y(e.target.value),c.solaceURLs.map((a=>(a.protocol===e.target.value&&(S(a.endpointURL),t=a.protocol),null))),k("mqtt"===t?c.SolaceTopicsObject.mqttSyntax:c.SolaceTopicsObject.defaultSyntax)},value:b,style:{maxWidth:"100%"},variant:"outlined",label:"Protocol"},c.solaceURLs.map((e=>i.createElement(we.c,{key:e.protocol,value:e.protocol},(0,ht.W8)(e.protocol)))))),i.createElement(D.cp,{item:!0},i.createElement(C.c,{style:{minWidth:"200%"},label:"Endpoint URL",value:v,variant:"outlined"})))),i.createElement(D.cp,{item:!0,xs:6},i.createElement(me.c,{className:ft.Paper2},i.createElement(u.c,{id:"itest-api-details-bushiness-plans-head",variant:"h6"},i.createElement(m.c,{id:"solace.application.topics.publish",defaultMessage:"Publish Topics"})),i.createElement(_.c,{className:ft.list},x.publishTopics.map((e=>i.createElement(F.cp,null,i.createElement(u.c,{gutterBottom:!0,align:"left"},e))))))),i.createElement(D.cp,{item:!0,xs:6},i.createElement(me.c,{className:ft.Paper2},i.createElement(u.c,{id:"itest-api-details-bushiness-plans-head",variant:"h6"},i.createElement(m.c,{id:"solace.application.topics.subscribe",defaultMessage:"Subscribe Topics"})),i.createElement(_.c,{className:ft.list},x.subscribeTopics.map((e=>i.createElement(F.cp,null,i.createElement(u.c,{gutterBottom:!0,align:"left"},e))))))))))))):i.createElement(f.c,null)}));var vt=a(70132),St=a(205420),xt=a(834508),kt=a(333568),Tt=a.n(kt),At=a(362264),Mt=a.n(At),wt=a(677336),Dt=a.n(wt),It=a(658880),Ct=a(766040);const Pt="WebHookDetails",Rt={buttonIcon:`${Pt}-buttonIcon`,paper:`${Pt}-paper`,grid:`${Pt}-grid`,userNotificationPaper:`${Pt}-userNotificationPaper`,titleSub:`${Pt}-titleSub`,root:`${Pt}-root`,titleWrapper:`${Pt}-titleWrapper`,listWrapper:`${Pt}-listWrapper`,subscriptionRow:`${Pt}-subscriptionRow`,callbackurl:`${Pt}-callbackurl`,subscriptionTimestamp:`${Pt}-subscriptionTimestamp`,SubscriptionHeader:`${Pt}-SubscriptionHeader`},$t=(0,s.cp)("div")((e=>{let{theme:t}=e;return{[`& .${Rt.buttonIcon}`]:{marginRight:10},[`& .${Rt.paper}`]:{margin:t.spacing(1),padding:t.spacing(1)},[`& .${Rt.grid}`]:{marginTop:t.spacing(4),marginBottom:t.spacing(4),paddingRight:t.spacing(2),justifyContent:"center"},[`& .${Rt.userNotificationPaper}`]:{padding:t.spacing(2)},[`& .${Rt.titleSub}`]:{marginLeft:t.spacing(2),paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},[`&.${Rt.root}`]:{padding:t.spacing(3),"& h5":{color:t.palette.getContrastText(t.palette.background.default)}},[`& .${Rt.titleWrapper}`]:{display:"flex",alignItems:"center",paddingBottom:t.spacing(2),"& h5":{marginRight:t.spacing(1)}},[`& .${Rt.listWrapper}`]:{width:"50%"},[`& .${Rt.subscriptionRow}`]:{paddingLeft:"16px"},[`& .${Rt.callbackurl}`]:{fontSize:"12px"},[`& .${Rt.subscriptionTimestamp}`]:{float:"right"},[`& .${Rt.SubscriptionHeader}`]:{paddingBottom:"0px",paddingLeft:"0px",paddingTop:"0px"}}}));function Lt(e){const{location:{pathname:t}}=e,a=(0,vt.c)(),n=(0,c.ot)(t,{path:"/applications/:applicationId/webhooks/:apiId",exact:!0,strict:!1}),{applicationId:s}=e.match.params,{apiId:r}=n.params,[l,o]=(0,i.useState)("");return(0,i.useEffect)((()=>{(new h.c).getWebhookubScriptions(r,s).then((e=>{const t=Tt().groupBy(e.obj.list,"topic");o(t)})).catch((e=>{console.log(e),Te.c.error(a.formatMessage({id:"Applications.Details.Subscriptions.error.occurred.webhook.subscription",defaultMessage:"Error while retrieving webhook subscriptions"}))}))}),[]),i.createElement($t,{className:Rt.root},i.createElement("div",{className:Rt.titleWrapper},i.createElement(u.c,{variant:"h5",className:Rt.keyTitle},i.createElement(m.c,{id:"Applications.Details.Subscriptions.api.webhooks",defaultMessage:"Web Hooks"}))),i.createElement(_.c,{className:Rt.listWrapper},Object.keys(l).length<1&&i.createElement(u.c,{color:"textPrimary",display:"block"},i.createElement(m.c,{id:"Applications.Details.Subscriptions.api.webhooks.subscriptions.unavailable",defaultMessage:"No Webhook subscriptions available at this time."})),Object.keys(l).map((e=>i.createElement(i.Fragment,null,i.createElement(F.cp,{className:Rt.SubscriptionHeader},i.createElement(G.c,{primary:e})),l[e].map((e=>i.createElement(D.cp,{container:!0,direction:"row"},i.createElement(D.cp,{item:!0,xs:1},(e=>{switch(e.deliveryStatus){case 1:return i.createElement(xt.c,{style:{color:"green",fontSize:"14px",paddingTop:"3px"}});case 2:return i.createElement(It.c,{style:{color:"red",fontSize:"14px",paddingTop:"3px"}});default:return i.createElement(Ct.c,{style:{color:"black",fontSize:"14px",paddingTop:"3px"}})}})(e)),i.createElement(D.cp,{item:!0,xs:8},i.createElement(u.c,{color:"textPrimary",display:"block",className:Rt.callbackurl},e.callBackUrl)),i.createElement(D.cp,{item:!0,xs:3},e.deliveryTime?i.createElement(u.c,{color:"textSecondary",display:"block",variant:"caption",className:Rt.subscriptionTimestamp},e.deliveryTime):i.createElement(u.c,{color:"textSecondary",display:"block",variant:"caption",className:Rt.subscriptionTimestamp},i.createElement(m.c,{id:"Applications.Details.Subscriptions.api.webhooks.delivery.time.unavailable",defaultMessage:"Delivery data unavailable"}))),i.createElement(St.c,{component:"li"})))),i.createElement(St.c,{component:"li"}))))))}function Nt(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Mt().extend(Dt());const Ot="index",Bt={LeftMenu:`${Ot}-LeftMenu`,leftMenuHorizontal:`${Ot}-leftMenuHorizontal`,leftMenuVerticalLeft:`${Ot}-leftMenuVerticalLeft`,leftMenuVerticalRight:`${Ot}-leftMenuVerticalRight`,leftLInkMain:`${Ot}-leftLInkMain`,leftLInkMainText:`${Ot}-leftLInkMainText`,detailsContent:`${Ot}-detailsContent`,content:`${Ot}-content`,contentLoader:`${Ot}-contentLoader`,contentLoaderRightMenu:`${Ot}-contentLoaderRightMenu`,titleWrapper:`${Ot}-titleWrapper`,contentWrapper:`${Ot}-contentWrapper`,keyTitle:`${Ot}-keyTitle`},qt=(0,s.cp)("div")((e=>{let{theme:t}=e;return{width:"100%",[`& .${Bt.LeftMenu}`]:{backgroundColor:t.custom.leftMenu.background,backgroundImage:`url(${b.app.context}${t.custom.leftMenu.backgroundImage})`,textAlign:"left",fontFamily:t.typography.fontFamily,position:"absolute",bottom:0,paddingLeft:"horizontal"===t.custom.leftMenu.position?t.spacing(3):0},[`& .${Bt.leftMenuHorizontal}`]:{top:t.custom.infoBar.height,width:"100%",overflowX:"auto",height:60,display:"flex",left:0},[`& .${Bt.leftMenuVerticalLeft}`]:{width:t.custom.leftMenu.width,top:0,left:0,overflowY:"auto",[t.breakpoints.down("md")]:{width:50}},[`& .${Bt.leftMenuVerticalRight}`]:{width:t.custom.leftMenu.width,top:0,right:0,overflowY:"auto"},[`& .${Bt.leftLInkMain}`]:{borderRight:"solid 1px "+t.custom.leftMenu.background,cursor:"pointer",background:t.custom.leftMenu.rootBackground,color:t.palette.getContrastText(t.custom.leftMenu.rootBackground),textDecoration:"none",alignItems:"center",justifyContent:"center",display:"flex",height:t.custom.infoBar.height},[`& .${Bt.leftLInkMainText}`]:{fontSize:18,color:t.palette.grey[500],textDecoration:"none",paddingLeft:t.spacing(2)},[`& .${Bt.detailsContent}`]:{display:"flex",flex:1},[`& .${Bt.content}`]:{display:"flex",flex:1,flexDirection:"column",marginLeft:"vertical-left"===t.custom.leftMenu.position?t.custom.leftMenu.width-4:0,marginRight:"vertical-right"===t.custom.leftMenu.position?t.custom.leftMenu.width:0,paddingBottom:t.spacing(3),overflowX:"hidden",[t.breakpoints.down("md")]:{marginLeft:0!=("vertical-left"===t.custom.leftMenu.position?t.custom.leftMenu.width-4:0)&&50,marginRight:0!==("vertical-right"===t.custom.leftMenu.position?t.custom.leftMenu.width:0)&&50}},[`& .${Bt.contentLoader}`]:{paddingTop:t.spacing(3)},[`& .${Bt.contentLoaderRightMenu}`]:{paddingRight:t.custom.leftMenu.width},[`& .${Bt.titleWrapper}`]:{paddingLeft:25,paddingTop:28,textTransform:"capitalize"},[`& .${Bt.contentWrapper}`]:{paddingLeft:25},[`& .${Bt.keyTitle}`]:{textTransform:"capitalize"}}}));class Kt extends i.Component{constructor(e){super(e),Nt(this,"getApplication",(()=>{const e=new h.c,t=this.props.match.params.application_uuid;e.getApplication(t).then((e=>(this.setState({application:e.obj}),Promise.all([e])))).catch((e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})}))})),Nt(this,"handleMenuSelect",(e=>{const{history:t,match:a}=this.props;t.push({pathname:"/applications/"+a.params.application_uuid+"/"+e})})),Nt(this,"toTitleCase",(e=>e.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())))),Nt(this,"renderManager",((e,t,a)=>i.createElement(me.c,null,"oauth"===a&&i.createElement(v.c,{keyType:t,selectedApp:{appId:e.applicationId,label:e.name,tokenType:e.tokenType,owner:e.owner,hashEnabled:e.hashEnabled}}),"apikey"===a&&i.createElement("div",{className:Bt.root},i.createElement("div",{className:Bt.titleWrapper},i.createElement(u.c,{variant:"h5",className:Bt.keyTitle},this.toTitleCase(t),i.createElement(m.c,{id:"Applications.Details.api.keys.title",defaultMessage:" API Key"}))),i.createElement("div",{className:Bt.contentWrapper},i.createElement(pe,{keyType:t,selectedApp:{appId:e.applicationId,label:e.name,tokenType:e.tokenType,owner:e.owner}})))))),this.state={application:null},this.getApplication=this.getApplication.bind(this)}componentDidMount(){this.getApplication()}render(){const{match:e,intl:t}=this.props,{notFound:a,application:s}=this.state,r="/applications/"+e.params.application_uuid,l=r+"/overview";return a?i.createElement(E.c,null):s?i.createElement(qt,null,i.createElement("nav",{role:"navigation","aria-label":t.formatMessage({id:"Applications.Details.index.secondary.navigation",defaultMessage:"Secondary Navigation"}),className:ue()(Bt.LeftMenu,{[Bt.leftMenuHorizontal]:!1},{[Bt.leftMenuVerticalLeft]:!0},{[Bt.leftMenuVerticalRight]:!1},"left-menu")},!1,i.createElement(y.c,{text:i.createElement(m.c,{id:"Applications.Details.menu.overview",defaultMessage:"Overview"}),iconText:"overview",route:"overview",to:r+"/overview",open:!0}),i.createElement(y.c,{text:i.createElement(m.c,{id:"Applications.Details.menu.prod.keys",defaultMessage:"Production Keys"}),iconText:"productionkeys",route:"productionkeys",to:r+"/productionkeys/oauth",open:!0,id:"production-keys"}),i.createElement(y.c,{text:i.createElement(m.c,{id:"Applications.Details.menu.oauth.tokens",defaultMessage:"OAuth2 Tokens"}),route:"productionkeys/oauth",to:r+"/productionkeys/oauth",submenu:!0,Icon:i.createElement(d.c,null),open:!0,id:"production-keys-oauth"}),i.createElement(y.c,{text:i.createElement(m.c,{id:"Applications.Details.menu.api.key",defaultMessage:"API Key"}),route:"productionkeys/apikey",to:r+"/productionkeys/apikey",submenu:!0,Icon:i.createElement(p.c,null),open:!0,id:"production-keys-apikey"}),i.createElement(y.c,{text:i.createElement(m.c,{id:"Applications.Details.menu.sandbox.keys",defaultMessage:"Sandbox Keys"}),iconText:"productionkeys",route:"sandboxkeys",to:r+"/sandboxkeys/oauth",open:!0,id:"sandbox-keys"}),i.createElement(y.c,{text:i.createElement(m.c,{id:"Applications.Details.menu.oauth.tokens",defaultMessage:"OAuth2 Tokens"}),route:"sandboxkeys/oauth",to:r+"/sandboxkeys/oauth",submenu:!0,Icon:i.createElement(d.c,null),open:!0,id:"sandbox-keys-oauth"}),i.createElement(y.c,{text:i.createElement(m.c,{id:"Applications.Details.menu.api.key",defaultMessage:"API Key"}),route:"sandboxkeys/apikey",to:r+"/sandboxkeys/apikey",submenu:!0,Icon:i.createElement(p.c,null),open:!0,id:"sandbox-keys-apikey"}),i.createElement(y.c,{text:i.createElement(m.c,{id:"Applications.Details.menu.subscriptions",defaultMessage:"Subscriptions"}),iconText:"subscriptions",route:"subscriptions",to:r+"/subscriptions",open:!0,id:"left-menu-subscriptions"})),i.createElement(n.c,{sx:e=>({display:"flex",flex:1,flexDirection:"column",marginLeft:"vertical-left"===e.custom.leftMenu.position?e.custom.leftMenu.width-158:0,paddingBottom:e.spacing(3),overflowX:"hidden",[e.breakpoints.down("md")]:{marginLeft:0!=("vertical-left"===e.custom.leftMenu.position?e.custom.leftMenu.width-4:0)&&50}})},i.createElement(gt,{application:s,applicationId:e.params.application_uuid,innerRef:e=>{this.infoBar=e}}),i.createElement("div",{className:ue()({[Bt.contentLoader]:!1},{[Bt.contentLoaderRightMenu]:!1})},i.createElement(c.Wk,null,i.createElement(c.YJ,{exact:!0,from:"/applications/:applicationId",to:l}),i.createElement(c.kX,{path:"/applications/:applicationId/overview",component:yt}),i.createElement(c.kX,{path:"/applications/:applicationId/webhooks/:apiId",component:Lt}),i.createElement(c.kX,{path:"/applications/:applicationId/productionkeys/oauth",component:()=>this.renderManager(s,"PRODUCTION","oauth")}),i.createElement(c.kX,{path:"/applications/:applicationId/productionkeys/apikey",component:()=>this.renderManager(s,"PRODUCTION","apikey")}),i.createElement(c.kX,{path:"/applications/:applicationId/sandboxkeys/oauth",component:()=>this.renderManager(s,"SANDBOX","oauth")}),i.createElement(c.kX,{path:"/applications/:applicationId/sandboxkeys/apikey",component:()=>this.renderManager(s,"SANDBOX","apikey")}),i.createElement(c.kX,{path:"/applications/:applicationId/subscriptions",render:()=>i.createElement(ot,{application:s,getApplication:this.getApplication})}),i.createElement(c.kX,{component:E.c}))))):i.createElement(f.c,null)}}Kt.propTypes={classes:l().shape({}).isRequired,theme:l().shape({}).isRequired,match:l().shape({params:l().shape({application_uuid:l().string.isRequired}).isRequired}).isRequired,history:l().shape({push:l().func.isRequired}).isRequired,intl:l().shape({formatMessage:l().func}).isRequired};const Wt=(0,g.cp)(Kt)},947560:(e,t,a)=>{a.d(t,{c:()=>h});var i=a(811504),n=a(758872),s=a(217729),r=a(212576),l=a(40928),o=a(153328),c=a(902706),p=a(329821),d=a(404292),u=a(203268),m=a.n(u);const g=e=>{const{handleAppDelete:t,isDeleteOpen:a,toggleDeleteConfirmation:u}=e;return i.createElement(n.c,{open:a,transition:p.c,role:"alertdialog"},i.createElement(s.c,null,i.createElement(d.c,{id:"Applications.Listing.DeleteConfirmation.dialog.title",defaultMessage:"Delete Application"})),i.createElement(r.c,null,i.createElement(l.c,null,i.createElement(d.c,{id:"Applications.Listing.DeleteConfirmation.dialog.text.description",defaultMessage:"The application will be removed"}))),i.createElement(o.c,null,i.createElement(c.c,{dense:!0,color:"grey",onClick:u},i.createElement(d.c,{id:"Applications.Listing.DeleteConfirmation.dialog.cancel",defaultMessage:"Cancel"})),i.createElement(c.c,{id:"itest-confirm-application-delete",size:"small",variant:"outlined",color:"primary",onClick:t},i.createElement(d.c,{id:"Applications.Listing.DeleteConfirmation.dialog,delete",defaultMessage:"Delete"}))))};g.propTypes={handleAppDelete:m().func.isRequired,isDeleteOpen:m().bool.isRequired,toggleDeleteConfirmation:m().func.isRequired};const h=g},366048:(e,t,a)=>{function i(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function n(e){return e.toUpperCase()}a.d(t,{W8:()=>n,k0:()=>i})}}]);
//# sourceMappingURL=ApplicationDetails.3c0e1a80300de86da9e6.bundle.js.map