"use strict";(this.webpackChunk_wso2apim_devportal=this.webpackChunk_wso2apim_devportal||[]).push([[6648],{266648:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var a=n(811504),o=n(906940),r=n(924004),i=n(203268),s=n.n(i),c=n(715656),l=n(162248),d=n(70132),p=n(404292),u=n(669872),m=n(226120),b=n(141776),f=n(915176),g=n(47568),h=n(273384),E=n(403972),A=n(244400),x=n(79592),y=n(861562),C=n(304632),S=n(67644),v=n(902706),w=n(622037),$=n(463548),I=n(542592),k=n(669848),P=n(957852),T=n(33964),R=n(290800);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){var a,o,r,i;a=e,o=t,r=n[t],(o="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o))?i:String(i))in a?Object.defineProperty(a,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[o]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t){let{field:n,value:a}=t;return O(O({},e),{},{[n]:a})}const z=function(e){const t=(0,d.c)(),n=e.topic.type.toLowerCase(),o="publish"===n||"subscribe"===n?n.substr(0,3):n,r=(0,I.c)(),i=r.custom.resourceChipColors[o],{generateGenericWHSubscriptionCurl:s,topic:u}=e,m={topic:u.name,secret:null,lease:5e4,mode:"subscribe",callback:null},[f,g]=(0,a.useState)(s(m)),[h,E]=(0,a.useState)(!1),[U,O]=(0,a.useReducer)(H,m),z=e=>{O({field:e.target.name,value:e.target.value})};return a.createElement(A.c,{sx:{marginBottom:"10px",border:`1px solid ${i}`}},a.createElement(y.c,{expandIcon:a.createElement(C.c,null),"aria-controls":"wh-subscription-content",id:"wh-subscription-header",sx:{backgroundColor:T.c.hexToRGBA(i,.1),maxHeight:"40px",borderColor:"#80bdff","&$expanded":{maxHeight:"40px"}}},a.createElement(c.cp,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0},a.createElement(c.cp,{item:!0,md:11},a.createElement(R.c,{invisible:"false",color:"error",variant:"dot"},a.createElement(v.c,{disableFocusRipple:!0,variant:"outlined",size:"small",sx:{backgroundColor:"#ffffff",borderColor:i,color:i,width:r.spacing(2)}},o.toUpperCase())),a.createElement(l.c,{display:"inline",style:{margin:"0px 30px"},gutterBottom:!0},u.name)))),a.createElement(x.c,null,a.createElement(c.cp,{container:!0,direction:"column",wrap:"nowrap"},a.createElement(c.cp,{item:!0,xs:6},a.createElement(k.c,{"aria-label":"mode",name:"mode",value:U.mode,row:!0,onChange:z},a.createElement(P.c,{value:"subscribe",control:a.createElement($.c,null),label:t.formatMessage({defaultMessage:"Subscribe",id:"Apis.Details.AsyncApiConsole.Webhooks.Subscribe"})}),a.createElement(P.c,{value:"unsubscribe",control:a.createElement($.c,null),label:t.formatMessage({defaultMessage:"Unsubscribe",id:"Apis.Details.AsyncApiConsole.Webhooks.Unsubscribe"})}))),a.createElement(c.cp,{item:!0,xs:6},a.createElement(w.c,{variant:"outlined",size:"small",sx:{width:"50%"},name:"callback",id:"standard-full-width",label:t.formatMessage({defaultMessage:"Callback URL",id:"Apis.Details.AsyncApiConsole.Webhooks.callback"}),error:h,required:!0,placeholder:"www.webhook.site",onChange:z,fullWidth:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:r.spacing(1)}},input:{borderRadius:4,backgroundColor:r.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:r.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12}}},InputLabelProps:{shrink:!0}})),"subscribe"===U.mode&&a.createElement(a.Fragment,null,a.createElement(c.cp,{item:!0,xs:6},a.createElement(w.c,{variant:"outlined",size:"small",sx:{width:"50%"},name:"secret",id:"standard-full-width",label:t.formatMessage({defaultMessage:"Secret",id:"Apis.Details.AsyncApiConsole.Webhooks.secret"}),placeholder:"secret",onChange:z,fullWidth:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:r.spacing(1)}},input:{borderRadius:4,backgroundColor:r.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:r.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12}}},InputLabelProps:{shrink:!0}})),a.createElement(c.cp,{item:!0,xs:6},a.createElement(w.c,{variant:"outlined",size:"small",sx:{width:"50%"},name:"lease",id:"standard-full-width",label:t.formatMessage({defaultMessage:"Lease Seconds",id:"Apis.Details.AsyncApiConsole.Webhooks.lease"}),onChange:z,defaultValue:5e4,fullWidth:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:r.spacing(1)}},input:{borderRadius:4,backgroundColor:r.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:r.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12}}},InputLabelProps:{shrink:!0}}))),a.createElement(c.cp,{item:!0,xs:12},a.createElement(w.c,{variant:"filled",label:t.formatMessage({defaultMessage:"cURL",id:"Apis.Details.AsyncApiConsole.Webhooks.curl"}),defaultValue:"",value:f,fullWidth:!0,multiline:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:r.spacing(1)}},input:{borderRadius:4,backgroundColor:r.custom.curlGenerator.backgroundColor,color:r.custom.curlGenerator.color,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:r.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12,fontFamily:"monospace",fontWeight:600}}},InputLabelProps:{shrink:!0}})))),a.createElement(S.c,{style:{paddingRight:"18px"}},a.createElement(v.c,{size:"small",onClick:()=>{!U.callback||U.callback.length<1?E(!0):(E(!1),g(s(U)))}},a.createElement(p.c,{id:"Apis.Details.AsyncApiConsole.Curl",defaultMessage:"Generate Curl"})),a.createElement(v.c,{size:"small",onClick:()=>{navigator.clipboard.writeText(f).then((()=>b.c.info(t.formatMessage({defaultMessage:"cURL copied",id:"Apis.Details.AsyncApiConsole.Webhooks.curl.copied"}))))}},a.createElement(p.c,{id:"Apis.Details.AsyncApiConsole.Copy",defaultMessage:"Copy Curl"}))))};function D(e){const t=e.topic.type.toLowerCase(),n="publish"===t||"subscribe"===t?t.substr(0,3):t,o=(0,I.c)(),r=o.custom.resourceChipColors[n],{generateGenericSubscriptionCommand:i,topic:s,expandable:d}=e,[u,m]=(0,a.useState)(i(s));return a.createElement(A.c,{sx:{marginBottom:"10px",border:`1px solid ${r}`},style:{pointerEvents:d?"auto":"none"}},a.createElement(y.c,{expandIcon:d&&a.createElement(C.c,null),"aria-controls":"generic-subscription-content",id:"generic-subscription-header",sx:{backgroundColor:T.c.hexToRGBA(r,.1),maxHeight:"40px","&$expanded":{maxHeight:"40px"}}},a.createElement(c.cp,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0},a.createElement(c.cp,{item:!0,md:11},a.createElement(R.c,{invisible:"false",color:"error",variant:"dot"},a.createElement(v.c,{disableFocusRipple:!0,variant:"outlined",size:"small",sx:{backgroundColor:"#ffffff",borderColor:r,color:r,width:o.spacing(2)}},n.toUpperCase())),a.createElement(l.c,{display:"inline",style:{margin:"0px 30px"},gutterBottom:!0},s.name)))),a.createElement(x.c,null,a.createElement(c.cp,{container:!0,direction:"column",wrap:"nowrap"},a.createElement(w.c,{variant:"filled",label:"cURL",defaultValue:"",value:u,multiline:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:o.spacing(1)}},input:{borderRadius:4,backgroundColor:o.custom.curlGenerator.backgroundColor,color:o.custom.curlGenerator.color,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:o.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12,fontFamily:"monospace",fontWeight:600}}},InputLabelProps:{shrink:!0}}))),a.createElement(S.c,{style:{paddingRight:"18px"}},a.createElement(v.c,{size:"small",onClick:()=>{m(i(s))}},a.createElement(p.c,{id:"Apis.Details.AsyncApiConsole.Curl",defaultMessage:"Generate Curl"})),a.createElement(v.c,{size:"small",onClick:()=>{navigator.clipboard.writeText(u).then((()=>b.c.info(a.createElement(p.c,{id:"Apis.Details.AsyncApiConsole.Copied",defaultMessage:"cURL copied"}))))}},a.createElement(p.c,{id:"Apis.Details.AsyncApiConsole.Copy",defaultMessage:"Copy Curl"}))))}var L=n(981392),M=n(340056),N=n(377384),B=n(910288),G=n(571480);const W="AsyncApiUI",j={endpointSelectorRoot:`${W}-endpointSelectorRoot`,selectList:`${W}-selectList`},X=(0,o.cp)("div")({[`& .${j.endpointSelectorRoot}`]:{paddingBottom:"20px"},[`& .${j.selectList}`]:{minWidth:"130px",maxWidth:"100%",border:"2px solid #41444e",fontFamily:"sans-serif",fontSize:"14px",fontWeight:700,padding:"2px 2px 2px 10px",borderRadius:"4px",color:"#3b4151"}});function K(e){const t=(0,d.c)(),{authorizationHeader:n,URLs:o,securitySchemeType:r,accessTokenProvider:i}=e,{api:s}=(0,a.useContext)(g.U),c=s.advertiseInfo&&s.advertiseInfo.advertised;let l;l=o&&(o.http||o.https),s.type===G.c.API_TYPES.WS&&(l=o&&(o.ws||o.wss));let p=!0;o&&(o.http||o.https)||(p=!1);const[u,m]=(0,a.useState)(""),[f,A]=(0,a.useState)(l);(0,a.useEffect)((()=>{const e=s.id;(new h.c).getAllTopics(e).then((e=>{m(e.body)})).catch((e=>{console.log(e),b.c.error(t.formatMessage({id:"Apis.Details.AsyncApiConsole.AsyncApiUI.topics.get.error",defaultMessage:"Error while retrieving topics for the API."}))}))}),[]);function x(){let e;return e="apikey"===n?i():"BASIC"===r?"Basic "+i():c?i():"Bearer "+i(),e}function y(e){const{topic:t,callback:a,secret:o,mode:r,lease:i}=e,l=x();if("subscribe"===r){let e=`curl -X POST '${f}' -H 'Content-Type: application/x-www-form-urlencoded' -d 'hub.topic=${encodeURIComponent(t)}' -d 'hub.callback=${encodeURIComponent(a)}' -d 'hub.mode=${r}'`;return o&&(e+=` -d 'hub.secret=${o}'`),i&&(e+=` -d 'hub.lease_seconds=${i}'`),s.advertiseInfo&&s.advertiseInfo.adveritsed&&""!==n?e+=` -H '${n}: ${l}'`:e+=` -H 'Authorization: ${l}'`,e}{let e=`curl -X POST '${f}' -H 'Content-Type: application/x-www-form-urlencoded' -d 'hub.topic=${encodeURIComponent(t)}' - 'hub.callback=${encodeURIComponent(a)}' -d 'hub.mode=${r}' -H 'Authorization: ${l}'`;return c&&""!==n&&(e=`curl -X POST '${f}' -H 'Content-Type: application/x-www-form-urlencoded' -d 'hub.topic=${encodeURIComponent(t)}' -d 'hub.callback=${encodeURIComponent(a)}' -d 'hub.mode=${r}' -H '${n}: ${l}'`),e}}function C(e){let t=e.name;return"/"===t.charAt(0)&&(t=t.substring(1)),t}function S(e){const t=x();if(e.name.includes("*")){let e=`wscat -c '${f}' -H '${"API-KEY"===r?"apikey":"Authorization"}: ${t}'`;return c&&""!==n&&(e=`wscat -c '${f}' -H '${n}: ${t}'`),e}{let a=`wscat -c '${f}/${C(e)}' -H '${"API-KEY"===r?"apikey":"Authorization"}: ${t}'`;return c&&""!==n&&(a=`wscat -c '${f}/${C(e)}' -H '${n}: ${t}'`),a}}function v(e){const t=x();if(e.name.includes("*")){let e=`curl -X GET '${f}' -H 'Authorization: ${t}'`;return c&&""!==n&&(e=`curl -X GET '${f}' -H '${n}: ${t}'`),e}{let a=`curl -X GET '${f}/${C(e)}' -H 'Authorization: ${t}'`;return c&&""!==n&&(a=`curl -X GET '${f}/${C(e)}' -H '${n}: ${t}'`),a}}function w(e){const t=x();if(e.name.includes("*")){let e=`curl -X GET '${f}' -H 'Authorization: ${t}'`;return""!==n&&(e=`curl -X GET '${f}' -H '${n}: ${t}'`),e}{let a=`curl -X GET '${f}/${C(e)}' -H 'Authorization: ${t}'`;return""!==n&&(a=`curl -X GET '${f}/${C(e)}' -H '${n}: ${t}'`),a}}return u?a.createElement(X,null,a.createElement(N.c,{variant:"standard",className:j.endpointSelectorRoot},a.createElement(L.c,null,"Servers"),a.createElement(B.c,{variant:"standard",className:j.selectList,id:"api-endpoint-select",value:f,displayEmpty:!0,onChange:e=>{A(e.target.value)}},Object.entries(o).map((e=>{let[t,n]=e;if(n)return a.createElement(M.c,{value:n,key:t},n)})))),s.type===G.c.API_TYPES.WEBSUB&&u.list.map(((e,t)=>a.createElement(z,{topic:e,generateGenericWHSubscriptionCurl:y,expandable:!0}))),s.type===G.c.API_TYPES.SSE&&u.list.map(((e,t)=>a.createElement(D,{generateGenericSubscriptionCommand:v,topic:e,expandable:!0}))),s.type===G.c.API_TYPES.WS&&u.list.map(((e,t)=>a.createElement(D,{generateGenericSubscriptionCommand:S,topic:e,expandable:!0}))),s.type===G.c.API_TYPES.ASYNC&&u.list.map(((e,t)=>a.createElement(D,{generateGenericSubscriptionCommand:w,topic:e,expandable:p})))):a.createElement(E.c,null)}const Y="AsyncApiConsole",_={paper:`${Y}-paper`,grid:`${Y}-grid`,userNotificationPaper:`${Y}-userNotificationPaper`,titleSub:`${Y}-titleSub`},F=(0,o.cp)("div")((e=>{let{theme:t}=e;return{[`& .${_.paper}`]:{margin:t.spacing(1),padding:t.spacing(1)},[`& .${_.grid}`]:{marginTop:t.spacing(4),marginBottom:t.spacing(4),paddingRight:t.spacing(2),justifyContent:"center"},[`& .${_.userNotificationPaper}`]:{padding:t.spacing(2)},[`& .${_.titleSub}`]:{marginLeft:t.spacing(2),paddingTop:t.spacing(2),paddingBottom:t.spacing(2)}}}));function q(){(0,d.c)();const{api:e}=(0,a.useContext)(g.U),[t,n]=(0,a.useState)("OAUTH"),[o,i]=(0,a.useState)(),[s,b]=(0,a.useState)(),[A,x]=(0,a.useState)(),[y,C]=(0,a.useState)(null),[S,v]=(0,a.useState)(null),[w,$]=(0,a.useState)(null),[I,k]=(0,a.useState)(""),[P,T]=(0,a.useState)(""),[R,U]=(0,a.useState)("PRODUCTION"),[O,H]=(0,a.useState)([]),[z,D]=(0,a.useState)(""),[L,M]=(0,a.useState)(""),N=e.endpointURLs,[B,G]=(0,a.useState)(N.length>0?N[0].URLs:[]),[W,j]=(0,a.useState)(!1),[X,Y]=(0,a.useState)("Authorization"),[q,V]=(0,a.useState)(""),[J,Q]=(0,a.useState)("PRODUCTION"),Z=u.c.getUser();function ee(){let e;O.get(R)&&({accessToken:e}=O.get(R).token),"PRODUCTION"===R?b(e):x(e)}if((0,a.useEffect)((()=>{const t=e.id;(new h.c).getAPIById(t).then((e=>{const t=e.obj;if(t.endpointURLs){const e=t.endpointURLs.map((e=>({name:e.environmentName,displayName:e.environmentDisplayName})));C(e)}else C([]);if(t.labels){const e=t.labels.map((e=>e.name));$(e)}else $([]);if(t.scopes){const e=t.scopes.map((e=>e.name));v(e)}else v([])})).catch((e=>{v([]),C([]),$([]);const{status:t}=e;404===t&&j(!0)}))}),[]),null===e||!S||!w||!y)return a.createElement(E.c,null);if(W)return a.createElement(p.c,{id:"Apis.Details.AsyncApiConsole.AsyncApiConsole.Api.Unavailable",defaultMessage:"API Not Found !"});let te=!1,ne=e.authorizationHeader?e.authorizationHeader:"Authorization";e&&e.securityScheme&&(te=e.securityScheme.includes("api_key"),te&&"API-KEY"===t&&(ne="apikey")),e.advertiseInfo&&e.advertiseInfo.advertised&&(ne=X);const ae=e=>{const t={http:null,https:null,ws:null,wss:null},[n]=e.split("://");return t[n]=e,t};return a.createElement(F,null,a.createElement(l.c,{variant:"h4",className:_.titleSub},a.createElement(p.c,{id:"Apis.Details.AsyncApiConsole.AsyncApiConsole.title",defaultMessage:"Try Out"})),a.createElement(r.c,{className:_.paper},a.createElement(c.cp,{container:!0,className:_.grid},!Z&&(!e.advertiseInfo||!e.advertiseInfo.advertised)&&a.createElement(c.cp,{item:!0,md:6},a.createElement(r.c,{className:_.userNotificationPaper},a.createElement(l.c,{variant:"h5",component:"h3"},a.createElement(m.c,null,"info")," ",a.createElement(p.c,{id:"notice",defaultMessage:"Notice"})),a.createElement(l.c,{component:"p"},a.createElement(p.c,{id:"api.console.require.access.token",defaultMessage:"You need an access token to try the API. Please log in and subscribe to the API to generate an access token. If you already have an access token, please provide it below."}))))),a.createElement(c.cp,{container:!0,className:_.grid},a.createElement(f.c,{setSecurityScheme:n,securitySchemeType:t,setSelectedEnvironment:i,selectedEnvironment:o,productionAccessToken:s,setProductionAccessToken:b,sandboxAccessToken:A,setSandboxAccessToken:x,environments:y,scopes:S,labels:w,setUsername:k,setPassword:T,username:I,password:P,setSelectedKeyType:function(t,n){!n||e.advertiseInfo&&e.advertiseInfo.advertised?U(t):U(t,ee)},selectedKeyType:R,setKeys:H,setURLs:G,setProductionApiKey:M,setSandboxApiKey:D,productionApiKey:L,sandboxApiKey:z,environmentObject:N,setAdvAuthHeader:Y,setAdvAuthHeaderValue:V,advAuthHeader:X,advAuthHeaderValue:q,setSelectedEndpoint:Q,selectedEndpoint:J,api:e,URLs:null}))),a.createElement(r.c,{className:_.paper},a.createElement(K,{authorizationHeader:ne,URLs:(()=>{if(e.advertiseInfo&&e.advertiseInfo.advertised){if("PRODUCTION"===J)return ae(e.advertiseInfo.apiExternalProductionEndpoint);if("SANDBOX"===J)return ae(e.advertiseInfo.apiExternalSandboxEndpoint)}return B})(),securitySchemeType:t,accessTokenProvider:function(){return e.advertiseInfo&&e.advertiseInfo.advertised?q:"BASIC"===t?btoa(I+":"+P):"API-KEY"===t?"PRODUCTION"===R?L:z:"PRODUCTION"===R?s:A}})))}q.propTypes={classes:s().shape({paper:s().string.isRequired,titleSub:s().string.isRequired,root:s().string.isRequired}).isRequired}}}]);
//# sourceMappingURL=6648.2f3374af7321d205725a.bundle.js.map