"use strict";(this.webpackChunk_wso2apim_devportal=this.webpackChunk_wso2apim_devportal||[]).push([[4856],{973720:(e,t,a)=>{a.d(t,{c:()=>ct});var n=a(811504),r=a(906940),s=a(203268),i=a.n(s),o=a(902706),l=a(991568),c=a(162248),p=a(404292),d=a(153032),u=a(773256),m=a(458130),y=a(197868),g=a(911452),h=a(997904),k=a(141776),E=a(758872),f=a(153328),b=a(212576),A=a(217729),T=a(343088),C=a(101640),v=a(70132),S=a(470184),K=a(377384),M=a(715656),w=a(622037);function x(e){const{consumerKey:t,consumerSecret:a,onChange:r,isUserOwner:s,key:i,provideOAuthKeySecret:l,importDisabled:d}=e,u=(0,v.c)(),[m,y]=n.useState(!1),g=()=>{y(!1)};function h(e){r&&r(e)}return n.createElement(n.Fragment,null,n.createElement(o.c,{variant:"outlined",color:"secondary",startIcon:n.createElement(T.c,null),onClick:()=>{y(!0)},disabled:d},n.createElement(p.c,{defaultMessage:"Provide Existing OAuth Keys",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth"})),n.createElement(E.c,{open:m,onClose:g,"aria-labelledby":"form-dialog-title"},n.createElement(A.c,{id:"form-dialog-title"},n.createElement(p.c,{defaultMessage:"Provide Existing OAuth Keys",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth"})),n.createElement(b.c,null,n.createElement(M.cp,{container:!0,spacing:3,direction:"column"},n.createElement(M.cp,{item:!0,xs:12},n.createElement(w.c,{id:"provided-consumer-key",name:"providedConsumerKey",label:u.formatMessage({defaultMessage:"Consumer Key",id:"Shared.AppsAndKeys.ImportExternalApp.consumer.key"}),value:t,onChange:e=>h(e),margin:"normal",fullWidth:!0,disabled:!s,variant:"outlined"}),n.createElement(K.c,{variant:"standard"},n.createElement(S.c,{id:"consumer-key-helper-text"},n.createElement(p.c,{id:"Shared.AppsAndKeys.ImportExternalApp.consumer.key.title",defaultMessage:"Consumer Key of the OAuth application"})))),n.createElement(M.cp,{item:!0,xs:12},n.createElement(w.c,{id:"provided-consumer-secret",name:"providedConsumerSecret",label:u.formatMessage({defaultMessage:"Consumer Secret",id:"Shared.AppsAndKeys.ImportExternalApp.consumer.secret"}),value:a,onChange:e=>h(e),margin:"normal",fullWidth:!0,disabled:!s,variant:"outlined"}),n.createElement(K.c,{variant:"standard"},n.createElement(S.c,{id:"consumer-secret-helper-text"},n.createElement(p.c,{id:"Shared.AppsAndKeys.ImportExternalApp.consumer.secret.of.application",defaultMessage:"Consumer Secret of the OAuth application"})))))),n.createElement(f.c,null,n.createElement(o.c,{onClick:g,color:"primary"},n.createElement(p.c,{defaultMessage:"Cancel",id:"Shared.AppsAndKeys.ImportExternalApp.cancel"})),n.createElement(C.qG,{resourcePath:C.Ce.APPLICATION_GENERATE_KEYS,resourceMethod:C.Ep.POST},s?n.createElement(o.c,{variant:"contained",color:"primary",onClick:()=>l()},i?n.createElement(p.c,{defaultMessage:"Update",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth.button.update"}):n.createElement(p.c,{defaultMessage:"Provide",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth.button.provide"})):n.createElement(n.Fragment,null,n.createElement(o.c,{variant:"contained",color:"primary",onClick:()=>l(),disabled:!s},i?n.createElement(p.c,{defaultMessage:"Update",id:"Shared.AppsAndKeys.ImportExternalApp.provide. oauth.button.update"}):n.createElement(p.c,{defaultMessage:"Provide",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth.button.provide"})),n.createElement(c.c,{variant:"caption"},n.createElement(p.c,{defaultMessage:"Only owner can provide keys",id:"Shared.AppsAndKeys.ImportExternalApp.key.provide.user.owner"})))))))}x.propTypes={intl:i().shape({}).isRequired,onChange:i().func.isRequired,consumerKey:i().string,consumerSecret:i().string,isUserOwner:i().string,key:i().shape({}).isRequired,provideOAuthKeySecret:i().func.isRequired,importDisabled:i().bool},x.defaultProps={consumerKey:"",consumerSecret:"",isUserOwner:!1,importDisabled:!1};const P=x;var O=a(695312),I=a(669872),R=a(971192),$=a(638456),N=a(273384),D=a(232152),_=a(969072),q=a(96144),G=a(226120),W=a(927732),U=a(40928),L=a(40172);const V="ViewCurl",j={code:`${V}-code`,command:`${V}-command`,encodeVisible:`${V}-encodeVisible`,contentWrapper:`${V}-contentWrapper`},F=(0,r.cp)("div")((e=>{let{theme:t}=e;return{[`& .${j.code}`]:{padding:t.spacing(1),marginBottom:t.spacing(2),background:t.palette.grey[200],color:"#da2316",flex:1},[`& .${j.command}`]:{color:"#2b62b0"},[`& .${j.encodeVisible}`]:{cursor:"pointer",textDecoration:"underline"},[`& .${j.contentWrapper}`]:{display:"flex"}}}));function B(e){const{keys:{consumerKey:t,consumerSecret:a},intl:r,keyManagerConfig:s,jwtToken:i,defaultTokenEndpoint:o}=e,l=window.btoa(t+":"+a),[d,u]=(0,n.useState)(!1),[m,y]=(0,n.useState)(!1),g=()=>{y(!0),setTimeout((function(){y(!1)}),4e3)},h=()=>{u(!d)};let{tokenEndpoint:k}=s;return null===s.alias?n.createElement(F,null,n.createElement(c.c,null,n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewCurl.help",defaultMessage:"The following cURL command shows how to generate an access token using the Password Grant type."})),n.createElement("div",{className:j.contentWrapper},n.createElement("div",{className:j.code},n.createElement("div",null,n.createElement("span",{className:j.command},"curl -k -X POST ")," ",k,n.createElement("span",{className:j.command}," -d ")," ",'"grant_type=password&username=Username&password=Password"'),n.createElement("div",null,n.createElement("span",{className:j.command}," -H "),'"Authorization: Basic',n.createElement("a",{onClick:h,className:j.encodeVisible},d?" "+l:" Base64(consumer-key:consumer-secret)"),'"')),n.createElement("div",null,n.createElement(_.c,{title:m?r.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewCurl.copied"}):r.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewCurl.copy.to.clipboard"}),placement:"right"},n.createElement(q.c,{id:"copy-to-clipbord-icon","aria-label":"Copy to clipboard",size:"large",onClick:()=>{navigator.clipboard.writeText(`curl -k -X POST ${k} -d "grant_type=password&username=Username&password=Password" -H "Authorization: Basic ${l}"`).then(g())}},n.createElement(L.c,{color:"secondary"}))))),n.createElement(c.c,null,n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewCurl.help.in.a.similar",defaultMessage:"In a similar manner, you can generate an access token using the\n                    Client Credentials grant type with the following cURL command."})),n.createElement("div",{className:j.contentWrapper},n.createElement("div",{className:j.code},n.createElement("div",null,n.createElement("span",{className:j.command},"curl -k -X POST ")," ",k,n.createElement("span",{className:j.command}," -d ")," ",'"grant_type=client_credentials"'),n.createElement("div",null,n.createElement("span",{className:j.command}," -H "),'"Authorization: Basic',n.createElement("a",{onClick:h,className:j.encodeVisible},d?" "+l:" Base64(consumer-key:consumer-secret)"),'"')),n.createElement("div",null,n.createElement(_.c,{title:m?r.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewCurl.copied"}):r.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewCurl.copy.to.clipboard"}),placement:"right"},n.createElement(q.c,{id:"copy-to-clipbord-icon","aria-label":"Copy to clipboard",size:"large",onClick:()=>{navigator.clipboard.writeText(`curl -k -X POST ${k} -d "grant_type=client_credentials" -H "Authorization: Basic ${l}"`).then(g())}},n.createElement(L.c,{color:"secondary"})))))):!1===t?n.createElement(F,null,n.createElement(c.c,null,n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewCurl.error",defaultMessage:"Please generate the Consumer Key and Secret for Residence Key Manager with selecting the urn:ietf:params:oauth:grant-type:token-exchange grant type in order to use the token Exchange Approach. "}))):n.createElement(F,null,n.createElement(c.c,null,n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewCurl.TokenExchange.help",defaultMessage:"The following cURL command shows how to generate an access token using the token exchange grant type"})),n.createElement("div",{className:j.contentWrapper},n.createElement("div",{className:j.code},n.createElement("div",null,n.createElement("span",{className:j.command},"curl -k -X POST ")," ",o,n.createElement("span",{className:j.command}," -d ")," ",'"grant_type=urn:ietf:params:oauth:grant-type:token-exchange"',n.createElement("span",{className:j.command}," -d ")," ",'"subject_token_type=urn:ietf:params:oauth:token-type:jwt"',n.createElement("span",{className:j.command}," -d ")," ",'"requested_token_type=urn:ietf:params:oauth:token-type:jwt" ',n.createElement("span",{className:j.command}," -d ")," ",'"subject_token="',n.createElement("a",{onClick:h,className:j.encodeVisible},d?" "+i:"jwtToken")),n.createElement("div",null,n.createElement("span",{className:j.command}," -H "),'"Authorization: Basic',n.createElement("a",{onClick:h,className:j.encodeVisible},d?" "+l:" Base64(consumer-key:consumer-secret)"),'"')),n.createElement("div",null,n.createElement(_.c,{title:m?r.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewCurl.copied"}):r.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewCurl.copy.to.clipboard"}),placement:"right"},n.createElement(q.c,{id:"copy-to-clipbord-icon","aria-label":"Copy to clipboard",size:"large",onClick:()=>{navigator.clipboard.writeText(`curl -k -X POST ${o} -d "grant_type=urn:ietf:params:oauth:grant-type:token-exchange" -d "subject_token_type=urn:ietf:params:oauth:token-type:jwt" -d "requested_token_type=urn:ietf:params:oauth:token-type:jwt" -d "subject_token=${i}"  -H "Authorization: Basic ${l}"`).then(g())}},n.createElement(L.c,{color:"secondary"}))))))}B.propTypes={classes:i().shape({}).isRequired,keys:i().shape({}).isRequired,apis:i().shape({}).isRequired,jwtToken:i().string,defaultTokenEndpoint:i().string};const H=(0,d.cp)(B);var z=a(314320),J=a(851456),X=a(157344),Y=a(739376),Q=a(585824);function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){var n,r,s,i;n=e,r=t,s=a[t],(r="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r))?i:String(i))in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const te="TokenExchangeKeyConfiguration",ae={FormControl:`${te}-FormControl`,FormControlOdd:`${te}-FormControlOdd`,button:`${te}-button`,quotaHelp:`${te}-quotaHelp`,checkboxWrapper:`${te}-checkboxWrapper`,generateWrapper:`${te}-generateWrapper`,checkboxWrapperColumn:`${te}-checkboxWrapperColumn`,group:`${te}-group`,removeHelperPadding:`${te}-removeHelperPadding`,iconStyle:`${te}-iconStyle`,iconButton:`${te}-iconButton`,titleColumn:`${te}-titleColumn`,keyInfoTable:`${te}-keyInfoTable`,leftCol:`${te}-leftCol`,stepLabel:`${te}-stepLabel`,stepContent:`${te}-stepContent`,keyLabel:`${te}-keyLabel`,idpGrid:`${te}-idpGrid`,helperTextError:`${te}-helperTextError`,input:`${te}-input`,avatar:`${te}-avatar`,copyIconStyle:`${te}-copyIconStyle`,hr:`${te}-hr`,divCenter:`${te}-divCenter`,tableHeader:`${te}-tableHeader`,helperText:`${te}-helperText`,dialogWrapper:`${te}-dialogWrapper`,margin:`${te}-margin`,tokenSection:`${te}-tokenSection`,inputWrapper:`${te}-inputWrapper`,bottomInfo:`${te}-bottomInfo`},ne=(0,r.cp)("div")((e=>{let{theme:t}=e;return{[`& .${ae.FormControl}`]:{paddingTop:0,paddingBottom:t.spacing(2),paddingLeft:0,width:"100%"},[`& .${ae.FormControlOdd}`]:{padding:t.spacing(2),width:"100%"},[`& .${ae.button}`]:{marginLeft:t.spacing(1)},[`& .${ae.quotaHelp}`]:{position:"relative"},[`& .${ae.checkboxWrapper}`]:{display:"flex"},[`& .${ae.generateWrapper}`]:{padding:"10px 0px",marginLeft:t.spacing(1.25)},[`& .${ae.checkboxWrapperColumn}`]:{display:"flex",flexWrap:"wrap",flexDirection:"row",whiteSpace:"nowrap"},[`& .${ae.group}`]:{flexDirection:"row"},[`& .${ae.removeHelperPadding}`]:{"& p":{margin:"8px 0px"}},[`& .${ae.iconStyle}`]:{cursor:"pointer",padding:"0 0 0 10px"},[`& .${ae.iconButton}`]:{padding:"0 0 0 10px","& .material-icons":{fontSize:16}},[`& .${ae.titleColumn}`]:{width:150,fontWeight:500},[`& .${ae.keyInfoTable}`]:{marginBottom:20,borderCollapse:"collapse","& td":{paddingBottom:5,borderBottom:"solid 1px #cccc"}},[`& .${ae.leftCol}`]:{width:180},[`& .${ae.stepLabel}`]:{color:"#5567d5",alignSelf:"center"},[`& .${ae.stepContent}`]:{color:"#1D2028",fontSize:"0.75rem"},[`& .${ae.keyLabel}`]:{color:"#222228",fontSize:"0.75rem",marginLeft:t.spacing(1)},[`& .${ae.idpGrid}`]:{textAlign:"left",margin:t.spacing(0),alignSelf:"center"},[`& .${ae.helperTextError}`]:{display:"flex",alignItems:"center",fontSize:10.5},[`& .${ae.input}`]:{marginLeft:t.spacing(1),flex:1},[`& .${ae.avatar}`]:{width:30,height:30,background:"transparent",border:`solid 1px ${t.palette.grey[300]}`},[`& .${ae.copyIconStyle}`]:{cursor:"pointer",margin:"-10px 0",padding:"0 0 0 5px","& .material-icons":{fontSize:18,color:"#9c9c9c"}},[`& .${ae.hr}`]:{border:"solid 1px #efefef"},[`& .${ae.divCenter}`]:{alignSelf:"center",width:180},[`& .${ae.tableHeader}`]:{borderBottom:"none"},[`& .${ae.helperText}`]:{marginLeft:0,color:"#8D91A3",lineHeight:1.6,maxWidth:410},[`& .${ae.dialogWrapper}`]:{"& label,& h5, & label, & td, & li, & input, & h2, & p.MuiTypography-root,& p.MuiFormHelperText-root":{color:t.palette.getContrastText(t.palette.background.paper)}},[`& .${ae.margin}`]:{marginRight:t.spacing(2)},[`& .${ae.tokenSection}`]:{marginTop:0,marginBottom:t.spacing(.5)},[`& .${ae.inputWrapper}`]:{display:"flex",flexDirection:"row",alignItems:"center","& span, & h5, & label, & td, & li, & div, & input":{color:t.palette.getContrastText(t.palette.background.paper)}},[`& .${ae.bottomInfo}`]:{fontSize:12,marginBottom:"10px"}}}));function re(e,t){const{field:a,value:n}=t;switch(a){case"tokenResponse":case"token":case"tokenScopes":case"tokenValidityTime":case"accessTokenRequest":case"subscriptionScopes":case"externalIDPToken":case"externalIDPTokenError":case"isKeyJWT":case"initialExecution":return ee(ee({},e),{},{[a]:n});case"all":return n;default:return t}}const se=e=>{const[t,a]=(0,n.useState)(!1),[r,s]=(0,n.useState)(!1),[i,d]=(0,n.useState)(!1),[y,g]=(0,n.useState)(!1),[h,T]=(0,n.useState)(!1),[C,S]=(0,n.useState)(!1),[K,x]=(0,n.useState)(!1),[P,I]=(0,n.useState)(!1),[R,$]=(0,n.useState)(!0),[N]=(0,n.useState)({tokenResponse:"",token:"",tokenScope:"",tokenValidityTime:"",accessTokenRequest:{timeout:3600,scopesSelected:[],keyType:""},subscriptionScopes:[],externalIDPToken:"",externalIDPTokenError:"",isKeyJWT:!1,initialExecution:!0}),[L,V]=(0,n.useReducer)(re,N),{tokenResponse:j,accessTokenRequest:F,externalIDPToken:B,externalIDPTokenError:Z,subscriptionScopes:te,tokenValidityTime:se,token:ie,isKeyJWT:oe,initialExecution:le}=L,ce=(0,v.c)(),{keyManagerConfig:pe,defaultTokenEndpoint:de,selectedApp:ue,selectedTab:me,selectedApp:{hashEnabled:ye},keys:ge,fullScreen:he,keyType:ke}=e;let Ee;ue&&(Ee=ue.appId||ue.value);const fe=O.c.get(Ee);let be;le&&fe.then((e=>{e.getKeys().then((()=>{const t=ee(ee({},F),{},{keyType:ke}),a=e.subscriptionScopes.map((e=>e.key));V({field:"accessTokenRequest",value:t}),V({field:"subscriptionScopes",value:a}),V({field:"initialExecution",value:!1})}))})).catch((e=>{const{status:t}=e;404===t&&x(!0),V({field:"initialExecution",value:!1})})),be=h?"Get CURL to Generate Access Token":C?"Generate Consumer Secret":"Generate Access Token";const Ae=e=>""===e?n.createElement(p.c,{id:"application.productionKeys.oAuth.externalIdp.tokenGeneration.token.empty.helperText",defaultMessage:"{selectedIdPType} token cannot be empty",values:{selectedIdPType:pe.type}}):"";if(K)return n.createElement(W.c,null);if(!ge)return n.createElement(u.c,null);const Te=()=>{d(!1),T(!1),S(!1),V({field:"isKeyJWT",value:!1})},Ce=ge.size>0&&ge.get("Resident Key Manager")&&ge.get("Resident Key Manager").keyType===ke&&ge.get("Resident Key Manager")||!1,ve=Ce&&Ce.consumerKey,Se=Ce&&Ce.consumerSecret;return n.createElement(ne,null,n.createElement(l.c,{display:"flex",alignItems:"center"},n.createElement(D.c,{className:ae.table},n.createElement(X.c,null,n.createElement(Y.c,null,n.createElement(Q.c,{component:"th",scope:"row",className:[ae.leftCol,ae.tableHeader]},n.createElement(p.c,{id:"application.productionKeys.oAuth.externalIdp.tokenGeneration.step1",defaultMessage:"Step 1:"})),n.createElement(Q.c,{className:ae.tableHeader},n.createElement(p.c,{id:"application.productionKeys.oAuth.externalIdp.tokenGeneration.step1.description",defaultMessage:"Obtain an access token from {selectedIdpType}. ",values:{selectedIdpType:pe.type}}),n.createElement(p.c,{id:"application.productionKeys.oAuth.externalIdp.tokenGeneration.audience",defaultMessage:'Use the audience value "{allowedAudience}", ',values:{allowedAudience:n.createElement("b",null,pe.alias)}}))),n.createElement(Y.c,null,n.createElement(Q.c,{className:ae.leftCol},n.createElement(p.c,{id:"application.productionKeys.oAuth.tokenEndpoint",defaultMessage:"Token Endpoint"})),n.createElement(Q.c,null,n.createElement(p.c,{id:"application.productionKeys.oAuth.tokenEndpoint.value",defaultMessage:"{tokenEndpoint}",values:{tokenEndpoint:pe.tokenEndpoint}}),n.createElement(_.c,{title:t?ce.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.TokenExchangeKeyConfiguration.copied"}):ce.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.TokenExchangeKeyConfiguration.copy.to.clipboard"}),placement:"right",className:ae.iconStyle},n.createElement(q.c,{"aria-label":"Copy to clipboard",classes:{root:ae.iconButton},size:"large",onClick:()=>{navigator.clipboard.writeText(pe.tokenEndpoint).then((a(!0),void setTimeout((function(){a(!1)}),2e3)))}},n.createElement(G.c,{color:"secondary"},"file_copy"))))),n.createElement(Y.c,null,n.createElement(Q.c,{component:"th",scope:"row",className:[ae.leftCol,ae.tableHeader]},n.createElement(p.c,{id:"application.productionKeys.oAuth.tokenGeneration.step2",defaultMessage:"Step 2:"})),n.createElement(Q.c,{className:ae.tableHeader},n.createElement(p.c,{id:"application.productionKeys.oAuth.tokenGeneration.step2.description",defaultMessage:"Obtain test token"}))),n.createElement(Y.c,null,n.createElement(Q.c,{component:"th",scope:"row",className:ae.leftCol},n.createElement(p.c,{id:"application.productionKeys.oAuth.externalIdp.tokenGeneration.token",defaultMessage:"{selectedIdpType} Token",values:{selectedIdpType:pe.type}}),n.createElement("span",{className:ae.error}," *")),n.createElement(Q.c,null,n.createElement(l.c,{maxWidth:600},n.createElement(w.c,{id:"external-idp-token",onChange:e=>{const t=e.target.value;V({field:"externalIDPTokenError",value:Ae(t)}),V({field:"externalIDPToken",value:t})},size:"small",fullWidth:!0,rows:1,value:B,variant:"outlined",error:""!==Z,FormHelperTextProps:{className:ae.helperText},helperText:""===Z?Z:n.createElement("div",{className:ae.helperTextError},n.createElement("p",null," ",Z," ")),className:ae.textField,"data-testid":"external-idp-token"}))))))),n.createElement(l.c,null,n.createElement("div",{className:ae.inputWrapper},n.createElement(M.cp,{container:!0,spacing:3},n.createElement(M.cp,{item:!0,xs:12},n.createElement(E.c,{fullScreen:he,open:i,onClose:Te,"aria-labelledby":"responsive-dialog-title",className:ae.dialogWrapper},n.createElement(A.c,{id:"responsive-dialog-title"},be),n.createElement(b.c,null,!h&&!oe&&!C&&n.createElement(U.c,null,!y&&R&&n.createElement(J.c,{updateAccessTokenRequest:e=>{V({field:"accessTokenRequest",value:e})},accessTokenRequest:F,subscriptionScopes:te}),!y&&!R&&n.createElement(n.Fragment,null,n.createElement(c.c,null,n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewCurl.error",defaultMessage:"Please generate the Consumer Key and Secret for Residence Key Manager with selecting the urn:ietf:params:oauth:grant-type:token-exchange grant type in order to use the token Exchange Approach. "}))),y&&n.createElement(z.c,{token:ee(ee({},j),{},{isOauth:!0}),isResidenceTokenAvailable:R,isTokenExchange:!0})),h&&n.createElement(U.c,null,n.createElement(H,{keys:{consumerKey:ve,consumerSecret:Se},keyType:ke,jwtToken:B,keyManagerConfig:pe,defaultTokenEndpoint:de}))),n.createElement(f.c,null,P&&n.createElement(m.c,{size:24}),!y&&!h&&!C&&R&&n.createElement(o.c,{onClick:()=>{I(!0),fe.then((e=>e.generateToken(me,F.keyType,F.timeout,F.scopesSelected,!0,B))).then((e=>{console.log("token generated successfully "+e),g(!0),V({field:"tokenResponse",value:e}),V({field:"token",value:e.accessToken}),V({field:"tokenScopes",value:e.tokenScopes}),V({field:"tokenValidityTime",value:e.validityTime}),I(!1)})).catch((e=>{const{status:t}=e;404===t?x(!0):400===t&&k.c.error(e.description||ce.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.bad.request.error",defaultMessage:"Error occurred when generating Access Token"})),I(!1);const{response:a}=e;a&&a.body&&k.c.error(a.body.message)}))},color:"primary",disabled:P},n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.consumer.generate.btn",defaultMessage:"Generate"})),n.createElement(o.c,{onClick:Te,color:"primary",autoFocus:!0},n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.consumer.close.btn",defaultMessage:"Close"})))),n.createElement("div",{className:ae.generateWrapper},n.createElement(M.cp,{className:ae.bottomInfo},n.createElement(p.c,{id:"application.productionKeys.oAuth.externalIdp.tokenGeneration.token.description",defaultMessage:"In Exchange token flow, A JWT token has to be generated from the {selectedIdpType}\n                                             idp and then exchange for a token with the Resident Key Manager which can used to invoke APIs",values:{selectedIdpType:pe.type}})),n.createElement(o.c,{variant:"outlined",size:"small",color:"primary",className:ae.margin,onClick:()=>{d(!0)},disabled:Z||""===B},n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.generate.access.token",defaultMessage:"Generate Access Token"})),n.createElement(o.c,{id:"curl-to-generate-access-token-btn",variant:"outlined",size:"small",color:"primary",className:ae.margin,onClick:()=>{d(!0),T(!0)},disabled:Z||""===B},n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.curl.to.generate",defaultMessage:"CURL to Generate Access Token"}))))))))};se.defaultProps={notFound:!1,validating:!1,fullScreen:!1,summary:!1},se.propTypes={classes:i().instanceOf(Object).isRequired,keyRequest:i().shape({callbackUrl:i().string,selectedGrantTypes:i().array}).isRequired,isUserOwner:i().bool.isRequired,isKeysAvailable:i().bool.isRequired,keyManagerConfig:i().any.isRequired,notFound:i().bool,setGenerateEnabled:i().func,updateKeyRequest:i().func.isRequired,validating:i().bool,defaultTokenEndpoint:i().string,selectedApp:i().shape({tokenType:i().string.isRequired,appId:i().string,value:i().string,owner:i().string,hashEnabled:i().bool})};const ie=se;var oe=a(669848),le=a(957852),ce=a(463548),pe=a(859907),de=a.n(pe),ue=a(738320),me=a(219811),ye=a.n(me),ge=a(715008),he=a(981392),ke=a(139760),Ee=a(385388),fe=a(340056),be=a(793068),Ae=a(910288),Te=a(954092),Ce=a(874932);const ve="AppConfiguration",Se={FormControl:`${ve}-FormControl`,FormControlOdd:`${ve}-FormControlOdd`,button:`${ve}-button`,quotaHelp:`${ve}-quotaHelp`,checkboxWrapper:`${ve}-checkboxWrapper`,checkboxWrapperColumn:`${ve}-checkboxWrapperColumn`,group:`${ve}-group`,removeHelperPadding:`${ve}-removeHelperPadding`},Ke=(0,r.cp)("div")((e=>{let{theme:t}=e;return{display:"contents",[`& .${Se.FormControl}`]:{paddingTop:t.spacing(2),paddingBottom:t.spacing(2),paddingLeft:0,width:"100%"},[`& .${Se.FormControlOdd}`]:{padding:t.spacing(2),width:"100%"},[`& .${Se.button}`]:{marginLeft:t.spacing(1)},[`& .${Se.quotaHelp}`]:{position:"relative"},[`& .${Se.checkboxWrapper}`]:{display:"flex"},[`& .${Se.checkboxWrapperColumn}`]:{display:"flex",flexDirection:"row"},[`& .${Se.group}`]:{flexDirection:"row"},[`& .${Se.removeHelperPadding}`]:{"& p":{margin:"8px 0px"}}}})),Me=e=>{const{config:t,isUserOwner:a,previousValue:r,handleChange:s}=e,[i,o]=(0,n.useState)(r),p=e=>{const{target:t}=e;o(t.value),s("additionalProperties",e)},d=(0,be.Os)({application_access_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.application.access.token.expiry.time",defaultMessage:"Application Access Token Expiry Time"},user_access_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.user.access.token.expiry.time",defaultMessage:"User Access Token Expiry Time"},refresh_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.refresh.token.expiry.time",defaultMessage:"Refresh Token Expiry Time"},id_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.id.token.expiry.time",defaultMessage:"Id Token Expiry Time"},pkceMandatory:{id:"Shared.AppsAndKeys.AppConfiguration.pkce.mandatory",defaultMessage:"Enable PKCE"},pkceSupportPlain:{id:"Shared.AppsAndKeys.AppConfiguration.pkce.support.plain",defaultMessage:"Support PKCE Plain text"},bypassClientCredentials:{id:"Shared.AppsAndKeys.AppConfiguration.bypass.client.credentials",defaultMessage:"Public client"}}),u=(0,be.Os)({application_access_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.application.access.token.expiry.time.tooltip",defaultMessage:"Type Application Access Token Expiry Time"},user_access_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.user.access.token.expiry.time.tooltip",defaultMessage:"Type User Access Token Expiry Time"},refresh_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.refresh.token.expiry.time.tooltip",defaultMessage:"Type Refresh Token Expiry Time"},id_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.id.token.expiry.time.tooltip",defaultMessage:"Type ID Token Expiry Time"},pkceMandatory:{id:"Shared.AppsAndKeys.AppConfiguration.pkce.mandatory.tooltip",defaultMessage:"Enable PKCE"},pkceSupportPlain:{id:"Shared.AppsAndKeys.AppConfiguration.pkce.support.plain.tooltip",defaultMessage:"S256 is recommended, plain text too can be used."},bypassClientCredentials:{id:"Shared.AppsAndKeys.AppConfiguration.bypass.client.credentials.tooltip",defaultMessage:"Allow authentication without the client secret."}}),m=()=>d[t.name]?e.intl.formatMessage(d[t.name]):t.label,y=()=>u[t.name]?e.intl.formatMessage(u[t.name]):t.tooltip;return(0,n.useEffect)((()=>{o(r)}),[r]),n.createElement(Ke,null,n.createElement(Y.c,null,n.createElement(Q.c,{component:"th",scope:"row",className:Se.leftCol},m()),n.createElement(Q.c,null,n.createElement(l.c,{maxWidth:600},"select"===t.type&&!1===t.multiple?n.createElement(w.c,{classes:{root:Se.removeHelperPadding},fullWidth:!0,id:t.name,select:!0,label:m(),value:i,name:t.name,onChange:e=>p(e),helperText:n.createElement(c.c,{variant:"caption"},y()),margin:"dense",variant:"outlined",size:"small",disabled:!a},t.values.map((e=>n.createElement(fe.c,{key:e,value:e},e)))):"select"===t.type&&!0===t.multiple&&Array.isArray(i)?n.createElement(n.Fragment,null,n.createElement(K.c,{variant:"outlined",className:Se.formControl,fullWidth:!0},n.createElement(he.c,{id:"multi-select-label"},t.label),n.createElement(Ae.c,{variant:"standard",labelId:"multi-select-label",id:"multi-select-outlined",margin:"dense",displayEmpty:!0,name:t.name,multiple:!0,value:i,onChange:e=>p(e),input:n.createElement(Te.c,{id:"multi-select-outlined"}),renderValue:e=>n.createElement("div",{className:Se.chips},e.map((e=>n.createElement(Ee.c,{key:e,label:e,className:Se.chip})))),helperText:n.createElement(c.c,{variant:"caption"},y()),label:m()},t.values.map((e=>n.createElement(fe.c,{key:e,value:e},n.createElement(ue.c,{checked:i.indexOf(e)>-1}),n.createElement(ke.c,{primary:e})))))),n.createElement(c.c,{variant:"caption"},y())):"input"===t.type&&!0===t.multiple?n.createElement(n.Fragment,null,n.createElement(Ce.c,{value:i,fullWidth:!0,variant:"outlined",id:"multi-input-outlined",label:t.label,onAdd:e=>{const a={target:{name:t.name,value:[...i,e]}};p(a)},chipRenderer:(e,a)=>{let{value:r}=e;return n.createElement(Ee.c,{key:a,size:"small",label:r,onDelete:()=>{const e={target:{name:t.name,value:i.filter((e=>e!==r))}};p(e)},style:{margin:"0 8px 12px 0",float:"left"}})},style:{display:"flex"}}),n.createElement(c.c,{variant:"caption"},t.tooltip)):"input"===t.type?n.createElement(w.c,{classes:{root:Se.removeHelperPadding},fullWidth:!0,id:t.name,label:m(),value:i,name:t.name,onChange:e=>p(e),helperText:n.createElement(c.c,{variant:"caption"},y()),margin:"dense",size:"small",variant:"outlined",disabled:!a}):"checkbox"===t.type?n.createElement(ue.c,{classes:{root:Se.removeHelperPadding},fullWidth:!0,id:t.name,label:m(),checked:"string"==typeof i&&"true"===i||"string"!=typeof i&&!0===i,name:t.name,onChange:e=>p(e),helperText:n.createElement(c.c,{variant:"caption"},y()),margin:"dense",variant:"outlined",disabled:!a}):n.createElement(w.c,{classes:{root:Se.removeHelperPadding},fullWidth:!0,id:t.name,label:m(),value:i,name:t.name,onChange:e=>p(e),helperText:n.createElement(c.c,{variant:"caption"},y()),margin:"dense",variant:"outlined",disabled:!a})))))};Me.defaultProps={notFound:!1},Me.propTypes={classes:i().instanceOf(Object).isRequired,previousValue:i().any.isRequired,isUserOwner:i().bool.isRequired,handleChange:i().func.isRequired,config:i().any.isRequired,notFound:i().bool,intl:i().shape({formatMessage:i().func}).isRequired};const we=(0,d.cp)(Me),xe="KeyConfiguration",Pe={FormControl:`${xe}-FormControl`,FormControlOdd:`${xe}-FormControlOdd`,button:`${xe}-button`,quotaHelp:`${xe}-quotaHelp`,checkboxWrapper:`${xe}-checkboxWrapper`,checkboxWrapperColumn:`${xe}-checkboxWrapperColumn`,group:`${xe}-group`,removeHelperPadding:`${xe}-removeHelperPadding`,iconStyle:`${xe}-iconStyle`,iconButton:`${xe}-iconButton`,titleColumn:`${xe}-titleColumn`,keyInfoTable:`${xe}-keyInfoTable`,leftCol:`${xe}-leftCol`},Oe=(0,r.cp)("div")((e=>{let{theme:t}=e;return{[`& .${Pe.FormControl}`]:{paddingTop:0,paddingBottom:t.spacing(2),paddingLeft:0,width:"100%"},[`& .${Pe.FormControlOdd}`]:{padding:t.spacing(2),width:"100%"},[`& .${Pe.button}`]:{marginLeft:t.spacing(1)},[`& .${Pe.quotaHelp}`]:{position:"relative"},[`& .${Pe.checkboxWrapper}`]:{display:"flex"},[`& .${Pe.checkboxWrapperColumn}`]:{display:"flex",flexWrap:"wrap",flexDirection:"row",whiteSpace:"nowrap"},[`& .${Pe.group}`]:{flexDirection:"row"},[`& .${Pe.removeHelperPadding}`]:{"& p":{margin:"8px 0px"}},[`& .${Pe.iconStyle}`]:{cursor:"pointer",padding:"0 0 0 10px"},[`& .${Pe.iconButton}`]:{padding:"0 0 0 10px","& .material-icons":{fontSize:16}},[`& .${Pe.titleColumn}`]:{width:150,fontWeight:500},[`& .${Pe.keyInfoTable}`]:{marginBottom:20,borderCollapse:"collapse","& td":{paddingBottom:5,borderBottom:"solid 1px #cccc"}},[`& .${Pe.leftCol}`]:{width:180}}})),Ie=e=>{const[t,a]=(0,n.useState)(!1),[r,s]=(0,n.useState)(!1),i=(0,v.c)(),{notFound:o,isUserOwner:c,keyManagerConfig:d,updateKeyRequest:u,keyRequest:m,updateHasError:y,callbackError:g,mode:h}=e,{selectedGrantTypes:k,callbackUrl:E}=m,{applicationConfiguration:f,availableGrantTypes:b,description:A,additionalProperties:T,enableMapOAuthConsumerApps:C,enableOAuthAppCreation:K,enableTokenEncryption:M,enableTokenGeneration:x,id:P,name:O,revokeEndpoint:I,tokenEndpoint:R,type:$,userInfoEndpoint:N}=d,U=(e,t)=>{const a=de()(m),{target:n}=t;let r=[...a.selectedGrantTypes];switch(a.keyManager=O,e){case"callbackUrl":(r.includes("implicit")||r.includes("authorization_code"))&&(""===n.value?(y(!0),s(i.formatMessage({defaultMessage:"Call back URL can not be empty when Implicit or Authorization Code grants are selected.",id:"Shared.AppsAndKeys.KeyConfCiguration.Invalid.callback.empty.error.text"}))):ge.c.url.validate(E).error?(y(!0),s(i.formatMessage({defaultMessage:"Invalid URL. Please enter a valid URL.",id:"Shared.AppsAndKeys.KeyConfCiguration.Invalid.callback.url.error.text"}))):(s(!1),y(!1))),a.callbackUrl=n.value;break;case"grantType":n.checked?r=[...r,n.id]:(r=a.selectedGrantTypes.filter((e=>e!==n.id)),"implicit"!==n.id&&"authorization_code"!==n.id||(a.callbackUrl="",s(!1),y(!1))),a.selectedGrantTypes=r;break;case"additionalProperties":const e=a.additionalProperties;"checkbox"===n.type?e[n.name]=n.checked+"":e[n.name]=n.value,a.additionalProperties=e}u(a)},L=()=>{a(!0),setTimeout((function(){a(!1)}),2e3)},V=e=>{const{additionalProperties:t}=m;let a;a="input"!=e.type||e.multiple?!(!t||!t[e.name]):!(!t||!t[e.name]&&""!==t[e.name]);let n=e.default;return e.multiple&&"string"==typeof n&&""===n&&(n=[]),a?t[e.name]:n};if(o)return n.createElement(W.c,null);const j=((e,t)=>{const a={};return e.forEach((e=>{a[e]=t[e],t[e]||(a[e]=e)})),a})(b,ye().grantTypes);return n.createElement(Oe,null,n.createElement(l.c,{display:"flex",alignItems:"center"},n.createElement(D.c,{className:Pe.table},n.createElement(X.c,null,R&&""!==R&&n.createElement(Y.c,null,n.createElement(Q.c,{component:"th",scope:"row",className:Pe.leftCol},n.createElement(p.c,{defaultMessage:"Token Endpoint",id:"Shared.AppsAndKeys.KeyConfiguration.token.endpoint.label"})),n.createElement(Q.c,null,R,n.createElement(_.c,{title:t?i.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.KeyConfiguration.copied"}):i.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.KeyConfiguration.copy.to.clipboard"}),placement:"right",className:Pe.iconStyle},n.createElement(q.c,{"aria-label":"Copy to clipboard",classes:{root:Pe.iconButton},size:"large",onClick:()=>{navigator.clipboard.writeText(R).then(L())}},n.createElement(G.c,{color:"secondary"},"file_copy"))))),I&&""!==I&&n.createElement(Y.c,null,n.createElement(Q.c,{component:"th",scope:"row",className:Pe.leftCol},n.createElement(p.c,{defaultMessage:"Revoke Endpoint",id:"Shared.AppsAndKeys.KeyConfiguration.revoke.endpoint.label"})),n.createElement(Q.c,null,I,n.createElement(_.c,{title:t?i.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.KeyConfiguration.copied"}):i.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.KeyConfiguration.copy.to.clipboard"}),placement:"right",className:Pe.iconStyle},n.createElement(q.c,{"aria-label":"Copy to clipboard",classes:{root:Pe.iconButton},size:"large",onClick:()=>{navigator.clipboard.writeText(I).then(L())}},n.createElement(G.c,{color:"secondary"},"file_copy"))))),N&&""!==N&&n.createElement(Y.c,null,n.createElement(Q.c,{component:"th",scope:"row",className:Pe.leftCol},n.createElement(p.c,{defaultMessage:"User Info Endpoint",id:"Shared.AppsAndKeys.KeyConfiguration.userinfo.endpoint.label"})),n.createElement(Q.c,null,N,n.createElement(_.c,{title:t?i.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.KeyConfiguration.copied"}):i.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.KeyConfiguration.copy.to.clipboard"}),placement:"right",className:Pe.iconStyle},n.createElement(q.c,{"aria-label":"Copy to clipboard",classes:{root:Pe.iconButton},size:"large",onClick:()=>{navigator.clipboard.writeText(N).then(L())}},n.createElement(G.c,{color:"secondary"},"file_copy"))))),"MAPPED"!==h&&n.createElement(n.Fragment,null,n.createElement(Y.c,null,n.createElement(Q.c,{component:"th",scope:"row",className:Pe.leftCol},n.createElement(p.c,{id:"Shared.AppsAndKeys.KeyConfiguration.grant.types",defaultMessage:"Grant Types"})),n.createElement(Q.c,null,n.createElement("div",{className:Pe.checkboxWrapperColumn,id:"grant-types"},Object.keys(j).map((e=>{const t=j[e];return n.createElement(le.c,{control:n.createElement(ue.c,{id:e,checked:!(!k||!k.includes(e)),onChange:e=>U("grantType",e),value:t,disabled:!c,color:"grey","data-testid":e}),label:t,key:e})}))),n.createElement(S.c,null,n.createElement(p.c,{defaultMessage:"The application can use the following grant types to generate \n                            Access Tokens. Based on the application requirement,you can enable or disable \n                            grant types for this application.",id:"Shared.AppsAndKeys.KeyConfiguration.the.application.can"})))),n.createElement(Y.c,null,n.createElement(Q.c,{component:"th",scope:"row",className:Pe.leftCol},n.createElement(p.c,{defaultMessage:"Callback URL",id:"Shared.AppsAndKeys.KeyConfiguration.callback.url.label"})),n.createElement(Q.c,null,n.createElement(l.c,{maxWidth:600},n.createElement(w.c,{margin:"dense",id:"callbackURL",size:"small",label:n.createElement(p.c,{defaultMessage:"Callback URL",id:"Shared.AppsAndKeys.KeyConfiguration.callback.url.label"}),value:E,name:"callbackURL",onChange:e=>U("callbackUrl",e),helperText:r||n.createElement(p.c,{defaultMessage:"Callback URL is a redirection URI in the client\n                            application which is used by the authorization server to send the\n                            client's user-agent (usually web browser) back after granting access.",id:"Shared.AppsAndKeys.KeyConfCiguration.callback.url.helper.text"}),variant:"outlined",disabled:!c||k&&!k.includes("authorization_code")&&!k.includes("implicit"),error:g,placeholder:i.formatMessage({defaultMessage:"http://url-to-webapp",id:"Shared.AppsAndKeys.KeyConfiguration.url.to.webapp"}),fullWidth:!0})))),f.length>0&&f.map((e=>n.createElement(we,{config:e,previousValue:V(e),isUserOwner:c,handleChange:U}))))))))};Ie.defaultProps={notFound:!1,validating:!1,mode:null},Ie.propTypes={classes:i().instanceOf(Object).isRequired,keyRequest:i().shape({callbackUrl:i().string,selectedGrantTypes:i().array}).isRequired,isUserOwner:i().bool.isRequired,isKeysAvailable:i().bool.isRequired,keyManagerConfig:i().any.isRequired,notFound:i().bool,setGenerateEnabled:i().func.isRequired,updateKeyRequest:i().func.isRequired,validating:i().bool,mode:i().string};const Re=Ie;var $e=a(655592),Ne=a(293184),De=a(890496);function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function qe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(a),!0).forEach((function(t){Ge(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ge(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const We="ViewKeys",Ue={button:`${We}-button`,inputWrapper:`${We}-inputWrapper`,copyWrapper:`${We}-copyWrapper`,tokenSection:`${We}-tokenSection`,margin:`${We}-margin`,dialogWrapper:`${We}-dialogWrapper`,iconButton:`${We}-iconButton`},Le=(0,r.cp)("div")((e=>{let{theme:t}=e;return{[`& .${Ue.inputWrapper}`]:{display:"flex",flexDirection:"row",alignItems:"center","& span, & h5, & label, & td, & li, & div, & input":{color:t.palette.getContrastText(t.palette.background.paper)}},[`&.${Ue.copyWrapper}`]:{display:"flex",flexDirection:"row",alignItems:"center"},[`& .${Ue.tokenSection}`]:{marginTop:0,marginBottom:t.spacing(.5)},[`& .${Ue.margin}`]:{marginRight:t.spacing(2)},[`& .${Ue.dialogWrapper}`]:{"& label,& h5, & label, & td, & li, & input, & h2, & p.MuiTypography-root,& p.MuiFormHelperText-root":{color:t.palette.getContrastText(t.palette.background.paper)}},[`& .${Ue.iconButton}`]:{padding:"0 0 0 10px","& .material-icons":{fontSize:16}}}}));class Ve extends n.Component{constructor(e){super(e),Ge(this,"getGeneratedKeys",(()=>{const{accessTokenRequest:e}=this.state,{keyType:t}=this.props;this.applicationPromise.then((a=>{a.getKeys().then((()=>{const n=qe(qe({},e),{},{keyType:t}),r=a.subscriptionScopes.map((e=>e.key));this.setState({accessTokenRequest:n,subscriptionScopes:r})}))})).catch((e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})}))})),Ge(this,"updateAccessTokenRequest",(e=>{this.setState({accessTokenRequest:e})})),Ge(this,"onCopy",(e=>{this.setState({[e]:!0});const t=this,a=e;setTimeout((()=>{t.setState({[a]:!1})}),4e3)})),Ge(this,"handleShowHidden",(e=>{this.setState({[e]:!this.state[e]})})),Ge(this,"handleMouseDownGeneric",(e=>{e.preventDefault()})),Ge(this,"handleClickOpen",(()=>{this.setState({open:!0,showToken:!1})})),Ge(this,"handleClickRemove",(e=>{const{selectedTab:t,keyType:a,intl:n,loadApplication:r}=this.props;this.applicationPromise.then((n=>n.removeKeys(a,t,e))).then((e=>{e&&(r(),k.c.info(n.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.cleanupall.success",defaultMessage:"Application keys removed successfully"})))})).catch((e=>{throw e}))})),Ge(this,"handleSecretRegenerate",((e,t,a,n)=>{this.applicationPromise.then((r=>r.regenerateSecret(e,t,a,n))).then((e=>{console.log("consumer secret regenerated successfully "+e),this.setState({open:!0,showSecretGen:!0,secretGenResponse:e})})).catch((e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})}))})),Ge(this,"handleClickOpenCurl",(()=>{this.setState({open:!0,showCurl:!0})})),Ge(this,"handleClose",(()=>{this.setState({open:!1,showCurl:!1,isKeyJWT:!1,showSecretGen:!1})})),Ge(this,"generateAccessToken",(()=>{const{accessTokenRequest:e,isUpdating:t}=this.state,{selectedTab:a,intl:n}=this.props;this.setState({isUpdating:!0}),this.applicationPromise.then((t=>t.generateToken(a,e.keyType,e.timeout,e.scopesSelected))).then((e=>{console.log("token generated successfully "+e),this.setState({showToken:!0,tokenResponse:e,token:e.accessToken,tokenScopes:e.tokenScopes,tokenValidityTime:e.validityTime}),this.setState({isUpdating:!1})})).catch((e=>{const{status:t}=e;404===t?this.setState({notFound:!0}):900905===e.response.body.code?k.c.error(e.response.body.description):400===t&&k.c.error(e.description||n.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.bad.request.error",defaultMessage:"Error occurred when generating Access Token"})),this.setState({isUpdating:!1});const{response:a}=e;a&&a.body&&900905!==a.body.code&&k.c.error(a.body.message)}))})),Ge(this,"viewKeyAndSecret",((e,t,a,r,s)=>{const{intl:i,selectedApp:{hashEnabled:l},keyType:c}=this.props,{keyCopied:d,secretCopied:u,showCS:m}=this.state;return n.createElement(n.Fragment,null,n.createElement(M.cp,{item:!0,xs:6},n.createElement(Le,{className:Ue.copyWrapper},n.createElement(w.c,{id:"consumer-key",value:e,margin:"dense",size:"small",label:n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.consumer.key",defaultMessage:"Consumer Key"}),fullWidth:!0,variant:"outlined",InputProps:{readOnly:!0,endAdornment:n.createElement(Ne.c,{position:"end"},n.createElement(_.c,{title:d?i.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewKeys.copied"}):i.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewKeys.copy.to"}),placement:"right"},n.createElement(q.c,{"aria-label":"Copy to clipboard",classes:{root:Ue.iconButton},size:"large",onClick:()=>{navigator.clipboard.writeText(e).then((()=>this.onCopy("keyCopied")))}},n.createElement(G.c,{color:"secondary"},"file_copy"))))}})),n.createElement(K.c,{variant:"standard"},n.createElement(S.c,{id:"consumer-key-helper-text"},n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.consumer.key.title",defaultMessage:"Consumer Key of the application"})))),n.createElement(M.cp,{item:!0,xs:6},n.createElement(Le,{className:Ue.copyWrapper},l?n.createElement(o.c,{variant:"contained",color:"primary",sx:{mt:1},onClick:()=>this.handleSecretRegenerate(e,c,a,r),disabled:!s},n.createElement(p.c,{defaultMessage:"Regenerate Consumer Secret",id:"Shared.AppsAndKeys.ViewKeys.consumer.secret.button.regenerate"})):n.createElement(w.c,{id:"consumer-secret",label:n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.consumer.secret",defaultMessage:"Consumer Secret"}),type:m||!t?"text":"password",value:t,margin:"dense",fullWidth:!0,variant:"outlined",size:"small",InputProps:{readOnly:!0,endAdornment:n.createElement(Ne.c,{position:"end"},n.createElement(q.c,{classes:{root:Ue.iconButton},onClick:()=>this.handleShowHidden("showCS"),onMouseDown:this.handleMouseDownGeneric,id:"visibility-toggle-btn",size:"large"},m?n.createElement(G.c,null,"visibility_off"):n.createElement(G.c,null,"visibility")),n.createElement(_.c,{title:u?i.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewKeys.copied"}):i.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewKeys.copy.to.clipboard"}),placement:"right"},n.createElement(q.c,{"aria-label":"Copy to clipboard",classes:{root:Ue.iconButton},size:"large",onClick:()=>{navigator.clipboard.writeText(t).then((()=>this.onCopy("secretCopied")))}},n.createElement(G.c,{color:"secondary"},"file_copy"))))}})),!l&&n.createElement(K.c,{variant:"standard"},n.createElement(S.c,{id:"consumer-secret-helper-text"},n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.consumer.secret.of.application",defaultMessage:"Consumer Secret of the application"})))))}));const{selectedApp:t}=this.props;let a;t&&(a=t.appId||t.value),this.applicationPromise=O.c.get(a),this.state={showCS:!1,open:!1,showToken:!1,showCurl:!1,showSecretGen:!1,accessTokenRequest:{timeout:3600,scopesSelected:[],keyType:""},subscriptionScopes:[],isUpdating:!1}}componentDidMount(){this.getGeneratedKeys()}componentDidUpdate(e){const{isKeyJWT:t}=this.props;t&&!e.isKeyJWT&&this.setState({isKeyJWT:!0})}componentDidUpdate(e){const{isKeyJWT:t}=this.props;t&&!e.isKeyJWT&&this.setState({isKeyJWT:!0})}render(){const{notFound:e,showToken:t,showCurl:a,showSecretGen:r,tokenCopied:s,open:i,token:l,tokenScopes:d,tokenValidityTime:y,accessTokenRequest:g,subscriptionScopes:h,isKeyJWT:k,tokenResponse:T,secretGenResponse:C,isUpdating:v}=this.state,{intl:S,keyType:K,fullScreen:w,keys:x,selectedApp:{tokenType:P},selectedGrantTypes:O,isUserOwner:I,summary:R,selectedTab:$,hashEnabled:N,keyManagerConfig:D,initialToken:_,initialValidityTime:q,initialScopes:G,mode:L}=this.props;if(e)return n.createElement(W.c,null);if(!x)return n.createElement(u.c,null);const V=x.size>0&&x.get($)&&x.get($).keyType===K&&x.get($),j=V&&V.consumerKey,F=V&&V.consumerSecret,B=V&&V.keyMappingId;let X,Y,Q,Z,ee;if(l?(X=l,Y=d,Q=y):x.get($)&&x.get($).keyType===K&&x.get($).token&&(({accessToken:X}=x.get($).token),Y=x.get($).token.tokenScopes,Q=x.get($).token.validityTime,Z=x.get($).token,Z&&!Z.accessToken&&(Z.accessToken=_,Z.validityTime=q,Z.tokenScopes=G)),ee=a?"Get CURL to Generate Access Token":r?"Generate Consumer Secret":"Generate Access Token",!j)return n.createElement(c.c,{variant:"caption",gutterBottom:!0},"PRODUCTION"===K?"Production ":"Sandbox ",n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.key.secret.title",defaultMessage:"Key and Secret is not generated for this application"}));if(R)return n.createElement(M.cp,{container:!0,spacing:3},this.viewKeyAndSecret(j,F,B,$,I));const{supportedGrantTypes:te}=x.get($);return j&&n.createElement(Le,{className:Ue.inputWrapper},n.createElement(M.cp,{container:!0,spacing:3},this.viewKeyAndSecret(j,F,B,$,I),n.createElement(M.cp,{item:!0,xs:12},n.createElement(E.c,{fullScreen:w,open:i||k&&Z,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title",className:Ue.dialogWrapper},n.createElement(A.c,{id:"responsive-dialog-title"},ee),n.createElement(b.c,null,!a&&!k&&!r&&n.createElement(U.c,null,!t&&n.createElement(J.c,{updateAccessTokenRequest:this.updateAccessTokenRequest,accessTokenRequest:g,subscriptionScopes:h}),t&&n.createElement(z.c,{token:qe(qe({},T),{},{isOauth:!0})})),a&&n.createElement(U.c,null,n.createElement(H,{keys:{consumerKey:j,consumerSecret:F},keyType:K,keyManagerConfig:D})),r&&n.createElement(U.c,null,n.createElement(De.c,{secret:qe({},C)})),k&&Z&&N&&n.createElement(U.c,null,n.createElement(z.c,{token:qe(qe({},Z),{},{isOauth:!0}),consumerSecret:F})),k&&Z&&!N&&n.createElement(U.c,null,n.createElement(z.c,{token:qe(qe({},Z),{},{isOauth:!0})}))),n.createElement(f.c,null,v&&n.createElement(m.c,{size:24}),!t&&!a&&!k&&!r&&n.createElement(o.c,{onClick:this.generateAccessToken,color:"primary",id:"generate-access-token-generate-btn",disabled:v},n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.consumer.generate.btn",defaultMessage:"Generate"})),n.createElement(o.c,{onClick:this.handleClose,id:"generate-access-token-close-btn",color:"primary",autoFocus:!0},n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.consumer.close.btn",defaultMessage:"Close"})))),!N&&n.createElement("div",{className:Ue.tokenSection},D.enableTokenGeneration&&te&&te.find((e=>e.includes("client_credentials")))&&"MAPPED"!==L&&n.createElement(o.c,{id:"generate-access-token-oauth2",variant:"outlined",size:"small",color:"grey",className:Ue.margin,onClick:this.handleClickOpen,disabled:!te.includes("client_credentials")},n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.generate.access.token",defaultMessage:"Generate Access Token"})),n.createElement(o.c,{id:"curl-to-generate-access-token-btn",variant:"outlined",size:"small",color:"grey",className:Ue.margin,onClick:this.handleClickOpenCurl},n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.curl.to.generate",defaultMessage:"CURL to Generate Access Token"}))),te&&!te.includes("client_credentials")&&!N&&n.createElement(c.c,{variant:"caption",gutterBottom:!0},n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.client.enable.client.credentials",defaultMessage:"Enable Client Credentials grant type to generate test access tokens"})))))}}Ve.defaultProps={fullScreen:!1,summary:!1,mode:null},Ve.propTypes={classes:i().shape({}).isRequired,fullScreen:i().bool,isKeyJWT:i().bool.isRequired,isUserOwner:i().bool.isRequired,summary:i().bool,mode:i().string};const je=(0,d.cp)((0,$e.Ak)(Ve)),Fe="WaitingForApproval-root",Be=(0,r.cp)("div")((e=>{let{theme:t}=e;return{[`&.${Fe}`]:{padding:t.spacing(3)}}})),He=(0,d.cp)((e=>{const{keyState:t,states:a,intl:r}=e;let s=r.formatMessage({defaultMessage:"A request to register this application has been sent and is pending approval.",id:"Shared.AppsAndKeys.WaitingForApproval.msg.ok"});return t===a.REJECTED&&(s=r.formatMessage({defaultMessage:"This application has been rejected from generating keys",id:"Shared.AppsAndKeys.WaitingForApproval.msg.reject"})),n.createElement(Be,{className:Fe},s)}));function ze(e){const{keys:t,keyStates:a,key:r,selectedApp:s,keyType:i,isKeyJWT:o,isUserOwner:l,selectedTab:d}=e;if(t.size>0&&r&&"APPROVED"===r.keyState&&!r.consumerKey)return n.createElement("div",{className:{background:"#ffffff55",color:theme.palette.getContrastText(theme.palette.background.paper),border:"solid 1px #fff",padding:theme.spacing(2),width:"100%"}},n.createElement(c.c,{variant:"h5",component:"h3"},"Error"),n.createElement(c.c,{variant:"body2"},n.createElement(p.c,{id:"Shared.AppsAndKeys.TokenManagerSummary",defaultMessage:"Error! You have partially-created keys. Use `Clean Up` option."})));if(r&&(r.keyState===a.CREATED||r.keyState===a.REJECTED))return n.createElement("div",{className:{background:"#ffffff55",color:theme.palette.getContrastText(theme.palette.background.paper),border:"solid 1px #fff",padding:theme.spacing(2),width:"100%"}},n.createElement(c.c,{variant:"body2"},n.createElement(He,{keyState:r.keyState,states:a})));const u=r?r.supportedGrantTypes:[];return n.createElement(je,{selectedApp:s,selectedTab:d,keyType:i,keys:t,isKeyJWT:o,selectedGrantTypes:u,isUserOwner:l,summary:!0})}var Je=a(403972),Xe=a(729700);const Ye=function(e){const[t,a]=n.useState(!1),{keyMappingId:r,handleClickRemove:s}=e,i=()=>{a(!1)};return n.createElement("div",null,n.createElement(o.c,{id:"remove-generated-keys",variant:"outlined",color:"secondary",startIcon:n.createElement(Xe.default,null),onClick:()=>{a(!0)}},n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.remove.keys",defaultMessage:"Remove Keys"})),n.createElement(E.c,{open:t,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.createElement(A.c,{id:"alert-dialog-title"},n.createElement(p.c,{id:"Applications.Listing.DeleteConfirmation.remove.keys.dialog.title",defaultMessage:"Do you really want to remove keys?"})),n.createElement(b.c,null,n.createElement(U.c,{id:"alert-dialog-description"},n.createElement(p.c,{id:"Applications.Listing.DeleteConfirmation.remove.keys.dialog.content",defaultMessage:"This will remove the key entries stored in devportal, gateway as well as in the service provider."}))),n.createElement(f.c,null,n.createElement(o.c,{onClick:i,color:"primary"},n.createElement(p.c,{id:"Applications.Listing.DeleteConfirmation.remove.keys.dialog.Cancel",defaultMessage:"Cancel"})),n.createElement(o.c,{onClick:()=>{s(r)},color:"primary",autoFocus:!0},n.createElement(p.c,{id:"Applications.Listing.DeleteConfirmation.remove.keys.dialog.Delete",defaultMessage:"Delete"})))))},Qe=function(e){const[t,a]=n.useState(!1),{keyMappingId:r,handleClickRemove:s}=e,i=()=>{a(!1)};return n.createElement("div",null,n.createElement(o.c,{id:"remove-generated-keys",variant:"outlined",color:"secondary",startIcon:n.createElement(Xe.default,null),onClick:()=>{a(!0)}},n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.remove.keys",defaultMessage:"Remove Keys"})),n.createElement(E.c,{open:t,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.createElement(A.c,{id:"alert-dialog-title"},n.createElement(p.c,{id:"Applications.Listing.DeleteConfirmation.remove.keys.dialog.title",defaultMessage:"Do you really want to remove keys?"})),n.createElement(b.c,null,n.createElement(U.c,{id:"alert-dialog-description"},n.createElement(p.c,{id:"Applications.Listing.DeleteConfirmation.clean.keys.dialog.content",defaultMessage:"This will remove only the key entries stored in devportal, gateway and will not remove the service proveder keys."}))),n.createElement(f.c,null,n.createElement(o.c,{onClick:i,color:"primary"},n.createElement(p.c,{id:"Applications.Listing.DeleteConfirmation.remove.keys.dialog.Cancel",defaultMessage:"Cancel"})),n.createElement(o.c,{onClick:()=>{s(r)},color:"primary",autoFocus:!0},n.createElement(p.c,{id:"Applications.Listing.DeleteConfirmation.remove.keys.dialog.Delete",defaultMessage:"Delete"})))))},Ze=["children","value","index"];function et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function tt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?et(Object(a),!0).forEach((function(t){at(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):et(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function at(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function nt(){return nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},nt.apply(this,arguments)}const rt="TokenManager",st={root:`${rt}-root`,button:`${rt}-button`,cleanUpButton:`${rt}-cleanUpButton`,cleanUpInfoText:`${rt}-cleanUpInfoText`,tokenSection:`${rt}-tokenSection`,margin:`${rt}-margin`,keyConfigWrapper:`${rt}-keyConfigWrapper`,generateWrapper:`${rt}-generateWrapper`,paper:`${rt}-paper`,muiFormGroupRoot:`${rt}-muiFormGroupRoot`,formControl:`${rt}-formControl`,subTitle:`${rt}-subTitle`,tabPanel:`${rt}-tabPanel`,warningIcon:`${rt}-warningIcon`,leftCol:`${rt}-leftCol`},it=(0,r.cp)("div")((e=>{let{theme:t}=e;return{[`& .${st.root}`]:{padding:t.spacing(3),"& span, & h6, & label, & input":{color:t.palette.getContrastText(t.palette.background.paper)},"& .Mui-disabled span":{color:t.palette.grey[500]},"& input:disabled":{backgroundColor:t.palette.grey[100],color:t.palette.grey[500]},position:"relative"},[`& .${st.button}`]:{marginLeft:0,"& span":{color:t.palette.getContrastText(t.palette.primary.main)},marginRight:t.spacing(2)},[`& .${st.cleanUpButton}`]:{marginLeft:15},[`& .${st.cleanUpInfoText}`]:{padding:"10px 0px 10px 15px"},[`& .${st.tokenSection}`]:{marginTop:t.spacing(2),marginBottom:t.spacing(2)},[`& .${st.margin}`]:{marginRight:t.spacing(2)},[`& .${st.keyConfigWrapper}`]:{flexDirection:"column",marginBottom:0},[`& .${st.generateWrapper}`]:{padding:"10px 0px",marginLeft:t.spacing(1.25)},[`& .${st.paper}`]:{background:"none",marginBottom:t.spacing(2),marginTop:t.spacing(2)},[`& .${st.muiFormGroupRoot}`]:{flexDirection:"row"},[`& .${st.formControl}`]:{},[`& .${st.subTitle}`]:{fontWeight:400},[`& .${st.tabPanel}`]:{paddingLeft:t.spacing(2),"& .MuiBox-root":{padding:0}},[`& .${st.warningIcon}`]:{color:"#ff9a00",fontSize:20,marginRight:10},[`& .${st.leftCol}`]:{width:180}}}));function ot(e){const{children:t,value:a,index:r}=e,s=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,Ze);return n.createElement("div",nt({role:"tabpanel",hidden:a!==r,id:`nav-tabpanel-${r}`,"aria-labelledby":`nav-tab-${r}`},s),a===r&&n.createElement(l.c,{p:3},t))}ot.propTypes={children:i().node,index:i().any.isRequired,value:i().any.isRequired};class lt extends n.Component{constructor(e){super(e),at(this,"handleClickRemove",(e=>{const{selectedTab:t,keyType:a,intl:n}=this.props;this.application.then((n=>n.removeKeys(a,t,e))).then((e=>{e&&(this.loadApplication(),k.c.info(n.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.cleanupall.success",defaultMessage:"Application keys removed successfully"})))})).catch((e=>{throw e}))})),at(this,"handleTabChange",((e,t)=>{const{keys:a,keyManagers:n,keyRequest:r}=this.state,{keyType:s}=this.props,i=n.find((e=>e.name===t)),{availableGrantTypes:o}=i,l=[];if(o.find((e=>"password"===e))&&l.push("password"),o.find((e=>"client_credentials"===e))&&l.push("client_credentials"),a.size>0&&a.get(t)&&a.get(t).keyType===s){const{callbackUrl:e,supportedGrantTypes:n,additionalProperties:s,mode:o}=a.get(t),c=tt(tt({},r),{},{callbackUrl:e,selectedGrantTypes:n||l,additionalProperties:s||this.getDefaultAdditionalProperties(i)});this.setState({keyRequest:c,selectedTab:t,mode:o,importDisabled:"MAPPED"===o||"CREATED"===o})}else this.setState({keyRequest:tt(tt({},r),{},{selectedGrantTypes:l,additionalProperties:this.getDefaultAdditionalProperties(i)}),selectedTab:t,importDisabled:!1})})),at(this,"loadApplication",(()=>{const{keyType:e,intl:t}=this.props;if(this.appId){const a=(new N.c).getKeyManagers(),n=this.application.then((t=>t.getKeys(e)));Promise.all([a,n]).then((t=>{const a=[];if(t[0].body.list.map((e=>{e.enabled&&a.push(e)})),0===a.length)return void this.setState({keyManagers:[]});let{selectedTab:n}=this.state;!n&&a.length>0&&(n=a.find((e=>"Resident Key Manager"===e.name))?"Resident Key Manager":a[0].name);const r=a.find((e=>e.name===n)),s=t[1],{keyRequest:i}=this.state;if(s.size>0&&s.get(n)&&s.get(n).keyType===e){const{callbackUrl:e,supportedGrantTypes:t,additionalProperties:o,mode:l}=s.get(n),c=tt(tt({},i),{},{callbackUrl:e||"",selectedGrantTypes:t||[],additionalProperties:o||this.getDefaultAdditionalProperties(r)});this.setState({keys:s,keyRequest:c,keyManagers:a,selectedTab:n,importDisabled:"MAPPED"===l||"CREATED"===l,mode:l})}else{const e=[];r.availableGrantTypes.find((e=>"password"===e))&&e.push("password"),r.availableGrantTypes.find((e=>"client_credentials"===e))&&e.push("client_credentials"),this.setState({keys:s,keyRequest:tt(tt({},i),{},{selectedGrantTypes:e,additionalProperties:this.getDefaultAdditionalProperties(r)}),keyManagers:a,selectedTab:n})}})).catch((e=>{console.error(e),404===e.status?this.setState({notFound:!0}):k.c.error(e.description||t.formatMessage({id:"Shared.AppsAndKeys.TokenManager.get.keys.request.error",defaultMessage:"Error while retrieving the keys"}))}))}})),at(this,"setValidating",(e=>{this.setState({validating:e})})),at(this,"updateHasError",(e=>{this.setState({hasError:e})})),at(this,"toTitleCase",(e=>e.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())))),at(this,"handleChange",(e=>{this.setState({tokenType:e.target.defaultValue})})),at(this,"handleClose",(()=>{this.setState({tokenType:"DIRECT"})}));const{selectedApp:t,keyType:a}=this.props;this.state={isLoading:!1,keys:null,isKeyJWT:!1,hasError:!1,initialToken:"",initialValidityTime:0,initialScopes:[],keyRequest:{keyType:a,selectedGrantTypes:null,callbackUrl:"",additionalProperties:{},keyManager:"",validityTime:3600,scopes:["default"]},keyManagers:null,selectedTab:null,providedConsumerKey:"",providedConsumerSecret:"",validating:!1,importDisabled:!1,mode:null,tokenType:"DIRECT"},this.keyStates={COMPLETED:"COMPLETED",APPROVED:"APPROVED",CREATED:"CREATED",REJECTED:"REJECTED"},t&&(this.appId=t.appId||t.value,this.application=O.c.get(this.appId)),this.updateKeyRequest=this.updateKeyRequest.bind(this),this.generateKeys=this.generateKeys.bind(this),this.updateKeys=this.updateKeys.bind(this),this.cleanUpKeys=this.cleanUpKeys.bind(this),this.handleOnChangeProvidedOAuth=this.handleOnChangeProvidedOAuth.bind(this),this.provideOAuthKeySecret=this.provideOAuthKeySecret.bind(this)}componentDidMount(){this.loadApplication()}componentDidUpdate(e){const{keyType:t}=e,{keyType:a}=this.props;t!==a&&this.loadApplication()}getDefaultAdditionalProperties(e){const{availableGrantTypes:t,applicationConfiguration:a}=e,n={};return a.forEach((e=>{n[e.name]=e.default||""})),n}isTokenExchangeEnabled(){const{keyManagers:e}=this.state;let t=!1;return e&&e.length>1&&e.map((e=>{"EXCHANGED"!==e.tokenType&&"BOTH"!==e.tokenType||(t=!0)})),t}updateKeyRequest(e){this.setState({keyRequest:e})}generateKeys(){const{keyRequest:e,keys:t,selectedTab:a}=this.state,{keyType:n,updateSubscriptionData:r,selectedApp:{tokenType:s,hashEnabled:i},intl:o}=this.props;!e.selectedGrantTypes.includes("implicit")&&!e.selectedGrantTypes.includes("authorization_code")||""!==e.callbackUrl?(this.setState({isLoading:!0}),this.application.then((t=>t.generateKeys(n,e.selectedGrantTypes,e.callbackUrl,e.additionalProperties,this.getKeyManagerIdentifier()))).then((e=>{r&&r();const n=new Map([...t]),l="JWT"===s||i;n.set(a,e);const c=e.token?e.token.accessToken:"",p=e.token?e.token.validityTime:0,d=e.token?e.token.tokenScopes:[];this.setState({keys:n,isKeyJWT:l,initialToken:c,initialValidityTime:p,initialScopes:d}),e.keyState===this.keyStates.CREATED||e.keyState===this.keyStates.REJECTED?k.c.info(o.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.success.blocked",defaultMessage:"Application keys generate request is currently pending approval by the site administrator."})):(k.c.info(o.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.success",defaultMessage:"Application keys generated successfully"})),this.loadApplication())})).catch((e=>{const{status:t}=e;404===t?this.setState({notFound:!0}):500===t&&this.loadApplication(),k.c.error(e.description||`${o.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.error",defaultMessage:"Error occurred when generating application keys"})}, ${e.response.body.message}`)})).finally((()=>this.setState({isLoading:!1})))):k.c.error(o.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.error.callbackempty",defaultMessage:"Callback URL can not be empty when the Implicit or Application Code grant types selected"}))}updateKeys(){const{keys:e,keyRequest:t,selectedTab:a}=this.state,{keyType:n,intl:r}=this.props,s=e.get(a).keyType===n&&e.get(a);!t.selectedGrantTypes.includes("implicit")&&!t.selectedGrantTypes.includes("authorization_code")||""!==t.callbackUrl?(this.setState({isLoading:!0}),this.application.then((e=>e.updateKeys(s.tokenType,n,t.selectedGrantTypes,t.callbackUrl,s.consumerKey,s.consumerSecret,t.additionalProperties,a,s.keyMappingId))).then((t=>{const n=new Map([...e]);n.set(a,t),this.setState({keys:n}),k.c.info(r.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.update.success",defaultMessage:"Application keys updated successfully"}))})).catch((e=>{const{status:t}=e;404===t?this.setState({notFound:!0}):500===t&&this.loadApplication();const{response:a}=e;a&&a.body&&a.body.message&&a.body.description&&k.c.error(`${a.body.message}: ${a.body.description}`)})).finally((()=>this.setState({isLoading:!1})))):k.c.error(r.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.error.callbackempty",defaultMessage:"Callback URL can not be empty when the Implicit or Application Code grant types selected"}))}cleanUpKeys(e,t){const{keyType:a,intl:n}=this.props;this.application.then((n=>n.cleanUpKeys(a,e,t))).then((()=>{this.loadApplication(),k.c.info(n.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.cleanup.success",defaultMessage:"Application keys cleaned successfully"}))})).catch((e=>{const{status:t}=e;404===t&&this.setState({notFound:!0}),k.c.error(e.description||n.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.cleanup.error",defaultMessage:"Error occurred while cleaning up application keys"}))}))}handleOnChangeProvidedOAuth(e){this.setState({[e.target.name]:e.target.value})}provideOAuthKeySecret(){const{keyType:e,intl:t}=this.props,{providedConsumerKey:a,providedConsumerSecret:n,selectedTab:r}=this.state;this.application.then((t=>t.provideKeys(e,a,n,r))).then((()=>{this.setState({providedConsumerKey:"",providedConsumerSecret:""}),this.loadApplication(),k.c.info(t.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.provide.success",defaultMessage:"Application keys provided successfully"}))})).catch((e=>{const{status:a,response:n}=e;404===a&&this.setState({notFound:!0}),n?k.c.error(e.response.body.description):k.c.error(e.description||t.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.provide.error",defaultMessage:"Error occurred when providing application keys"}))}))}getKeyManagerDescription(){const{keyManagers:e,selectedTab:t}=this.state,a=e.filter((e=>e.name===t));return a&&1===a.length?a[0].description:""}getKeyManagerIdentifier(){const{keyManagers:e,selectedTab:t}=this.state,a=e.filter((e=>e.name===t));return a&&1===a.length?a[0].id:t}render(){const{selectedApp:e,keyType:t,summary:a,selectedApp:{hashEnabled:r},isKeyManagerAllowed:s}=this.props,{keys:i,keyRequest:d,isLoading:k,isKeyJWT:T,providedConsumerKey:v,providedConsumerSecret:S,selectedTab:K,keyManagers:w,validating:x,hasError:O,initialToken:N,initialValidityTime:_,initialScopes:q,importDisabled:G,mode:W,tokenType:L}=this.state;if(w&&0===w.length)return n.createElement(it,null,n.createElement("div",{className:st.root},n.createElement(l.c,{mb:1},n.createElement(c.c,{variant:"h5",className:st.keyTitle},this.toTitleCase(t),n.createElement(p.c,{id:"Shared.AppsAndKeyhandleCloses.TokenManager.oauth2.keys.main.title",defaultMessage:" OAuth2 Keys"}))),n.createElement(R.c,{type:"info",className:st.dialogContainer},n.createElement(c.c,{variant:"h5",component:"h3"},n.createElement(p.c,{id:"Shared.AppsAndKeys.TokenManager.no.km",defaultMessage:"No Key Managers"})),n.createElement(c.c,{component:"p"},n.createElement(p.c,{id:"Shared.AppsAndKeys.TokenManager.no.km.content",defaultMessage:"No Key Managers active to generate keys."})))));if(!i||!K||!d.selectedGrantTypes)return n.createElement(it,null,n.createElement(u.c,null));const V=i.size>0&&i.get(K)&&i.get(K).keyType===t&&i.get(K),j=V&&V.keyMappingId,F=I.c.getUser().name;let B=!1;e.owner&&F.toLowerCase()===e.owner.toLowerCase()&&(B=!0);const H=i.size>0&&i.get(K)&&i.get(K).keyType===t?i.get(K):null;if(a)return i?n.createElement(it,null,n.createElement(ze,{keys:i,key:H,keyStates:this.keyStates,selectedApp:e,selectedTab:K,keyType:t,isKeyJWT:T,isUserOwner:B})):n.createElement(it,null,n.createElement(Je.c,null));let z,J=!1;if(i.has("Resident Key Manager")&&i.get("Resident Key Manager").supportedGrantTypes&&i.get("Resident Key Manager").supportedGrantTypes.includes("urn:ietf:params:oauth:grant-type:token-exchange")&&(J=!0),w.length>0){const e=w.filter((e=>"Resident Key Manager"===e.name));z=e.length>0?e[0].tokenEndpoint:null}return H&&"APPROVED"===H.keyState&&!H.consumerKey?n.createElement(it,null,n.createElement(c.c,{className:st.cleanUpInfoText,variant:"subtitle1"},n.createElement(p.c,{id:"Shared.AppsAndKeys.TokenManager.cleanup.text",defaultMessage:"Error! You have partially-created keys. Please click `Clean Up` button and try again."})),n.createElement(o.c,{variant:"contained",color:"primary",className:st.cleanUpButton,onClick:()=>this.cleanUpKeys(K,i.get(K).keyMappingId)},n.createElement(p.c,{defaultMessage:"Clean up",id:"Shared.AppsAndKeys.TokenManager.cleanup"}))):!H||H.keyState!==this.keyStates.CREATED&&H.keyState!==this.keyStates.REJECTED?n.createElement(it,null,w&&w.length>1&&n.createElement(y.c,{position:"static",color:"default"},n.createElement(g.c,{value:K,onChange:this.handleTabChange,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example"},w.map((e=>n.createElement(h.c,{label:e.displayName||e.name,value:e.name,disabled:!e.enabled||s&&!s(e.name)&&("Resident Key Manager"!==e.name||!this.isTokenExchangeEnabled()&&"Resident Key Manager"===e.name),id:e.name.replace(/\s/g,"")}))))),n.createElement("div",{className:st.root},n.createElement(l.c,{mb:1},n.createElement(c.c,{variant:"h5",className:st.keyTitle},this.toTitleCase(t),n.createElement(p.c,{id:"Shared.AppsAndKeys.TokenManager.oauth2.keys.main.title",defaultMessage:" OAuth2 Keys"}))),w&&w.length>0&&w.map((a=>n.createElement("div",null,"DIRECT"===a.tokenType&&n.createElement(ot,{value:K,index:a.name,className:st.tabPanel},n.createElement(l.c,{display:"flex",flexDirection:"row"},n.createElement(c.c,{className:st.subTitle,variant:"h6",component:"h6"},n.createElement(p.c,{defaultMessage:"Key and Secret",id:"Shared.AppsAndKeys.TokenManager.key.and.secret"})),a.enableMapOAuthConsumerApps&&n.createElement(l.c,{ml:2},n.createElement(P,{onChange:this.handleOnChangeProvidedOAuth,consumerKey:v,consumerSecret:S,isUserOwner:B,key:H,provideOAuthKeySecret:this.provideOAuthKeySecret,importDisabled:G})),a.enableTokenGeneration&&i.get(K)&&("MAPPED"!==W?n.createElement(l.c,{ml:2},n.createElement(Ye,{keys:i,selectedTab:K,keyMappingId:j,handleClickRemove:this.handleClickRemove})):n.createElement(l.c,{ml:2},n.createElement(Qe,{keys:i,selectedTab:K,keyMappingId:j,handleClickRemove:this.handleClickRemove})))),n.createElement(l.c,{m:2},n.createElement(je,{initialToken:N,initialValidityTime:_,initialScopes:q,selectedApp:e,selectedTab:K,keyType:t,keys:i,selectedGrantTypes:d.selectedGrantTypes,isUserOwner:B,hashEnabled:a.enableTokenHashing||r,keyManagerConfig:a,mode:W,loadApplication:this.loadApplication})),n.createElement(c.c,{className:st.subTitle,variant:"h6",component:"h6"},H?n.createElement(p.c,{defaultMessage:"Key Configurations",id:"Shared.AppsAndKeys.TokenManager.update.configuration"}):n.createElement(p.c,{defaultMessage:"Key Configuration",id:"Shared.AppsAndKeys.TokenManager.key.configuration"})),n.createElement(l.c,{m:2},n.createElement(Re,{keys:i,key:H,selectedApp:e,selectedTab:K,keyType:t,updateKeyRequest:this.updateKeyRequest,keyRequest:d,isUserOwner:B,isKeysAvailable:!!H,keyManagerConfig:a,validating:x,updateHasError:this.updateHasError,callbackError:O,setValidating:this.setValidating,defaultTokenEndpoint:z,mode:W}),n.createElement("div",{className:st.generateWrapper},n.createElement(C.qG,{resourcePath:C.Ce.APPLICATION_GENERATE_KEYS,resourceMethod:C.Ep.POST},B?n.createElement(l.c,{display:"flex"},n.createElement(o.c,{id:"generate-keys",variant:"contained",color:"primary",className:st.button,onClick:H?this.updateKeys:this.generateKeys,disabled:O||k||!a.enableOAuthAppCreation||W&&"MAPPED"===W||s&&!s(a.name)&&("Resident Key Manager"!==a.name||!this.isTokenExchangeEnabled()&&"Resident Key Manager"===a.name)},H?this.props.intl.formatMessage({id:"Shared.AppsAndKeys.TokenManager.update",defaultMessage:"Update"}):this.props.intl.formatMessage({id:"Shared.AppsAndKeys.TokenManager.generate.keys",defaultMessage:"Generate Keys"}),k&&n.createElement(m.c,{size:20})),!a.enableOAuthAppCreation&&n.createElement(l.c,{m:2,display:"flex"},n.createElement($.c,{className:st.warningIcon}),n.createElement(c.c,{variant:"body1"},n.createElement(p.c,{defaultMessage:"Oauth app creation disabled for {kmName} key manager",id:"Shared.AppsAndKeys.TokenManager.app.creation.disable.warn",values:{kmName:a.displayName||a.name}})))):n.createElement(n.Fragment,null,n.createElement(o.c,{id:"generate-keys",variant:"contained",color:"primary",className:st.button,onClick:H?this.updateKeys:this.generateKeys,disabled:!B||k||!a.enableOAuthAppCreation||s&&!s(a.name)&&("Resident Key Manager"!==a.name||!this.isTokenExchangeEnabled()&&"Resident Key Manager"===a.name)},H?this.props.intl.formatMessage({id:"Shared.AppsAndKeys.TokenManager.update.keys",defaultMessage:"Update Keys"}):this.props.intl.formatMessage({id:"Shared.AppsAndKeys.TokenManager.generate.keys",defaultMessage:"Generate Keys"}),k&&n.createElement(m.c,{size:20})),n.createElement(c.c,{variant:"caption"},n.createElement(p.c,{defaultMessage:"Only owner can generate or update keys",id:"Shared.AppsAndKeys.TokenManager.key.and.user.owner"}))))))),"EXCHANGED"===a.tokenType&&n.createElement(ot,{value:K,index:a.name,className:st.tabPanel},n.createElement(c.c,{className:st.subTitle,variant:"h6",component:"h6"},n.createElement(p.c,{defaultMessage:"Token Generation",id:"Shared.AppsAndKeys.TokenManager.ExchangeToken.key.configuration"})),n.createElement(l.c,{m:2},n.createElement(ie,{keys:i,key:H,selectedApp:e,selectedTab:K,keyType:t,updateKeyRequest:this.updateKeyRequest,keyRequest:d,isUserOwner:B,isKeysAvailable:!!H,keyManagerConfig:a,validating:x,updateHasError:this.updateHasError,callbackError:O,setValidating:this.setValidating,defaultTokenEndpoint:z}))),"BOTH"===a.tokenType&&n.createElement(ot,{value:K,index:a.name,className:st.tabPanel},n.createElement(l.c,{m:2},n.createElement(l.c,{m:2},n.createElement(l.c,{display:"flex",alignItems:"center"},n.createElement(D.c,{className:st.table},n.createElement(Y.c,null,n.createElement(Q.c,{component:"th",scope:"row",className:st.leftCol},n.createElement(p.c,{defaultMessage:"API Invocation Method",id:"Shared.AppsAndKeys.KeyConfiguration.API Invocation.Method.label"})),n.createElement(Q.c,null,n.createElement(oe.c,{style:{flexDirection:"row"},"aria-label":"tokenType",name:"tokenType",value:L,onChange:this.handleChange},n.createElement(le.c,{value:"DIRECT",control:n.createElement(ce.c,null),label:"Direct Token",id:"direct-token"}),n.createElement(le.c,{value:"EXCHANGED",control:n.createElement(ce.c,null),label:"Exchange Token",id:"exchange-token"}))))))),"DIRECT"===L&&n.createElement(n.Fragment,null,n.createElement(l.c,{display:"flex",flexDirection:"row"},n.createElement(c.c,{className:st.subTitle,variant:"h6",component:"h6"},n.createElement(p.c,{defaultMessage:"Key and Secret",id:"Shared.AppsAndKeys.TokenManager.key.and.secret"})),a.enableMapOAuthConsumerApps&&n.createElement(l.c,{ml:2},n.createElement(P,{onChange:this.handleOnChangeProvidedOAuth,consumerKey:v,consumerSecret:S,isUserOwner:B,key:H,provideOAuthKeySecret:this.provideOAuthKeySecret,importDisabled:G}))),n.createElement(l.c,{m:2},n.createElement(je,{initialToken:N,initialValidityTime:_,initialScopes:q,selectedApp:e,selectedTab:K,keyType:t,keys:i,selectedGrantTypes:d.selectedGrantTypes,isUserOwner:B,hashEnabled:a.enableTokenHashing||r,keyManagerConfig:a,mode:W,loadApplication:this.loadApplication})),n.createElement(c.c,{className:st.subTitle,variant:"h6",component:"h6"},H?n.createElement(p.c,{defaultMessage:"Key Configurations",id:"Shared.AppsAndKeys.TokenManager.update.configuration"}):n.createElement(p.c,{defaultMessage:"Key Configuration",id:"Shared.AppsAndKeys.TokenManager.key.configuration"})),n.createElement(l.c,{m:2},n.createElement(Re,{keys:i,key:H,selectedApp:e,selectedTab:K,keyType:t,updateKeyRequest:this.updateKeyRequest,keyRequest:d,isUserOwner:B,isKeysAvailable:!!H,keyManagerConfig:a,validating:x,updateHasError:this.updateHasError,callbackError:O,setValidating:this.setValidating,defaultTokenEndpoint:z}),n.createElement("div",{className:st.generateWrapper},n.createElement(C.qG,{resourcePath:C.Ce.APPLICATION_GENERATE_KEYS,resourceMethod:C.Ep.POST},B?n.createElement(l.c,{display:"flex"},n.createElement(o.c,{id:"generate-keys",variant:"contained",color:"primary",className:st.button,onClick:H?this.updateKeys:this.generateKeys},H?"Update":"Generate Keys",k&&n.createElement(m.c,{size:20})),!a.enableOAuthAppCreation&&n.createElement(l.c,{m:2,display:"flex"},n.createElement($.c,{className:st.warningIcon}),n.createElement(c.c,{variant:"body1"},n.createElement(p.c,{defaultMessage:"Oauth app creation disabled for {kmName} key manager",id:"Shared.AppsAndKeys.TokenManager.app.creation.disable .warn",values:{kmName:a.displayName||a.name}})))):n.createElement(n.Fragment,null,n.createElement(o.c,{id:"generate-keys",variant:"contained",color:"primary",className:st.button,onClick:H?this.updateKeys:this.generateKeys},H?"Update keys":"Generate Keys",k&&n.createElement(m.c,{size:20})),n.createElement(c.c,{variant:"caption"},n.createElement(p.c,{defaultMessage:"Only owner can generate or update keys",id:"Shared.AppsAndKeys.TokenManager.key.and.user.owner"}))))))),"EXCHANGED"===L&&J&&n.createElement(ot,{value:K,index:a.name,className:st.tabPanel},n.createElement(c.c,{className:st.subTitle,variant:"h6",component:"h6"},n.createElement(p.c,{defaultMessage:"Token Generation",id:"Shared.AppsAndKeys.TokenManager.ExchangeToken.key.configuration"})),n.createElement(l.c,{m:2},n.createElement(ie,{keys:i,key:H,selectedApp:e,selectedTab:K,keyType:t,updateKeyRequest:this.updateKeyRequest,keyRequest:d,isUserOwner:B,isKeysAvailable:!!H,keyManagerConfig:a,validating:x,updateHasError:this.updateHasError,callbackError:O,setValidating:this.setValidating,defaultTokenEndpoint:z}))))))))),"EXCHANGED"===L&&!J&&n.createElement("div",{className:st.inputWrapper},n.createElement(M.cp,{container:!0,spacing:3},n.createElement(M.cp,{item:!0,xs:12},n.createElement(E.c,{fullScreen:!1,open:!0,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title",className:st.dialogWrapper},n.createElement(A.c,{id:"responsive-dialog-title"},"Resident Key Manager Consumer Key and Secret Not Available "),n.createElement(b.c,null,n.createElement(U.c,null,n.createElement(n.Fragment,null,n.createElement(c.c,null,n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewCurl.error",defaultMessage:"Please generate the Consumer Key and Secret for Residence Key Manager with selecting the urn:ietf:params:oauth:grant-type:token-exchange grant type in order to use the token Exchange Approach. "}))))),n.createElement(f.c,null,n.createElement(o.c,{onClick:this.handleClose,color:"primary",autoFocus:!0,id:"close-btn"},n.createElement(p.c,{id:"Shared.AppsAndKeys.ViewKeys.consumer.close.btn",defaultMessage:"Close"})))))))):n.createElement(it,null,n.createElement(He,{keyState:H.keyState,states:this.keyStates}))}}at(lt,"contextType",Settings),lt.defaultProps={updateSubscriptionData:()=>{},summary:!1},lt.propTypes={classes:i().instanceOf(Object).isRequired,selectedApp:i().shape({tokenType:i().string.isRequired,appId:i().string,value:i().string,owner:i().string,hashEnabled:i().bool}).isRequired,keyType:i().string.isRequired,updateSubscriptionData:i().func,intl:i().shape({formatMessage:i().func}).isRequired,summary:i().bool};const ct=(0,d.cp)(lt)},101640:(e,t,a)=>{a.d(t,{Ce:()=>o,Ep:()=>l,qG:()=>c});var n=a(811504),r=a(203268),s=a.n(r),i=a(669872);const o={APIS:"/apis",SINGLE_API:"/apis/{apiId}",API_SWAGGER:"/apis/{apiId}/swagger",API_WSDL:"/apis/{apiId}/wsdl",API_GW_CONFIG:"/apis/{apiId}/gateway-config",API_THUMBNAIL:"/apis/{apiId}/thumbnail",API_COPY:"/apis/copy-api",API_LC_HISTORY:"/apis/{apiId}/lifecycle-history",API_CHANGE_LC:"/apis/change-lifecycle",API_LC:"/apis/{apiId}/lifecycle",API_LC_PENDING_TASK:"/apis/{apiId}/lifecycle/lifecycle-pending-task",API_DEF:"/apis/import-definition",API_VALIDATE_DEF:"/apis/validate-definition",API_DOCS:"/apis/{apiId}/documents",API_DOC:"'/apis/{apiId}/documents/{documentId}'",API_DOC_CONTENT:"'/apis/{apiId}/documents/{documentId}/content'",APPLICATIONS:"/applications",SINGLE_APPLICATION:"/applications/{applicationId}",APPLICATION_GENERATE_KEYS:"/applications/{applicationId}/generate-keys",APPLICATION_GENERATE_KEY_TYPE:"/applications/{applicationId}/keys/{keyType}",EXPORT_APIS:"/export/apis",IMPORT_APIS:"/import/apis",SUBSCRIPTION:"/subscriptions",SINGLE_SUBSCRIPTION:"/subscriptions/{subscriptionId}",SUBSCRIPTIONS:"/subscriptions",BLOCK_SUBSCRIPTION:"/subscriptions/block-subscription:",UNBLOCK_SUBSCRIPTION:"/subscriptions/unblock-subscription",POLICIES:"'/policies/{tierLevel}'",POLICY:"'/policies/{tierLevel}/{tierName}'",ENDPOINTS:"/endpoints",ENDPOINT:"/endpoints/{endpointId}",LABLES:"/labels",WORKFLOW:"/workflows/{workflowReferenceId}",SERVICE_DISCOVERY:"/external-resources/services"},l={POST:"post",PUT:"put",GET:"get",DELETE:"delete"};class c extends n.Component{constructor(e){super(e),this.state={}}componentDidMount(){const{resourcePath:e,resourceMethod:t}=this.props,a=i.c.hasScopes(e,t);a&&a.then((e=>{this.setState({haveScope:e})}))}render(){const{children:e}=this.props;return this.state.haveScope&&e||null}}c.propTypes={children:s().node.isRequired,resourcePath:s().string.isRequired,resourceMethod:s().string.isRequired}},895896:(e,t,a)=>{a.d(t,{c:()=>i});var n=a(690292),r=a(26740),s=a(33964);class i extends r.c{constructor(){super(),this.client=(new n.c).getAPIClient(s.c.getEnvironment().label).client}getSubscriptions(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25;return this.client.then((n=>n.apis.Subscriptions.get_subscriptions({apiId:e,applicationId:t,limit:a})))}getSubscription(e){return this.client.then((t=>t.apis.Subscriptions.get_subscriptions__subscriptionId_({subscriptionId:e})))}getMonetizationInvoice(e){return this.client.then((t=>t.apis["API Monetization"].get_subscriptions__subscriptionId__usage({subscriptionId:e})))}deleteSubscription(e){return this.client.then((t=>t.apis.Subscriptions.delete_subscriptions__subscriptionId_({subscriptionId:e})))}updateSubscription(e,t,a,n,r,s){return this.client.then((i=>{let o=null;o={applicationId:e,apiId:t,subscriptionId:a,throttlingPolicy:n,status:r,requestedThrottlingPolicy:s};const l={subscriptionId:a};return i.apis.Subscriptions.put_subscriptions__subscriptionId_(l,{requestBody:o},{"Content-Type":"application/json"})}))}}},715008:(e,t,a)=>{a.d(t,{c:()=>s});var n=a(770268),r=a.n(n);const s={number:r().number().integer(),url:r().string().uri().allow(""),ipAddress:r().string().ip({version:["ipv4","ipv6"],cidr:"optional"})}}}]);
//# sourceMappingURL=4856.e823fd55b0d313c63b54.bundle.js.map