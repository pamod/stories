(this.webpackChunk_wso2apim_devportal=this.webpackChunk_wso2apim_devportal||[]).push([[4056],{190764:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>be});var n=a(811504),r=a(906940),l=a(924004),i=a(203268),c=a.n(i),o=a(715656),s=a(162248),d=a(404292),u=a(669872),m=a(226120),p=a(932144),g=a.n(p),h=a(551752),f=a.n(h),E=a(991568),y=a(506248),v=(a(909144),a(326036),a(443520)),x=a(684128),b=a(544723),S=a(47568),T=a(273384),A=a(244400),R=a(861562),w=a(79592),C=a(304632),k=a(205420),N=a(403972);const $="QueryComplexityView",P={root:`${$}-root`,title:`${$}-title`,heading:`${$}-heading`,column:`${$}-column`,row:`${$}-row`},I=(0,r.cp)("div")((e=>{let{theme:t}=e;return{[`& .${P.root}`]:{width:"100%"},[`& .${P.title}`]:{fontSize:t.typography.pxToRem(29),fontWeight:"bold",flexBasis:"50%",flexShrink:0,marginTop:t.spacing(1),marginBottom:t.spacing(2),marginRight:t.spacing(1)},[`& .${P.heading}`]:{fontSize:t.typography.pxToRem(15),fontWeight:t.typography.fontWeightRegular,flexBasis:"50%",flexShrink:0,marginTop:t.spacing(1),marginBottom:t.spacing(1)}}})),B=(0,r.cp)(w.c)((e=>{let{theme:t}=e;return{[`& .${P.column}`]:{fontSize:t.typography.pxToRem(15),fontWeight:t.typography.fontWeightRegular,flexBasis:"33.33%",marginLeft:t.spacing(1)},[`& .${P.row}`]:{display:"flex"}}}));function H(){const{api:e}=(0,n.useContext)(S.U),[t,a]=(0,n.useState)([]),[r,l]=(0,n.useState)(null),i=(()=>{const[e,t]=(0,n.useState)(window.matchMedia("(prefers-color-scheme: dark)").matches),a=e=>{t(e.matches)};return(0,n.useEffect)((()=>{const e=window.matchMedia("(prefers-color-scheme: dark)");return e.addEventListener("change",a),()=>e.removeEventListener("change",a)}),[]),e})();return(0,n.useEffect)((()=>{const t=e.id;(new T.c).getGraphqlPoliciesComplexity(t).then((t=>{l(t.list);const n=[...new Set(t.list.map((e=>e.type)))];a(n),0===t.list.length&&function(){const t=e.id;(new T.c).getGraphqlPoliciesComplexityTypes(t).then((e=>{const t=[];e.typeList.map((e=>(e.fieldList.map((a=>{const n={};return n.type=e.type,n.field=a,n.complexityValue=1,t.push(n),a})),t))),l(t);const n=[...new Set(t.map((e=>e.type)))];a(n)}))}()}))}),[]),null===r?n.createElement(N.c,null):n.createElement(I,null,n.createElement("div",null,n.createElement("div",{className:P.title,style:{display:"flex",position:"relative"}},n.createElement("div",null,n.createElement(d.c,{id:"Apis.Details.GraphQLConsole.QueryComplexityView.title",defaultMessage:"Custom Complexity Values"}))),n.createElement(k.c,null),n.createElement("div",{className:P.root,style:{maxHeight:"740px",overflow:"scroll"}},n.createElement("div",null,t.map((e=>n.createElement(A.c,{sx:{backgroundColor:i?"#212a3b":"#fff",color:i?"#b7c2d7":"#3b4b68"}},n.createElement(R.c,{expandIcon:n.createElement(C.c,{sx:{color:i?"#b7c2d7":"#3b4b68"}}),"aria-controls":"panel1a-content",id:"panel1a-header"},n.createElement(s.c,{className:P.heading},e)),n.createElement(k.c,null),r.map((t=>t.type===e&&n.createElement(B,null,n.createElement("div",{className:P.row},n.createElement("div",{className:P.column},t.field,":"),n.createElement("div",{className:P.column},t.complexityValue))))))))))))}const{buildSchema:L}=a(752640);function q(e){const{authorizationHeader:t,URLs:a,securitySchemeType:r,accessTokenProvider:l,additionalHeaders:i}=e,{api:c}=(0,n.useContext)(S.U),[o,s]=(0,n.useState)(null),[d,u]=(0,n.useState)(""),m=(0,n.useRef)(null);(0,n.useEffect)((()=>{const e=c.id;(new T.c).getGraphQLSchemaByAPIId(e).then((e=>{const t=L(e.data);s(t)}))}),[]);const p=(0,x.y)(),g={title:"Query Complexity Analyzer",icon:()=>n.createElement(b.c,null),content:()=>n.createElement(H,null)};return null===o?n.createElement(N.c,null):n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(E.c,{display:"flex"},n.createElement(E.c,{display:"flex",width:1},n.createElement(E.c,{display:"flex",height:"800px",flexGrow:1},n.createElement(y.cp,{ref:m,fetcher:function(e){let n;n=c.advertiseInfo&&c.advertiseInfo.advertised||"API-KEY"===r?l():"BASIC"===r?"Basic "+l():"Bearer "+l();const o={[t]:n};return i.forEach((e=>{o[e.name]=e.value})),(0,v.Y5)({headers:o,url:a?a.https:null,subscriptionUrl:null==e?null:e+"?access_token="+l()})}(a&&a.wss),schema:o,query:d,onEditQuery:u,plugins:[p,g]}))))))}q.propTypes={classes:c().shape({paper:c().string.isRequired}).isRequired,additionalHeaders:c().shape({array:c().arrayOf(c().element).isRequired}).isRequired};var D=a(915176),M=a(232152),O=a(157344),Q=a(585824),U=a(457416),G=a(739376),z=a(859907),K=a.n(z),V=a(70132),j=a(40928),W=a(902706),F=a(758872),_=a(153328),Y=a(212576),J=a(217729),X=a(96144),Z=a(458130),ee=a(141776);function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},te.apply(this,arguments)}function ae(e){let{title:t,children:a,icon:r,triggerButtonText:l,saveButtonText:i,formSaveCallback:c,dialogOpenCallback:o,triggerIconProps:s}=e;const[d,u]=n.useState(!1),[m,p]=(0,n.useState)(!1),g=()=>{o(),u(!0)},h=()=>{u(!1)};return n.createElement(n.Fragment,null,r&&n.createElement(X.c,te({},s,{onClick:g,size:"large"}),r),l&&n.createElement(W.c,{onClick:g},l),n.createElement(F.c,{open:d,onClose:h,"aria-labelledby":"form-dialog-title"},n.createElement(J.c,{id:"form-dialog-title"},t),n.createElement(Y.c,null,a),n.createElement(_.c,null,n.createElement(W.c,{onClick:h},"Cancel"),n.createElement(W.c,{onClick:()=>{const e=c();"function"==typeof e?e(u):e&&(p(!0),e.then((e=>{ee.c.success(e)})).catch((e=>{ee.c.error(e)})).finally((()=>{p(!1),h()})))},color:"primary",variant:"contained",disabled:m},m?n.createElement(Z.c,{size:16}):n.createElement(n.Fragment,null,i)))))}ae.defaultProps={dialogOpenCallback:()=>{},triggerButtonProps:{variant:"contained",color:"primary"},triggerIconProps:{color:"primary",component:"span"}},ae.propTypes={title:c().string.isRequired,children:c().element.isRequired,icon:c().element.isRequired,triggerButtonText:c().string.isRequired,saveButtonText:c().string.isRequired,triggerButtonProps:c().shape({}),triggerIconProps:c().shape({}),formSaveCallback:c().func.isRequired,dialogOpenCallback:c().func};const ne=ae;var re=a(622037),le=a(557432);const ie="AddEditAdditionalHeaders-error",ce=(0,r.cp)(ne)((e=>{let{theme:t}=e;return{[`& .${ie}`]:{color:t.palette.error.dark}}}));function oe(e){const t=(0,V.c)(),{callBack:a,item:r}=e;let l="",i="";null!=r&&(l=r.name,i=r.value);const[c,o]=(0,n.useState)(l),[u,m]=(0,n.useState)(i),[p,g]=(0,n.useState)(!1),h=e=>{const{target:{name:t,value:a}}=e;switch(t){case"name":o(a);break;case"value":m(a)}},f=(e,t,a)=>{let n=!1;if(!a)return!1;switch(e){case"name":case"value":n=""===t&&e+" is Empty"}return n};return n.createElement(ce,{title:void 0===r?`${t.formatMessage({id:"GraphQL.Devportal.Tryout.Additional.header.add.new",defaultMessage:"Add New "})}`:`${t.formatMessage({id:"GraphQL.Devportal.Tryout.Additional.header.edit",defaultMessage:"Edit "})}`,saveButtonText:t.formatMessage({id:"GraphQL.Devportal.Tryout.Additional.header.dialog.btn.save",defaultMessage:"Save"}),triggerButtonText:r?null:t.formatMessage({id:"GraphQL.Devportal.Tryout.Additional.header.dialog.trigger.add",defaultMessage:"Add"}),icon:r?n.createElement(le.c,null):null,triggerButtonProps:{color:"default",variant:"contained",size:"small"},formSaveCallback:()=>(g(!0),!function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!(!f("name",c,e)&&!f("value",u,e))}(!0)&&(e=>{a({name:c,value:u},r),e(!1)}))},n.createElement(j.c,null,n.createElement(s.c,{variant:"caption"},n.createElement(d.c,{id:"GraphQL.Devportal.Tryout.Addtional.headers.help",defaultMessage:"This configuration is used to add additional Headers."}))),n.createElement(re.c,{margin:"dense",name:"name",value:void 0===r?null:c,onChange:h,label:n.createElement("span",null,n.createElement(d.c,{id:"GraphQL.Devportal.Tryout.Additional.header.form.name",defaultMessage:"Header Name"}),n.createElement("span",{className:ie},"*")),fullWidth:!0,multiline:!0,helperText:f("name",c,p)||t.formatMessage({id:"GraphQL.Devportal.Tryout.Additional.header.form.name.help",defaultMessage:"Provide Name"}),variant:"outlined",error:f("name",c,p)}),n.createElement(re.c,{margin:"dense",name:"value",value:void 0===r?null:u,onChange:h,label:n.createElement("span",null,n.createElement(d.c,{id:"GraphQL.Devportal.Tryout.Additional.header.form.value",defaultMessage:"Header Value"}),n.createElement("span",{className:ie},"*")),fullWidth:!0,multiline:!0,helperText:f("value",u,p)||t.formatMessage({id:"GraphQL.Devportal.Tryout.Additional.header.form.value.help",defaultMessage:"Provide Value"}),variant:"outlined",error:f("value",u,p)}))}oe.propTypes={row:c().shape({id:c().number.isRequired}).isRequired};const se=oe;var de=a(729700);function ue(e){let{item:t,callBack:a}=e;return n.createElement(ne,{title:"Delete Additional Header",saveButtonText:"Delete",icon:n.createElement(de.default,null),formSaveCallback:()=>e=>{a(t),e(!1)}},n.createElement(j.c,null,t.name,n.createElement(d.c,{id:"Throttling.Advanced.Delete.will.be.deleted",defaultMessage:" will be deleted."})))}ue.propTypes={row:c().shape({}).isRequired,callBack:c().func.isRequired,item:c().shape({name:c().shape({}).isRequired}).isRequired};const me=ue,pe="AdditionalHeaders",ge={root:`${pe}-root`,heading:`${pe}-heading`,secondaryHeading:`${pe}-secondaryHeading`,table:`${pe}-table`,expandContentRoot:`${pe}-expandContentRoot`,subsubTitle:`${pe}-subsubTitle`,alert:`${pe}-alert`,hr:`${pe}-hr`,descriptionBox:`${pe}-descriptionBox`},he=(0,r.cp)("div")((e=>{let{theme:t}=e;return{[`&.${ge.root}`]:{width:"100%",marginBottom:20},[`& .${ge.heading}`]:{fontSize:t.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,flex:1,alignItems:"center"},[`& .${ge.secondaryHeading}`]:{fontSize:t.typography.pxToRem(15),color:t.palette.text.secondary,display:"flex",alignItems:"center"},[`& .${ge.table}`]:{marginBottom:40,background:"#efefef","& th":{background:"#ccc"}},[`& .${ge.expandContentRoot}`]:{flexDirection:"column"},[`& .${ge.subsubTitle}`]:{fontSize:"0.81rem"},[`& .${ge.alert}`]:{flex:1},[`& .${ge.hr}`]:{border:"solid 1px #efefef",width:"100%"},[`& .${ge.descriptionBox}`]:{marginLeft:t.spacing(1)}}}));function fe(e){const{additionalHeaders:t,setAdditionalHeaders:a}=e,[r,l]=n.useState(!1),i=e=>{const n=K()(t);for(let t=0;t<n.length;t++)n[t].id===e.id&&n.splice(t,1);a(n)},c=(e,n)=>{const{name:r,value:l}=e,i=K()(t);for(let e=0;e<i.length;e++)i[e].id===n.id&&(i[e].name=r,i[e].value=l);a(i)};return n.createElement(he,{className:ge.root},n.createElement(A.c,{expanded:"panel1"===r,onChange:("panel1",(e,t)=>{l(!!t&&"panel1")})},n.createElement(R.c,{expandIcon:n.createElement(C.c,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},n.createElement("div",{className:ge.heading},!r&&n.createElement(s.c,{variant:"caption"},"Add additional headers")),!r&&n.createElement(s.c,{className:ge.secondaryHeading},"Expand to edit"),r&&n.createElement(s.c,{className:ge.secondaryHeading},"Hide group")),n.createElement(w.c,{classes:{root:ge.expandContentRoot}},n.createElement(n.Fragment,null,n.createElement(k.c,{sx:{opacity:.2},className:ge.customDivider}),n.createElement(E.c,{component:"div",marginLeft:1,display:"flex",alignItems:"center"},n.createElement(E.c,{flex:1},n.createElement(s.c,{variant:"caption"},n.createElement(d.c,{id:"GraphQL.Devportal.Tryout.Addtional.headers.help",defaultMessage:"This configuration is used to add additional Headers."}))),n.createElement(E.c,{component:"span",m:1},n.createElement(se,{callBack:e=>{const{name:n,value:r}=e,l={id:"",name:"",value:""};l.id=Math.random().toString(36).substring(2)+Date.now().toString(36),l.name=n,l.value=r;const i=K()(t);i.push(l),a(i)}}))),t&&n.createElement(E.c,{component:"div",marginLeft:1},n.createElement(M.c,{className:ge.table,size:"small","aria-label":"a dense table"},n.createElement(U.c,null,n.createElement(G.c,null,n.createElement(Q.c,null,n.createElement(n.Fragment,null,n.createElement(d.c,{id:"GraphQL.Devportal.Tryout.Additional.headers.header.name",defaultMessage:"Header Name"}))),n.createElement(Q.c,null,n.createElement(n.Fragment,null,n.createElement(d.c,{id:"GraphQL.Devportal.Tryout.Additional.headers.header.value",defaultMessage:"Header Value"}))),n.createElement(Q.c,null))),n.createElement(O.c,null,t.map((e=>n.createElement(G.c,{key:e.headerName},n.createElement(Q.c,{component:"td",scope:"row"},e.name),n.createElement(Q.c,{component:"td",scope:"row"},e.value),n.createElement(Q.c,{width:100,className:ge.actionColumn},n.createElement(E.c,{display:"flex"},n.createElement(se,{item:e,callBack:c}),n.createElement(me,{item:e,callBack:i})))))))))),n.createElement(k.c,null))))}fe.propTypes={dataRow:c().shape({id:c().number.isRequired}).isRequired,additionalHeaders:c().shape({array:c().arrayOf(c().element).isRequired}).isRequired};const Ee=fe,ye="GraphQLConsole",ve={buttonIcon:`${ye}-buttonIcon`,paper:`${ye}-paper`,grid:`${ye}-grid`,userNotificationPaper:`${ye}-userNotificationPaper`,titleSub:`${ye}-titleSub`},xe=(0,r.cp)("div")((e=>{let{theme:t}=e;return{[`& .${ve.buttonIcon}`]:{marginRight:10},[`& .${ve.paper}`]:{margin:t.spacing(1),padding:t.spacing(1)},[`& .${ve.grid}`]:{marginTop:t.spacing(4),marginBottom:t.spacing(4),paddingRight:t.spacing(2),justifyContent:"center"},[`& .${ve.userNotificationPaper}`]:{padding:t.spacing(2)},[`& .${ve.titleSub}`]:{marginLeft:t.spacing(2),paddingTop:t.spacing(2),paddingBottom:t.spacing(2)}}}));function be(){const{api:e}=(0,n.useContext)(S.U),t=e.endpointURLs,[a,r]=(0,n.useState)(t.length>0?t[0].URLs:null),[i,c]=(0,n.useState)("OAUTH"),[p,h]=(0,n.useState)(!1),[y,v]=(0,n.useState)(""),[x,b]=(0,n.useState)(""),[A,R]=(0,n.useState)(),[w,C]=(0,n.useState)(),[k,$]=(0,n.useState)([]),[P,I]=(0,n.useState)(),[B,H]=(0,n.useState)(),[L,M]=(0,n.useState)("PRODUCTION"),[O,Q]=(0,n.useState)(""),[U,G]=(0,n.useState)(""),[z,K]=(0,n.useState)("Authorization"),[V,j]=(0,n.useState)(""),[W,F]=(0,n.useState)("PRODUCTION"),[_,Y]=(0,n.useState)([]),[J,X]=(0,n.useState)([]),Z=u.c.getUser(),ee=e.advertiseInfo&&e.advertiseInfo.advertised;function te(){let e;_.get(L)&&({accessToken:e}=_.get(L).token),"PRODUCTION"===L?I(e):H(e)}function ae(e){const t={http:null,https:null,ws:null,wss:null},[a]=e.split("://");return"http"!==a&&"https"!==a&&"ws"!==a&&"wss"!==a||(t[a]=e),t}if((0,n.useEffect)((()=>{const t=e.id;(new T.c).getAPIById(t).then((e=>{const t=e.obj;if(t.endpointURLs){const e=t.endpointURLs.map((e=>({name:e.environmentName,displayName:e.environmentDisplayName})));C(e)}if(t.scopes){const e=t.scopes.map((e=>e.name));$(e)}})).catch((e=>{const{status:t}=e;404===t&&h(!0)}))}),[]),null==e)return n.createElement(N.c,null);if(p)return"API Not found !";let ne=!1,re=e.authorizationHeader?e.authorizationHeader:"Authorization";return e&&e.securityScheme&&(ne=e.securityScheme.includes("api_key"),ne&&"API-KEY"===i&&(re=e.apiKeyHeader?e.apiKeyHeader:"ApiKey")),ee&&(re=z),n.createElement(xe,null,n.createElement(s.c,{variant:"h4",className:ve.titleSub},n.createElement(d.c,{id:"Apis.Details.GraphQLConsole.GraphQLConsole.title",defaultMessage:"Try Out"})),n.createElement(l.c,{className:ve.paper},n.createElement(o.cp,{container:!0,className:ve.grid},!Z&&!ee&&n.createElement(o.cp,{item:!0,md:6},n.createElement(l.c,{className:ve.userNotificationPaper},n.createElement(s.c,{variant:"h5",component:"h3"},n.createElement(m.c,null,"info")," ",n.createElement(d.c,{id:"notice",defaultMessage:"Notice"})),n.createElement(s.c,{component:"p"},n.createElement(d.c,{id:"api.console.require.access.token",defaultMessage:"You need an access token to try the API. Please log in and subscribe to the API to generate an access token. If you already have an access token, please provide it below."}))))),n.createElement(o.cp,{container:!0,className:ve.grid},n.createElement(D.c,{setSecurityScheme:c,securitySchemeType:i,setSelectedEnvironment:R,selectedEnvironment:A,productionAccessToken:P,setProductionAccessToken:I,sandboxAccessToken:B,setSandboxAccessToken:H,environments:w,scopes:k,setUsername:v,setPassword:b,username:y,password:x,setSelectedKeyType:function(e,t){t&&!ee?M(e,te):M(e)},convertToPostman:function(e,t){f().convert({type:"string",data:e},{},((e,a)=>{if(e)console.log(e);else{const e=t.https,n=a;n.output[0].data.variable[0].value=e;const r=n.output[0].data;g()(JSON.stringify(r),"postman collection"),console.log("Conversion success")}}))},selectedKeyType:L,setKeys:Y,setURLs:r,setProductionApiKey:G,setSandboxApiKey:Q,productionApiKey:U,sandboxApiKey:O,environmentObject:t,setAdvAuthHeader:K,setAdvAuthHeaderValue:j,advAuthHeader:z,advAuthHeaderValue:V,setSelectedEndpoint:F,selectedEndpoint:W,api:e,URLs:a})),n.createElement(E.c,{display:"flex",justifyContent:"center"},n.createElement(E.c,{width:"50%",display:"flex",flexDirection:"column"},n.createElement(E.c,{ml:-5,display:"flex"},n.createElement(s.c,{variant:"h5",component:"h3",color:"textPrimary"},n.createElement(d.c,{id:"api.console.gql.additional.headers",defaultMessage:"Additional Headers"}))))),n.createElement(o.cp,{container:!0,className:ve.grid},n.createElement(o.cp,{item:!0,md:6},n.createElement(Ee,{setAdditionalHeaders:X,additionalHeaders:J})))),n.createElement(l.c,{className:ve.paper},n.createElement(q,{authorizationHeader:re,URLs:function(){if(e.advertiseInfo&&e.advertiseInfo.advertised){if("PRODUCTION"===W)return ae(e.advertiseInfo.apiExternalProductionEndpoint);if("SANDBOX"===W)return ae(e.advertiseInfo.apiExternalSandboxEndpoint)}return a}(),securitySchemeType:i,accessTokenProvider:function(){return ee?V:"BASIC"===i?btoa(y+":"+x):"API-KEY"===i?"PRODUCTION"===L?U:O:"PRODUCTION"===L?P:B},additionalHeaders:J})))}be.propTypes={classes:c().shape({paper:c().string.isRequired,titleSub:c().string.isRequired,root:c().string.isRequired}).isRequired}},806016:()=>{},983812:()=>{},333508:()=>{},342064:()=>{},242032:()=>{},130468:()=>{},941868:()=>{},340360:()=>{}}]);
//# sourceMappingURL=GraphQLConsole.81217111b355069f7b18.bundle.js.map